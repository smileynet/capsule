# Test Specification: Wire campaign dispatch into dashboard model

## Bead: cap-fj8.1.4

## Tracer
Integration — proves the full dashboard flow works end-to-end in tests.

## Context
- Extend model.go with campaign dispatch routing
- Mirror dispatchPipeline goroutine pattern
- Handle campaign messages in Update()

## Test Cases

| Input | Expected Output | Notes |
|-------|-----------------|-------|
| DispatchMsg{BeadType: "feature"} | Mode → ModeCampaign | Feature dispatches campaign |
| DispatchMsg{BeadType: "epic"} | Mode → ModeCampaign | Epic dispatches campaign |
| DispatchMsg{BeadType: "task"} | Mode → ModePipeline | Task dispatches pipeline |
| DispatchMsg{BeadType: ""} | Mode → ModePipeline | Empty defaults to pipeline |
| CampaignStartMsg in ModeCampaign | campaignState updated | Start handled |
| CampaignTaskStartMsg in ModeCampaign | campaignState.Update called | Task start handled |
| CampaignTaskDoneMsg in ModeCampaign | campaignState.Update called | Task done handled |
| CampaignDoneMsg in ModeCampaign | Mode → ModeCampaignSummary | Campaign complete |
| "q" key in ModeCampaign | Campaign abort triggered | Abort works |
| Any key in ModeCampaignSummary | Mode → ModeBrowse | Return to browse |
| WithCampaignRunner(runner) | model.campaignRunner set | Option wiring |
| viewLeft(ModeCampaign) | campaign.View() output | Left pane delegates |
| viewRight(ModeCampaign) | campaign.ViewReport() output | Right pane delegates |

## Edge Cases
- [ ] DispatchMsg with BeadType "feature" but no CampaignRunner configured
- [ ] Campaign dispatch when already in campaign mode (ignore)
- [ ] CampaignDoneMsg with all tasks failed
- [ ] Abort during campaign → cleanup of goroutine

## Implementation Notes
- handleDispatch branches: if BeadType in {feature, epic} && campaignRunner != nil → campaign
- dispatchCampaign mirrors dispatchPipeline: goroutine, channel, waitForPipelineEvents
- summary.go: skip postPipeline call for ModeCampaignSummary
