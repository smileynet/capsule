# Test Specification: Pipeline dispatch with channel and self-scheduling pump

## Context
- Enter key on a selected bead triggers pipeline dispatch
- A goroutine runs the pipeline and sends events through a channel
- A self-scheduling pump (tea.Cmd) reads events from the channel and feeds them to the model
- Channel close triggers transition from pipeline mode to summary mode
- Ctrl+C during pipeline cancels the pipeline context
- Deliverable: dispatch logic, channel pump, PipelineRunner interface integration

## Test Cases

| Input | Expected Output | Notes |
|-------|-----------------|-------|
| Enter key on selected bead | PipelineRunner.Run() called with bead | Dispatch trigger |
| PhaseStartedEvent from channel | PhaseStartedMsg delivered to model | Event flow |
| PhaseCompletedEvent from channel | PhaseCompletedMsg delivered to model | Event flow |
| Channel closed | SummaryTransitionMsg delivered | Pipeline complete |
| Ctrl+C during pipeline | Pipeline context cancelled | Abort cancellation |
| Mock PipelineRunner.Run() | Receives correct bead ID and config | Input verification |
| 3 events sent sequentially | All 3 processed in order | Sequential processing |
| Pump reads event, reschedules self | Next event read on next tick | Self-scheduling loop |

## Edge Cases
- [ ] Channel buffer full: pump blocks until model processes previous event
- [ ] Pipeline errors immediately (first event is error): transitions to summary with error
- [ ] Abort during phase transition: clean cancellation without race
- [ ] Multiple Enter presses do not dispatch multiple pipelines
- [ ] Channel pump stops when channel is closed (no goroutine leak)
