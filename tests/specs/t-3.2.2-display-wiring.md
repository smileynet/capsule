# TDD Spec: Wire Display into CLI

**Task:** t-3.2.2
**Feature:** Dual-mode display
**Epic:** Epic 3 - TUI Dashboard

## Context

Update RunCmd to create the appropriate Display based on TTY detection and --no-tui flag, set up a channel bridge between the orchestrator's StatusCallback and the display, and handle TUI crash recovery (fall back to plain text if Bubble Tea panics).

## Test Cases

| # | Input / Setup | Expected Output | Notes |
|---|--------------|-----------------|-------|
| 1 | Integration test with mock provider, TTY mode | TUI display receives all phase updates | TUI wiring |
| 2 | Integration test with mock provider, non-TTY mode | Plain text output for all phases | Plain text wiring |
| 3 | Integration test with --no-tui flag | Plain text output regardless of TTY | Flag override wiring |
| 4 | TUI display crashes mid-pipeline | Falls back to plain text, pipeline continues | Crash recovery |
| 5 | Verify channel bridge delivers all updates | No dropped messages between orchestrator and display | Reliable delivery |
| 6 | Display starts before pipeline and stops after | Display lifecycle brackets pipeline execution | Proper ordering |

## Edge Cases

- [ ] Pipeline completes very quickly (before TUI fully initializes) -- all updates still displayed
- [ ] Display stop is called even if pipeline errors -- cleanup always runs
- [ ] Channel bridge handles backpressure (display slower than orchestrator)
- [ ] Concurrent status updates from orchestrator are serialized for display

## Deliverable

CLI with dual-mode display
