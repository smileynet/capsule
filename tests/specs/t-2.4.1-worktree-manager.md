# TDD Spec: Implement worktree Manager

**Task:** t-2.4.1
**Feature:** Worktree and worklog lifecycle
**Epic:** Epic 2 - Go CLI Tool

## Context

Implement the worktree Manager with Create, Remove, List, and Exists methods. Port behavior from the legacy shell scripts (prep.sh, teardown.sh). Tests use real git operations in t.TempDir() for accurate integration testing.

## Test Cases

| # | Input / Setup | Expected Output | Notes |
|---|--------------|-----------------|-------|
| 1 | Create worktree with valid bead-id in temp git repo | Worktree directory exists, on new branch | Happy path with real git |
| 2 | Create worktree when one already exists for bead-id | Error indicating worktree already exists | Duplicate prevention |
| 3 | Remove existing worktree | Directory removed, branch pruned | Cleanup |
| 4 | List worktrees after creating two | Both worktree paths returned | Enumeration |
| 5 | Exists check on existing worktree | Returns true | Existence check |
| 6 | Exists check on non-existent worktree | Returns false | Negative existence check |

## Edge Cases

- [ ] Create worktree in repo with no commits -- requires at least one commit first
- [ ] Remove worktree that has already been manually deleted (directory gone but git metadata remains)
- [ ] Bead-id with characters invalid for git branch names -- sanitization applied
- [ ] Concurrent Create calls for same bead-id -- only one succeeds

## Deliverable

Worktree manager with git tests
