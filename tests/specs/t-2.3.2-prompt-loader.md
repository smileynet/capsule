# TDD Spec: Implement prompt Loader and Composer

**Task:** t-2.3.2
**Feature:** Configuration and prompt management
**Epic:** Epic 2 - Go CLI Tool

## Context

Implement prompt Loader that reads prompt templates from the filesystem by phase name, and Composer that combines the loaded prompt with runtime context (worklog content, feedback from previous attempts, bead metadata). Load(phaseName) retrieves the template, Compose(phaseName, Context) produces the final prompt string.

## Test Cases

| # | Input / Setup | Expected Output | Notes |
|---|--------------|-----------------|-------|
| 1 | Load existing prompt by phase name | Prompt template string returned | Happy path |
| 2 | Load non-existent prompt name | Error indicating prompt not found | Missing prompt handling |
| 3 | Compose prompt with full context (worklog + bead data) | Prompt contains interpolated context values | Template rendering |
| 4 | Compose prompt with feedback from previous attempt | Feedback section appended to prompt | Retry context injection |
| 5 | Compose prompt without feedback (first attempt) | No feedback section in output | Clean first-attempt prompt |
| 6 | Compose prompt with empty worklog | Prompt renders with placeholder for empty worklog | Handles missing optional context |

## Edge Cases

- [ ] Prompt template contains special characters that could break interpolation
- [ ] Very large worklog content does not cause issues in composed prompt
- [ ] Loader searches multiple directories (embedded + user-provided override)
- [ ] Phase name with path separators is rejected (security: path traversal prevention)

## Deliverable

Prompt loader with compose
