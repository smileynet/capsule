# TDD Spec: Wire orchestrator into CLI run command

**Task:** t-2.5.3
**Feature:** Orchestrator
**Epic:** Epic 2 - Go CLI Tool

## Context

Wire the RunCmd CLI command to: load config, initialize the provider from config, create the orchestrator with options from config/flags, set up StatusCallback for plain text output, run the pipeline, and map results to exit codes (0=success, 1=failure, 2=error).

## Test Cases

| # | Input / Setup | Expected Output | Notes |
|---|--------------|-----------------|-------|
| 1 | Integration test with mock provider, all phases PASS | Exit code 0, output shows phase progress | Happy path wiring |
| 2 | Integration test with mock provider, pipeline fails | Exit code 1, output shows failure details | Failure exit code |
| 3 | Integration test with mock provider, pipeline errors | Exit code 2, output shows error details | Error exit code |
| 4 | Verify config loaded and passed to orchestrator | Mock provider receives config values (e.g., max retries) | Config threading |
| 5 | Verify --max-retries flag overrides config | Orchestrator uses flag value, not config file value | Flag precedence |
| 6 | Plain text StatusCallback output | Phase names and statuses printed to stdout | Non-TUI output mode |

## Edge Cases

- [ ] Provider specified in config does not exist in registry -- clear error message
- [ ] Config file missing -- falls back to defaults, pipeline still runs
- [ ] Ctrl+C during pipeline -- context cancelled, cleanup runs, non-zero exit
- [ ] Bead-id validation happens before provider initialization

## Deliverable

CLI wired to orchestrator
