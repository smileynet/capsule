# TDD Spec: Validate execute/execute-review pair end-to-end

**Task:** t-1.4.3
**Feature:** Execute and execute-review prompt pair
**Epic:** Epic 1 - Shell-based Pipeline Prototype

## Context

Integration test that starts after test-writer/test-review have completed (tests exist and are in RED state). Runs execute phase, verifies implementation created and tests pass, then runs execute-review, verifies review outcome and worklog updated. Tests the retry path if execute-review returns NEEDS_WORK.

## Test Cases

| # | Input / Setup | Expected Output | Notes |
|---|--------------|-----------------|-------|
| 1 | Start with worktree containing failing tests, run execute | Implementation files created, `go test` passes | GREEN achieved |
| 2 | After execute, run execute-review | Signal is PASS or NEEDS_WORK, worklog updated | Review evaluates implementation |
| 3 | Simulate NEEDS_WORK, retry execute with feedback | Execute receives feedback, adjusts implementation | Retry loop |
| 4 | Verify worklog has entries for both execute and execute-review | Phase entries present with correct phase names | Audit trail complete |
| 5 | Verify no test files modified during execute phase | Test file checksums unchanged before and after execute | Execute must not alter tests |

## Edge Cases

- [ ] Execute phase encounters compile errors -- signals NEEDS_WORK or ERROR
- [ ] Execute-review finds scope creep -- returns NEEDS_WORK with specific feedback
- [ ] Tests pass but execute-review finds code quality issues -- NEEDS_WORK
- [ ] Cleanup after test: worktree and artifacts removed

## Deliverable

tests/test-phase-pair-execute.sh
