# TDD Spec: Implement Orchestrator with runPhasePair loop

**Task:** t-2.5.2
**Feature:** Orchestrator
**Epic:** Epic 2 - Go CLI Tool

## Context

Implement the Orchestrator struct with functional options pattern, runPhasePair method for writer/review retry loops, and RunPipeline for the full lifecycle. Handles: prep, test-writer/test-review loop, execute/execute-review loop, sign-off, merge. All tests use mock providers.

## Test Cases

| # | Input / Setup | Expected Output | Notes |
|---|--------------|-----------------|-------|
| 1 | Mock provider returns PASS for all phases | RunPipeline completes, all phases executed in order | Happy path |
| 2 | Mock test-review returns NEEDS_WORK once, then PASS | test-writer retried once, pipeline completes | Single retry |
| 3 | Mock test-review returns NEEDS_WORK beyond max retries | RunPipeline returns max-retries-exceeded error | Retry exhaustion |
| 4 | Mock execute returns ERROR | RunPipeline returns error, stops immediately | Error abort |
| 5 | Cancel context during execution | RunPipeline returns context.Canceled error | Cancellation support |
| 6 | Verify StatusCallback receives updates for each phase transition | Callback invoked with correct phase and status for each step | Progress reporting |

## Edge Cases

- [ ] Feedback from review phase is passed to next writer/execute invocation
- [ ] Orchestrator options (WithMaxRetries, WithStatusCallback) apply correctly
- [ ] runPhasePair handles the case where writer succeeds but review errors (not NEEDS_WORK)
- [ ] Pipeline state is consistent after cancellation (no partial writes)

## Deliverable

Orchestrator with full pipeline
