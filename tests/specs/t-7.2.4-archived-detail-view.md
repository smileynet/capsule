# Test Specification: Show archived results in closed bead detail view

## Bead: cap-fj8.2.4

## Tracer
Integration — proves archived data renders in the detail pane.

## Context
- Extend model.go with ArchiveReader field and option
- Wire FileArchiveReader in cmd/capsule/main.go
- Progressive disclosure: summary first, worklog below

## Test Cases

| Input | Expected Output | Notes |
|-------|-----------------|-------|
| Select closed bead with archived summary | Detail + separator + summary shown | Integration |
| Select closed bead with worklog | Summary + worklog excerpt below | Progressive disclosure |
| Select closed bead with no archive | Standard detail only (no error) | Graceful fallback |
| WithArchiveReader(reader) option | model.archive field set | Option wiring |
| beadListerAdapter.Closed(50) | Calls bead.Client.Closed(50) | Adapter wiring |
| fileArchiveReader in CLI | Reads from .capsule/logs/ | Real path |

## Edge Cases
- [ ] Closed bead with summary but no worklog
- [ ] Very long worklog (truncate or scroll)
- [ ] Archive reader returns error (show detail without archive)
- [ ] Switching between closed beads updates archive view

## Implementation Notes
- Detect closed bead by checking browseState.showClosed
- On resolve for closed bead: fetch detail AND archive data
- Render: standard detail → "──── Pipeline Results ────" → summary → worklog
- Worklog may be long: consider truncating to first N lines with "[more]"
