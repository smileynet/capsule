# TDD Spec: Create teardown.sh cleanup script

**Task:** t-1.6.2
**Feature:** Full pipeline orchestration
**Epic:** Epic 1 - Shell-based Pipeline Prototype

## Context

scripts/teardown.sh: removes worktrees created by the pipeline, cleans output/temp files, preserves logs and archived worklogs, prunes stale git metadata. Used for cleanup after pipeline completion or failure.

## Test Cases

| # | Input / Setup | Expected Output | Notes |
|---|--------------|-----------------|-------|
| 1 | Create worktree via prep, then run teardown.sh | Worktree directory removed, branch pruned | Basic cleanup |
| 2 | Run teardown.sh with no active worktrees | Exits cleanly with no errors | Idempotent |
| 3 | Verify logs preserved after teardown | Log files still present in logs directory | Teardown does not destroy audit trail |
| 4 | Verify archived worklogs preserved | Archive directory untouched | Historical records kept |
| 5 | Run teardown.sh with multiple active worktrees | All worktrees removed | Handles multiple concurrent pipelines |

## Edge Cases

- [ ] Worktree has uncommitted changes -- teardown removes anyway (force cleanup)
- [ ] Git metadata is stale (branch deleted but worktree reference remains) -- prune handles it
- [ ] Teardown run from a worktree itself -- detects and refuses or handles gracefully
- [ ] Partial previous cleanup (worktree dir gone but branch exists) -- handles both independently

## Deliverable

scripts/teardown.sh
