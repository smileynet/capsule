{"id":"cap-10s","title":"Multi-CLI Support","description":"Support multiple AI CLI tools beyond Claude Code. Provider interface extensions for OpenCode, Kiro, and other headless CLI tools with provider-specific prompt adaptation.","acceptance_criteria":"capsule run --provider=opencode executes pipeline with OpenCode CLI","status":"open","priority":4,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:11.111436636-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T08:28:11.111436636-08:00","dependencies":[{"issue_id":"cap-10s","depends_on_id":"cap-6vp","type":"blocks","created_at":"2026-02-06T08:28:17.573861833-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-10s.1","title":"Provider interface extensions for multi-CLI","description":"As a user, I want to use capsule with different AI CLI tools so that I'm not locked into one provider. (Placeholder — TBD during Epic 5 scoping)","acceptance_criteria":"TBD during Epic 5 scoping","status":"open","priority":4,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:35.216376541-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T08:29:35.216376541-08:00","dependencies":[{"issue_id":"cap-10s.1","depends_on_id":"cap-10s","type":"parent-child","created_at":"2026-02-06T08:29:35.218133867-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-10s.2","title":"Provider-specific prompt adaptation","description":"As a user, I want prompts that adapt to each provider's capabilities so that the pipeline works well regardless of provider. (Placeholder — TBD during Epic 5 scoping)","acceptance_criteria":"TBD during Epic 5 scoping","status":"open","priority":4,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:35.275086945-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T08:29:35.275086945-08:00","dependencies":[{"issue_id":"cap-10s.2","depends_on_id":"cap-10s","type":"parent-child","created_at":"2026-02-06T08:29:35.276788648-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-1j1","title":"List() should cross-reference git worktree list for accuracy","description":"Manager.List() scans the filesystem for subdirectories under baseDir. It does not verify entries are actually registered git worktrees. Stale directories from failed operations would be reported as worktree IDs. Consider cross-referencing against 'git worktree list --porcelain' for accuracy.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-10T06:30:57.327980539-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T06:36:13.023310493-08:00","closed_at":"2026-02-10T06:36:13.023310493-08:00","close_reason":"Closed"}
{"id":"cap-3ac","title":"Fix test-template-source-files.sh E4 false positive on shebang","description":"Discovery Source: Plan - Improve Demo Templates\nDiscovered During: cook phase (verification)\n\nImpact:\ntest-template-source-files.sh E4 \"No hardcoded absolute paths\" fails because\nthe grep pattern matches #!/usr/bin/env bash shebangs in test-fixtures.sh.\nThis is a false positive — shebangs are standard and expected.\n\nContext:\nThe grep on line 130 uses pattern: (^|[^.])/home/|/usr/|/tmp/\nThis matches /usr/ in #!/usr/bin/env bash.\nFix: exclude shebang lines from the grep, e.g. grep -v '^#!' or\nadjust the pattern to skip /usr/bin/env.\nPre-existing issue — was failing before this plan's changes too.\nRelated: tests/scripts/test-template-source-files.sh:130","status":"closed","priority":3,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-08T12:48:43.964698695-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T11:53:45.703691777-08:00","closed_at":"2026-02-15T11:53:45.703691777-08:00","close_reason":"Closed","comments":[{"id":295,"issue_id":"cap-3ac","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-15T19:50:40Z"},{"id":296,"issue_id":"cap-3ac","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Fix false positive in E4 test that flagged shebangs as hardcoded paths\nBefore: E4 test failed because grep matched /usr/ in #!/usr/bin/env bash shebangs\nAfter: Shebang lines are excluded from the path check; real hardcoded paths still detected\n\nFiles: 1 changed\nFindings: none","created_at":"2026-02-15T19:51:46Z"},{"id":297,"issue_id":"cap-3ac","author":"Sam Biggins","text":"PHASE: COOK (rework)\nStatus: completed\nApplied review feedback: tightened grep -v pattern, updated comment","created_at":"2026-02-15T19:53:45Z"},{"id":298,"issue_id":"cap-3ac","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED (after 1 rework)\nIssues: 1 minor fixed (tightened grep pattern), 1 nit fixed (comment update), 1 polish (results footer)\nSummary: Clean fix excluding shebangs from E4 path check. Pattern anchored to grep -rn output format for robustness.","created_at":"2026-02-15T19:55:47Z"},{"id":299,"issue_id":"cap-3ac","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix false positive in E4 test that flagged shebangs as hardcoded paths\nBefore: E4 test failed because grep matched /usr/ in #!/usr/bin/env bash shebangs\nAfter: Shebang lines excluded from path check; real hardcoded paths still detected\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: 4e406a9\nPush: success","created_at":"2026-02-15T19:56:36Z"}]}
{"id":"cap-3uf","title":"Acceptance template improvements and /acceptance skill","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T09:39:56.985303718-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T09:40:15.281270224-08:00","closed_at":"2026-02-07T09:40:15.281270224-08:00","close_reason":"Closed","comments":[{"id":59,"issue_id":"cap-3uf","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 4 nits (1 fixed, 3 acceptable as-is)\nSummary: Cohesive acceptance framework — skill, templates, and backfilled report are tightly aligned. Declarative language, honest limitations, clean template design. Fixed one nit clarifying feature-vs-epic evidence expectations in skill process step.","created_at":"2026-02-07T17:55:20Z"},{"id":60,"issue_id":"cap-3uf","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create acceptance documentation framework with skill, improved templates, and exemplar report\nBefore: Ad-hoc acceptance templates with developer-facing bookkeeping sections (deliverables tables, task checklists, BDD review summaries)\nAfter: Lean templates focused on evidence-linked criteria, reproducible verification commands, and honest boundaries. /acceptance skill encodes best practices.\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: 1edeabe, 01547f8\nPush: success","created_at":"2026-02-07T17:56:18Z"}]}
{"id":"cap-40u","title":"Add feedback field validation to test-parse-signal.sh","description":"Source: cap-8ax.3 criterion 2 evidence audit. parse-signal.sh validates status (test 5) and files_changed type (test 7) as required fields, but has no equivalent test for missing/empty feedback field.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T13:26:27.606354423-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T13:20:32.493694334-08:00","closed_at":"2026-02-15T13:20:32.493694334-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-40u","depends_on_id":"cap-8ax","type":"blocks","created_at":"2026-02-07T13:26:35.019029179-08:00","created_by":"Sam Biggins"}],"comments":[{"id":304,"issue_id":"cap-40u","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 1 minor fixed (BAD_JSON rename), 4 polish fixes (stderr conventions)\nSummary: Clean test addition following existing patterns. Variable renamed for consistency with sibling tests.","created_at":"2026-02-15T21:31:24Z"},{"id":307,"issue_id":"cap-40u","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add missing feedback field validation test to parse-signal.sh\nBefore: Tests existed for missing status, invalid status, and non-array files_changed but not for missing feedback\nAfter: Test 9 validates that JSON missing feedback returns ERROR, completing required-field test coverage\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: fed1e33, cc85ef0\nPush: success","created_at":"2026-02-15T21:39:36Z"}]}
{"id":"cap-4v9","title":"Polish (C4-C8, D2-D4)","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T09:54:00.720138535-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T10:00:53.884921194-08:00","closed_at":"2026-02-08T10:00:53.884921194-08:00","close_reason":"C4-C8: signal validation, bead status check, main-branch flag, combined log, signal log; D2-D4: counter wording, stub guidance, dry-run","dependencies":[{"issue_id":"cap-4v9","depends_on_id":"cap-vwt","type":"blocks","created_at":"2026-02-08T09:54:06.743151588-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-5av","title":"Add acceptance criteria assertion to test-worklog-template.sh [2/5]","description":"Source: cap-8ax.2 criterion 2 evidence audit. Mission Briefing test checks epic/feature/task context but not acceptance criteria. Should assert acceptance criteria appear within the Mission Briefing section.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T13:26:23.960936945-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T12:00:04.946976763-08:00","closed_at":"2026-02-15T12:00:04.946976763-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-5av","depends_on_id":"cap-8ax","type":"blocks","created_at":"2026-02-07T13:26:34.115936015-08:00","created_by":"Sam Biggins"}],"comments":[{"id":300,"issue_id":"cap-5av","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-15T19:58:17Z"},{"id":301,"issue_id":"cap-5av","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add missing acceptance criteria assertion to worklog template test\nBefore: Test 2 verified epic/feature/task context in Mission Briefing but not acceptance criteria\nAfter: Test 2 now also asserts Acceptance Criteria header and content appear in Mission Briefing\n\nFiles: 1 changed (tests/scripts/test-worklog-template.sh)\nFindings: none","created_at":"2026-02-15T20:00:05Z"},{"id":302,"issue_id":"cap-5av","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (0 auto-fixed, 0 to-file), 2 nits (pre-existing patterns)\nSummary: Clean, focused addition of two assertions following established test patterns. Polisher removed two redundant inline comments.","created_at":"2026-02-15T20:02:28Z"},{"id":303,"issue_id":"cap-5av","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add missing acceptance criteria assertion to worklog template test\nBefore: Test 2 verified epic/feature/task context in Mission Briefing but not acceptance criteria\nAfter: Test 2 now also asserts Acceptance Criteria header and content appear in Mission Briefing\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: b11cb3a\nPush: success","created_at":"2026-02-15T20:03:13Z"}]}
{"id":"cap-5gl","title":"Add Given-When-Then comments to config and prompt tests","description":"Discovery Source: cap-9qv.3.2 - Implement prompt Loader and Composer\nDiscovered During: plate phase (maître review)\n\nImpact:\nStyle consistency with BDD conventions used in cmd/ tests. Not blocking.\nUnit tests in internal packages have full coverage but lack G-W-T comments.\n\nContext:\ncmd/capsule/main_test.go uses // Given: // When: // Then: comments.\ninternal/config/config_test.go and internal/prompt/prompt_test.go do not.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-10T05:15:25.237636019-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T05:25:38.833706729-08:00","closed_at":"2026-02-10T05:25:38.833706729-08:00","close_reason":"Added Given-When-Then comments to all config and prompt tests","comments":[{"id":144,"issue_id":"cap-5gl","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixing TestNewLoader oversight)\nIssues: 0 critical, 0 major, 1 minor (fixed), 1 nit (deferred)\nSummary: All G-W-T comments accurate and well-placed. Fixed missing TestNewLoader annotation. Table-driven tests (TestApplyEnv, TestValidate) intentionally skipped — self-documenting via case names.","created_at":"2026-02-10T13:28:21Z"},{"id":145,"issue_id":"cap-5gl","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add BDD-style Given-When-Then comments to match project convention\nBefore: Config and prompt tests had no G-W-T comments (only cmd/ tests had them)\nAfter: All 24 test functions across both files annotated with // Given: // When: // Then:\n\nProblems encountered:\n  - TestNewLoader missed during initial pass: fixed during serve rework\n\nIssues filed: 0\nCommit: 1f43fab (amended from f4445ef)\nPush: success","created_at":"2026-02-10T13:34:33Z"}]}
{"id":"cap-65i","title":"Add actionable failure guidance to pipeline summary","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T16:55:09.902063363-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T16:57:58.758189044-08:00","closed_at":"2026-02-07T16:57:58.758189044-08:00","close_reason":"Closed","comments":[{"id":83,"issue_id":"cap-65i","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 2 nits (2 fixed)\nSummary: Clean implementation threading LAST_FEEDBACK from retry functions through to summary. Thorough failure path coverage, good test with prompt validation mock. Fixed 2 nits: prompt section count text and stale test comment.","created_at":"2026-02-08T01:09:07Z"},{"id":84,"issue_id":"cap-65i","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add actionable failure guidance to pipeline summary so failed runs include concrete next steps\nBefore: Summary agent produced narrative on failure but lacked the specific review feedback that caused the failure\nAfter: LAST_FEEDBACK is bubbled up from retry functions and injected into the summary context, enabling a \"Next Steps\" section with actionable guidance\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: b4dd4ef, 98592bd\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-08T01:12:04Z"}]}
{"id":"cap-6ih","title":"Add Given-When-Then comments to shell test scripts","description":"Discovery Source: cap-8ax.2 - Worktree creation and worklog instantiation\nDiscovered During: plate/maître review\n\nImpact:\nBDD traceability from .feature files to test implementations. Currently a project-wide gap (f-1.1 and f-1.2 tests both lack GWT comments).\n\nContext:\nAdd # Given:, # When:, # Then: comments to each test block in all test scripts under tests/scripts/. This maps feature scenarios to test implementations for maintainability.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T20:43:55.700101106-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T07:17:30.091548382-08:00","closed_at":"2026-02-07T07:17:30.091548382-08:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"cap-6ih","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 blocking (2 nits - both acceptable as-is)\nSummary: GWT comments accurate and consistent across both files. Voice convention properly applied.","created_at":"2026-02-07T15:23:29Z"},{"id":2,"issue_id":"cap-6ih","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Complete GWT coverage across all 8 test scripts\nBefore: 2 scripts (test-template-source-files.sh, test-prep-script.sh) lacked GWT comments\nAfter: All 8 test scripts have complete GWT coverage with consistent voice convention\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: f251a2c, 664cfa8\nPush: success","created_at":"2026-02-07T15:25:43Z"}]}
{"id":"cap-6vp","title":"Robust Task Pipeline","description":"More granular pipeline steps and commands. Configurable phase definitions, pluggable quality gates, advanced retry strategies, and pipeline pause/resume.","acceptance_criteria":"- Phase conditions, per-phase provider overrides, and per-phase timeouts evaluated at runtime\n- Pipeline pause/resume preserves state within a single run (intra-pipeline checkpointing)\n- Retry strategies apply backoff and provider escalation","status":"closed","priority":3,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:07.949184454-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T07:07:50.608510856-08:00","closed_at":"2026-02-13T07:07:50.608510856-08:00","close_reason":"All 3 features closed. Epic quality gate passed: make lint (0 issues), make test-full (12/12 packages OK), make smoke (all smoke tests pass including new TestSmoke_PipelinePause). Acceptance criteria met: (1) Condition/Provider/Timeout wired in executePhase, (2) checkpoint-based pause/resume with SIGUSR1, (3) backoff + provider escalation in retry loop.","dependencies":[{"issue_id":"cap-6vp","depends_on_id":"cap-awd","type":"blocks","created_at":"2026-02-06T08:28:17.520884744-08:00","created_by":"Sam Biggins"}],"comments":[{"id":233,"issue_id":"cap-6vp","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all deferred)\nSummary: Epic wrap-up reviewed — BDD feature files, smoke test, and acceptance docs all correct and consistent. Feature file naming convention (f-4.x vs f-6vp.x) noted as nit but left as-is.","created_at":"2026-02-13T15:11:56Z"},{"id":234,"issue_id":"cap-6vp","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Close epic cap-6vp (Robust Task Pipeline) by completing remaining documentation tasks\nBefore: 3 open tasks (BDD feature files, smoke test), 1 open feature, 1 open epic\nAfter: All tasks closed, acceptance docs created, epic closed with full quality gate\n\nProblems encountered:\n  - CheckpointStore not wired in CLI layer: smoke test omits checkpoint file assertion (documented in acceptance doc)\n  - Feature file naming: originally f-4.x, renamed to f-6vp.x per serve review\n\nIssues filed: 0\n\nCommits: c6021d3, ba5b64f, f5f6cd7, eaf023d, 827c5ce, 29b7ea6\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T15:14:14Z"}]}
{"id":"cap-6vp.1","title":"Configurable phase definitions","description":"Wire the three scaffolded PhaseDefinition fields (Condition, Provider, Timeout) into the RunPipeline execution loop so they take effect at runtime.\n\nFoundation (done in cap-9qv): PhaseDefinition struct, presets, YAML loading/validation, PhaseKind enum.","acceptance_criteria":"- Given a phase with Condition: \"files_match:\u003cglob\u003e\", RunPipeline evaluates the glob against worktree files and skips the phase if no files match\n- Given a phase with Provider: \"\u003cname\u003e\", executePhase uses the named provider instead of the orchestrator's default\n- Given a phase with Timeout: \u003cduration\u003e, executePhase wraps context with context.WithTimeout using the specified duration","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:35.047547633-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T19:45:02.914620506-08:00","closed_at":"2026-02-12T19:45:02.914620506-08:00","close_reason":"All 3 acceptance criteria implemented and tested. Condition evaluation (files_match glob), Provider override (named provider registry), and Timeout (context.WithTimeout) all wired into executePhase. P4 follow-up filed for BDD feature spec.","dependencies":[{"issue_id":"cap-6vp.1","depends_on_id":"cap-6vp","type":"parent-child","created_at":"2026-02-06T08:29:35.049096867-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-6vp.1.1","title":"Wire Condition evaluation in RunPipeline loop","description":"In RunPipeline's phase iteration loop, evaluate PhaseDefinition.Condition before executing the phase. For 'files_match:\u003cglob\u003e', check worktree files and skip the phase (with StatusSkip signal) if no files match. Source: phases.go:41 TODO comment.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:16.198803668-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T17:41:12.874179531-08:00","closed_at":"2026-02-12T17:41:12.874179531-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.1.1","depends_on_id":"cap-6vp.1","type":"parent-child","created_at":"2026-02-11T22:38:16.200577309-08:00","created_by":"Sam Biggins"}],"comments":[{"id":203,"issue_id":"cap-6vp.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire PhaseDefinition.Condition evaluation into RunPipeline loop so phases can be conditionally skipped based on file matching.\nBefore: Condition field existed on PhaseDefinition but was ignored at runtime (TODO comment).\nAfter: Phases with 'files_match:\u003cglob\u003e' conditions are evaluated before execution; non-matching conditions emit PhaseSkipped status and skip the phase. Unrecognized conditions abort the pipeline with PipelineError.\n\nFiles: 3 changed (orchestrator.go, orchestrator_test.go, phases.go)\nFindings: none","created_at":"2026-02-13T01:41:12Z"},{"id":204,"issue_id":"cap-6vp.1.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 blocking (2 minor documented, 1 nit - all addressed or acknowledged)\nSummary: Clean implementation. evaluateCondition well-designed as standalone function. Good test coverage. Minor glob non-recursive limitation documented.","created_at":"2026-02-13T01:44:40Z"},{"id":205,"issue_id":"cap-6vp.1.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire PhaseDefinition.Condition evaluation into RunPipeline loop\nBefore: Condition field existed on PhaseDefinition but was ignored (TODO)\nAfter: Phases with files_match:\u003cglob\u003e conditions are evaluated before execution; non-matching conditions skip with PhaseSkipped status\n\nProblems encountered:\n  - none\n\nIssues filed: 0\nCommit: d285a5b\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T01:46:08Z"}]}
{"id":"cap-6vp.1.2","title":"Wire per-phase Provider override in executePhase","description":"In executePhase, check PhaseDefinition.Provider and use the named provider instead of the orchestrator's default when set. Requires a provider registry or lookup mechanism. Source: phases.go:42 TODO comment.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:17.472765799-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T19:12:12.691783036-08:00","closed_at":"2026-02-12T19:12:12.691783036-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.1.2","depends_on_id":"cap-6vp.1","type":"parent-child","created_at":"2026-02-11T22:38:17.474923473-08:00","created_by":"Sam Biggins"}],"comments":[{"id":206,"issue_id":"cap-6vp.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Enable per-phase provider routing so individual pipeline phases can use different AI providers\nBefore: All phases used the orchestrator's single default provider regardless of PhaseDefinition.Provider field\nAfter: When PhaseDefinition.Provider is set, executePhase resolves the named provider from a registry (WithProviders option); falls back to default when empty; errors on unknown names\n\nFiles: 3 changed (orchestrator.go, phases.go, orchestrator_test.go)\nFindings: runPhasePair also calls executePhase and will inherit provider override behavior via the same resolveProvider path - no additional work needed","created_at":"2026-02-13T03:12:12Z"},{"id":207,"issue_id":"cap-6vp.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 blocking (1 minor - nil map read safe in Go, 1 nit - comment wording)\nSummary: Clean implementation. resolveProvider well-extracted. Good test coverage of all branches. Automatic routing through runPhasePair retry path is a strength.","created_at":"2026-02-13T03:14:32Z"},{"id":208,"issue_id":"cap-6vp.1.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Enable per-phase provider routing so pipeline phases can use different AI providers\nBefore: All phases used the orchestrator's single default provider regardless of PhaseDefinition.Provider field\nAfter: When PhaseDefinition.Provider is set, executePhase resolves the named provider from a registry; falls back to default when empty; errors on unknown names\n\nProblems encountered:\n  - Pre-existing unstaged doc changes blocked git pull: stashed and restored after push\n\nIssues filed: 0\nCommit: 4fdbc1f\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T03:15:54Z"}]}
{"id":"cap-6vp.1.3","title":"Wire per-phase Timeout via context.WithTimeout","description":"In executePhase, when PhaseDefinition.Timeout is set, wrap the phase's context with context.WithTimeout using the specified duration. Source: phases.go:43 TODO comment.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:18.716042423-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T19:37:48.779818007-08:00","closed_at":"2026-02-12T19:37:48.779818007-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.1.3","depends_on_id":"cap-6vp.1","type":"parent-child","created_at":"2026-02-11T22:38:18.718723686-08:00","created_by":"Sam Biggins"}],"comments":[{"id":209,"issue_id":"cap-6vp.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T03:34:50Z"},{"id":210,"issue_id":"cap-6vp.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire per-phase timeout so phases can have time limits enforced via context cancellation\nBefore: PhaseDefinition.Timeout field existed but was unused (TODO comment)\nAfter: executePhase wraps context with context.WithTimeout when Timeout \u003e 0, applies to both Worker/Reviewer and Gate phases\n\nFiles: 3 changed (orchestrator.go, phases.go, orchestrator_test.go)\nFindings: none","created_at":"2026-02-13T03:37:48Z"},{"id":211,"issue_id":"cap-6vp.1.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 blocking (1 nit - negative timeout silently ignored, acceptable)\nSummary: Clean 4-line implementation. Correct defer cancel() pattern. Thorough test coverage across provider and gate phases.","created_at":"2026-02-13T03:41:24Z"},{"id":212,"issue_id":"cap-6vp.1.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire per-phase timeout so phases can have time limits enforced via context cancellation\nBefore: PhaseDefinition.Timeout field existed but was unused (TODO comment)\nAfter: executePhase wraps context with context.WithTimeout when Timeout \u003e 0, applies to all phase kinds\n\nProblems encountered:\n  - none\n\nIssues filed: 0\nCommit: ff17d8c\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T03:42:19Z"}]}
{"id":"cap-6vp.1.4","title":"Add BDD feature file for configurable phase definitions","description":"Discovery Source: cap-6vp.1.3 - Wire per-phase Timeout via context.WithTimeout\nDiscovered During: plate/maître review\n\nImpact:\nDocumentation gap. The feature has thorough unit test coverage (17 tests across\norchestrator_test.go and phases_load_test.go) but lacks a Gherkin .feature file\nin tests/features/.\n\nContext:\nCreate tests/features/f-4.1-configurable-phase-definitions.feature with scenarios\nfor the three acceptance criteria: Condition evaluation, Provider override, Timeout.\nUnit tests pass all criteria; this is for BDD traceability only.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T19:44:57.31090293-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T06:55:50.326911437-08:00","closed_at":"2026-02-13T06:55:50.326911437-08:00","close_reason":"BDD feature file created at tests/features/f-4.1-configurable-phase-definitions.feature with 6 scenarios covering all 3 acceptance criteria","dependencies":[{"issue_id":"cap-6vp.1.4","depends_on_id":"cap-6vp.1","type":"parent-child","created_at":"2026-02-12T19:44:57.31291043-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-6vp.2","title":"Pipeline pause and resume","description":"Enable pipeline-level state checkpointing so a single pipeline run can pause and resume from the last completed phase, not just campaign-level task resume.\n\nFoundation (done in cap-9qv): Campaign-level resume via FileStore, CampaignPaused constant, Pipeline.Checkpoint config field, SkipPhases infrastructure.","acceptance_criteria":"- Given Pipeline.Checkpoint: true in config, pipeline state (completed phases and their signals) is saved after each phase completes\n- Given a paused/interrupted pipeline with checkpoint data, RunPipeline resumes from the last completed phase using SkipPhases\n- A pause trigger (signal or command) sets CampaignPaused status, saves state, and exits cleanly","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:35.103729975-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T07:06:57.105360763-08:00","closed_at":"2026-02-13T07:06:57.105360763-08:00","close_reason":"All 5 children closed. Acceptance criteria verified: checkpoint saves after each phase (17 orchestrator tests), resume from last completed phase (5 resume tests), SIGUSR1 pause trigger with exit code 3 (6 pause tests + 1 smoke test). Acceptance doc at docs/features/cap-6vp.2-acceptance.md.","dependencies":[{"issue_id":"cap-6vp.2","depends_on_id":"cap-6vp","type":"parent-child","created_at":"2026-02-06T08:29:35.105575947-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-6vp.2.1","title":"Wire Pipeline.Checkpoint — save phase results after each phase","description":"When Pipeline.Checkpoint is true in config, save pipeline state (completed phases and their signals) to the FileStore after each phase completes. Source: config.go:37 Pipeline.Checkpoint field.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:19.404313531-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T19:55:59.337604161-08:00","closed_at":"2026-02-12T19:55:59.337604161-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.2.1","depends_on_id":"cap-6vp.2","type":"parent-child","created_at":"2026-02-11T22:38:19.406139156-08:00","created_by":"Sam Biggins"}],"comments":[{"id":213,"issue_id":"cap-6vp.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Enable intra-pipeline state checkpointing so partial results survive interruptions and can support pause/resume\nBefore: Pipeline ran phases sequentially but had no way to persist intermediate state between phases\nAfter: When a CheckpointStore is wired, phase results are saved after each phase completion (PASS, SKIP, or ERROR), enabling future resume from checkpoint\n\nFiles: 4 changed (2 new)\nFindings: None","created_at":"2026-02-13T03:55:59Z"},{"id":214,"issue_id":"cap-6vp.2.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED (after fixing 1 major issue)\nIssues: 1 major (fixed), 2 minor (noted), 2 nits\nSummary: Well-structured checkpoint implementation following codebase patterns. Fixed PhaseResult JSON tags for consistent serialization. Minor notes about checkpoint cleanup (caller responsibility) and execution-error coverage are acceptable design choices.","created_at":"2026-02-13T03:59:41Z"},{"id":215,"issue_id":"cap-6vp.2.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Enable intra-pipeline state checkpointing for pause/resume support\nBefore: Pipeline ran phases sequentially but had no way to persist intermediate state\nAfter: When CheckpointStore is wired, phase results are saved after each phase completion (PASS, SKIP, or ERROR)\n\nProblems encountered:\n  - PhaseResult lacked JSON tags for consistent serialization (fixed during serve)\n\nIssues filed: 0\nIssues closed: 1 (cap-6vp.2.1)\n\nCommit: 7e9ac62\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T04:00:53Z"}]}
{"id":"cap-6vp.2.2","title":"Populate SkipPhases from checkpoint data on pipeline resume","description":"On pipeline resume, read checkpoint data from FileStore and populate the SkipPhases set so RunPipeline skips already-completed phases. Source: orchestrator.go:55 SkipPhases field.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:20.08974347-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:16:47.715787766-08:00","closed_at":"2026-02-12T20:16:47.715787766-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.2.2","depends_on_id":"cap-6vp.2","type":"parent-child","created_at":"2026-02-11T22:38:20.091883183-08:00","created_by":"Sam Biggins"}],"comments":[{"id":216,"issue_id":"cap-6vp.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Enable pipeline resume by auto-loading checkpoint data to skip already-completed phases\nBefore: RunPipeline only skipped phases from explicit input.SkipPhases — callers had to manually build skip lists\nAfter: RunPipeline automatically loads checkpoint from CheckpointStore, skips PASS/SKIP phases, re-runs ERROR/NEEDS_WORK phases\n\nFiles: 2 changed (orchestrator.go, orchestrator_test.go)\nFindings: none","created_at":"2026-02-13T04:16:47Z"},{"id":217,"issue_id":"cap-6vp.2.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking (2 nits - silent error swallowing, progress string on resume)\nSummary: Clean 7-line implementation. Correct PASS/SKIP filtering logic. Thorough 6-test coverage of all status permutations. Consistent best-effort error handling pattern. Polisher extracted threePhases() helper to reduce duplication.","created_at":"2026-02-13T04:21:03Z"},{"id":218,"issue_id":"cap-6vp.2.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Enable pipeline resume by auto-loading checkpoint data to skip already-completed phases\nBefore: RunPipeline only skipped phases from explicit input.SkipPhases — callers had to manually build skip lists\nAfter: RunPipeline automatically loads checkpoint from CheckpointStore, skips PASS/SKIP phases, re-runs ERROR/NEEDS_WORK phases\n\nProblems encountered:\n  - none\n\nIssues filed: 0\nIssues closed: 1 (cap-6vp.2.2)\n\nCommit: 3982647\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T04:22:09Z"}]}
{"id":"cap-6vp.2.3","title":"Implement pipeline pause trigger","description":"Implement a pause trigger (OS signal or explicit command) that sets CampaignPaused status, saves current pipeline state via checkpoint, and exits cleanly. Source: campaign.go:78 CampaignPaused constant.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:20.825218049-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:53:24.148037097-08:00","closed_at":"2026-02-12T20:53:24.148037097-08:00","close_reason":"Implemented pause trigger via SIGUSR1 with atomic.Bool + WithPauseRequested option","dependencies":[{"issue_id":"cap-6vp.2.3","depends_on_id":"cap-6vp.2","type":"parent-child","created_at":"2026-02-11T22:38:20.827128878-08:00","created_by":"Sam Biggins"}],"comments":[{"id":219,"issue_id":"cap-6vp.2.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 3 nits (signal goroutine leak on exit, duplicate handler setup, exit code docs)\nSummary: Clean, well-layered pause trigger. func() bool injection keeps signal concerns out of orchestrator. Campaign pause correctly sets TaskPending (not TaskFailed) for proper resume. 6+2+3 tests cover all paths. Polisher renamed 3 counter variables for clarity.","created_at":"2026-02-13T04:58:33Z"},{"id":220,"issue_id":"cap-6vp.2.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add graceful pipeline pause via SIGUSR1 signal\nBefore: Pipeline had no way to pause between phases — only abort (Ctrl+C) or full completion\nAfter: SIGUSR1 pauses pipeline between phases, saves checkpoint, exits code 3. Resume re-runs from checkpoint.\n\nProblems encountered:\n  - 3 serve nits (goroutine leak, duplicate setup, missing docs): all fixed in follow-up commit\n\nIssues filed: 0\nIssues closed: 1 (cap-6vp.2.3)\n\nCommits: 9bbbfcc, 6d2b022\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T05:10:48Z"}]}
{"id":"cap-6vp.2.4","title":"Add BDD feature tests for pipeline pause and resume","description":"Discovery Source: cap-6vp.3.2 - Maitre review during plate readiness check\nDiscovered During: plate phase assessment\n\nImpact:\nFeature cap-6vp.2 has comprehensive unit tests but lacks BDD/integration tests\nthat validate user-observable behavior through the wired system.\n\nRequired:\n- Add TestFeature_PipelinePauseResume in cmd/capsule/main_test.go\n  - Pause via WithPauseRequested, verify ErrPipelinePaused\n  - Checkpoint save verified (file on disk or mock store)\n  - Resume: verify skipped phases\n- Follow existing TestFeature_* pattern (e.g. TestFeature_OrchestratorWiring)\n- Optionally add integration test wiring CheckpointFileStore into orchestrator","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T23:33:44.114525836-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T06:57:45.580905122-08:00","closed_at":"2026-02-13T06:57:45.580905122-08:00","close_reason":"BDD feature file created at tests/features/f-4.2-pipeline-pause-resume.feature with 11 scenarios. Existing unit tests (17 orchestrator + 3 cmd) already cover all acceptance criteria; no additional integration tests needed.","dependencies":[{"issue_id":"cap-6vp.2.4","depends_on_id":"cap-6vp.2","type":"parent-child","created_at":"2026-02-12T23:33:44.116420129-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-6vp.2.5","title":"Add smoke test for SIGUSR1 pipeline pause trigger","description":"Discovery Source: cap-6vp.3.2 - Maitre review during plate readiness check\nDiscovered During: plate phase assessment\n\nImpact:\nThe SIGUSR1 -\u003e atomic.Bool -\u003e func() bool -\u003e ErrPipelinePaused -\u003e exit code 3\nchain has no end-to-end smoke test. This is a user-facing feature.\n\nRequired:\n- Add smoke test in cmd/capsule/smoke_test.go\n- Build binary, start pipeline (with mock/fast provider)\n- Send SIGUSR1, verify exit code 3\n- Verify checkpoint file exists on disk","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T23:33:48.093986582-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T07:02:45.071209319-08:00","closed_at":"2026-02-13T07:02:45.071209319-08:00","close_reason":"Smoke test added as TestSmoke_PipelinePause in cmd/capsule/smoke_test.go. Verifies SIGUSR1→exit code 3 and 'Pipeline paused' message. Checkpoint file assertion skipped: WithCheckpointStore not yet wired in CLI layer.","dependencies":[{"issue_id":"cap-6vp.2.5","depends_on_id":"cap-6vp.2","type":"parent-child","created_at":"2026-02-12T23:33:48.095916334-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-6vp.3","title":"Advanced retry strategies","description":"Wire the advanced retry fields (BackoffFactor, EscalateProvider) into the retry loop and unify retry configuration through ResolveRetryStrategy.\n\nFoundation (done in cap-9qv): RetryStrategy struct, ResolveRetryStrategy method, per-phase MaxRetries, RetryTarget, feedback propagation.","acceptance_criteria":"- runPhasePair uses ResolveRetryStrategy instead of reading MaxRetries directly, unifying the retry config path\n- Given BackoffFactor \u003e 1.0, each retry attempt multiplies the effective timeout by BackoffFactor^(attempt-1)\n- Given EscalateProvider and EscalateAfter, after N failed attempts the retry loop switches to the escalation provider","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:35.158889942-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T06:21:41.117605464-08:00","closed_at":"2026-02-13T06:21:41.117605464-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.3","depends_on_id":"cap-6vp","type":"parent-child","created_at":"2026-02-06T08:29:35.160683718-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-6vp.3.1","title":"Wire ResolveRetryStrategy into runPhasePair","description":"Replace direct MaxRetries reads in runPhasePair with ResolveRetryStrategy, unifying all retry configuration into a single code path. Source: orchestrator.go:102 TODO comment, orchestrator.go:481 ResolveRetryStrategy method.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:21.519572223-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T22:19:07.54152991-08:00","closed_at":"2026-02-12T22:19:07.54152991-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.3.1","depends_on_id":"cap-6vp.3","type":"parent-child","created_at":"2026-02-11T22:38:21.52159901-08:00","created_by":"Sam Biggins"}],"comments":[{"id":221,"issue_id":"cap-6vp.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T06:15:21Z"},{"id":222,"issue_id":"cap-6vp.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Unify retry configuration in runPhasePair through ResolveRetryStrategy\nBefore: runPhasePair read reviewer.MaxRetries directly, ignoring pipeline-level retryDefaults when phase MaxRetries was 0\nAfter: runPhasePair calls ResolveRetryStrategy to resolve effective MaxAttempts, respecting both phase-level overrides and pipeline defaults\n\nFiles: 2 changed (orchestrator.go, orchestrator_test.go)\nFindings: none","created_at":"2026-02-13T06:19:07Z"},{"id":223,"issue_id":"cap-6vp.3.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking (2 nits - RunPipeline MaxRetry inconsistency, exported ResolveRetryStrategy)\nSummary: Clean, focused change. Correctly replaces direct reviewer.MaxRetries reads with unified ResolveRetryStrategy resolution. Two well-structured tests verify fallback-to-defaults and phase-override behaviors. Polisher collapsed two-line strategy resolution into single line and fixed test name grammar.","created_at":"2026-02-13T06:23:36Z"},{"id":224,"issue_id":"cap-6vp.3.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Unify retry configuration in runPhasePair through ResolveRetryStrategy\nBefore: runPhasePair read reviewer.MaxRetries directly, ignoring pipeline-level retryDefaults when phase MaxRetries was 0\nAfter: runPhasePair calls ResolveRetryStrategy to resolve effective MaxAttempts, respecting both phase-level overrides and pipeline defaults\n\nProblems encountered:\n  - none\n\nIssues filed: 0\nIssues closed: 1 (cap-6vp.3.1)\n\nCommit: 0bf3df4\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T06:24:37Z"}]}
{"id":"cap-6vp.3.2","title":"Apply BackoffFactor as timeout multiplier per retry","description":"In the retry loop, when BackoffFactor \u003e 1.0, multiply the effective timeout by BackoffFactor^(attempt-1) for each retry attempt. Source: orchestrator.go:105 TODO comment.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:22.279227105-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T23:25:03.951756543-08:00","closed_at":"2026-02-12T23:25:03.951756543-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.3.2","depends_on_id":"cap-6vp.3","type":"parent-child","created_at":"2026-02-11T22:38:22.281189423-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-6vp.3.2","depends_on_id":"cap-6vp.3.1","type":"blocks","created_at":"2026-02-11T22:39:12.724627562-08:00","created_by":"Sam Biggins"}],"comments":[{"id":225,"issue_id":"cap-6vp.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T07:18:43Z"},{"id":226,"issue_id":"cap-6vp.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Apply BackoffFactor as timeout multiplier per retry attempt\nBefore: BackoffFactor field existed in RetryStrategy but was unused (TODO)\nAfter: Each retry attempt multiplies phase timeout by BackoffFactor^(attempt-1)\n\nFiles: 2 changed (orchestrator.go, orchestrator_test.go)\nFindings: none","created_at":"2026-02-13T07:25:04Z"},{"id":227,"issue_id":"cap-6vp.3.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (2 nits, observational only)\nSummary: Clean, well-scoped implementation. Value-type copies correct, tests comprehensive, guard clause efficient.","created_at":"2026-02-13T07:29:00Z"},{"id":228,"issue_id":"cap-6vp.3.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Apply BackoffFactor as timeout multiplier per retry attempt\nBefore: BackoffFactor field in RetryStrategy was unused (TODO)\nAfter: Each retry multiplies phase timeout by BackoffFactor^(attempt-1)\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: 0acc08e\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T07:30:10Z"}]}
{"id":"cap-6vp.3.3","title":"Wire EscalateProvider switching after N attempts","description":"In the retry loop, when EscalateProvider is set and attempt count exceeds EscalateAfter, switch to the escalation provider for subsequent attempts. Depends on per-phase provider override (cap-6vp.1.2). Source: orchestrator.go:106 TODO comment.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:38:23.051629938-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T06:10:38.800969833-08:00","closed_at":"2026-02-13T06:10:38.800969833-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-6vp.3.3","depends_on_id":"cap-6vp.3","type":"parent-child","created_at":"2026-02-11T22:38:23.053415816-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-6vp.3.3","depends_on_id":"cap-6vp.3.1","type":"blocks","created_at":"2026-02-11T22:39:13.806211846-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-6vp.3.3","depends_on_id":"cap-6vp.1.2","type":"blocks","created_at":"2026-02-11T22:39:14.605199705-08:00","created_by":"Sam Biggins"}],"comments":[{"id":229,"issue_id":"cap-6vp.3.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T14:07:04Z"},{"id":230,"issue_id":"cap-6vp.3.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire escalation provider switching so retries can automatically use a more capable provider after N failed attempts.\nBefore: EscalateProvider and EscalateAfter fields existed in RetryStrategy but were ignored (TODO comment).\nAfter: runPhasePair checks escalation conditions on each retry attempt and overrides both worker and reviewer Provider fields when attempt \u003e EscalateAfter.\n\nFiles: 2 changed (orchestrator.go, orchestrator_test.go)\nFindings: None - config→orchestrator wiring of retry defaults is not yet done in main.go (separate scope)","created_at":"2026-02-13T14:10:38Z"},{"id":231,"issue_id":"cap-6vp.3.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (2 nits noted)\nSummary: Escalation logic correctly implemented with clean integration into retry loop. Per-iteration copies prevent state leakage. Defensive provider validation. Well-structured tests cover happy path, no-op, and error cases.","created_at":"2026-02-13T14:14:10Z"},{"id":232,"issue_id":"cap-6vp.3.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire escalation provider switching so retries automatically use a more capable provider after N failed attempts.\nBefore: EscalateProvider and EscalateAfter fields existed in RetryStrategy but were ignored (TODO comment).\nAfter: runPhasePair checks escalation conditions on each retry attempt and overrides both worker and reviewer Provider fields when attempt \u003e EscalateAfter.\n\nProblems encountered:\n  - Pre-existing unstaged docs/planning changes blocked git pull: stashed, pushed, popped.\n\nIssues filed: 0\n\nCommit: bd8463d\nPush: success (origin/epic/cap-6vp)","created_at":"2026-02-13T14:15:40Z"}]}
{"id":"cap-7az","title":"Config extension: Pipeline and Campaign sections","description":"Add Pipeline and Campaign config sections. Follows existing patterns: pointer-based rawConfig, KnownFields(true), Validate() after assembly.","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:29.695754138-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:01:53.791105184-08:00","closed_at":"2026-02-11T16:01:53.791105184-08:00","close_reason":"Closed"}
{"id":"cap-7y0","title":"Create smoke tests for user-facing scripts","description":"Discovery Source: cap-8ax.2 - Worktree creation and worklog instantiation\nDiscovered During: plate/maître review\n\nImpact:\nFast critical-path checks for prep.sh and setup-template.sh. Smoke tests are minimal happy-path validation suitable as pipeline gates.\n\nContext:\nCreate tests/scripts/smoke-prep.sh (and smoke-setup.sh) that exercise the happy path end-to-end in a single pass: create project, run prep, verify worktree + worklog + branch exist, exit. Target under 10 seconds.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T20:43:58.575071231-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T15:04:40.438340991-08:00","closed_at":"2026-02-14T15:04:40.438340991-08:00","close_reason":"Closed","comments":[{"id":289,"issue_id":"cap-7y0","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T23:02:09Z"},{"id":290,"issue_id":"cap-7y0","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add minimal happy-path smoke tests for prep.sh and setup-template.sh as pipeline gates\nBefore: No fast smoke tests existed for user-facing scripts\nAfter: Two smoke tests (smoke-setup.sh, smoke-prep.sh) validate critical paths in under 5 seconds each\n\nFiles: 2 added\nFindings: Worklog template interpolation broken — template uses Go-style {{.TaskTitle}} but prep.sh envsubst expects {{TASK_TITLE}}. Pre-existing bug (test-prep-script.sh also fails on content checks). Should file as bug.","created_at":"2026-02-14T23:04:40Z"},{"id":291,"issue_id":"cap-7y0","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 1 nit (stale envsubst refs in docs - follow-up)\nSummary: All previous review issues addressed. POSIX-compatible awk renderer correctly handles same-line {{end}}{{if}}, no gawk dependency.","created_at":"2026-02-14T23:22:28Z"}]}
{"id":"cap-86m","title":"Retrospective","status":"closed","priority":4,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-07T07:08:33.394237917-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T07:24:55.370675698-08:00","closed_at":"2026-02-07T07:24:55.370675698-08:00","close_reason":"All children completed"}
{"id":"cap-86m.1","title":"Add GWT comments to test-template-source-files.sh and test-prep-script.sh","description":"Discovery Source: cap-rkw - Add GWT comments to test scripts\nDiscovered During: serve phase\n\nImpact:\nMinor consistency gap. 2 of 8 test scripts still lack GWT comments.\nNot blocking any functionality.\n\nContext:\ntest-template-source-files.sh (10 tests) and test-prep-script.sh (9 tests)\nare the only remaining scripts without Given-When-Then BDD comments.\nAll other 6 scripts now have complete GWT coverage.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T07:08:46.184582864-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T07:17:36.23479394-08:00","closed_at":"2026-02-07T07:17:36.23479394-08:00","close_reason":"Completed as part of cap-6ih","dependencies":[{"issue_id":"cap-86m.1","depends_on_id":"cap-86m","type":"parent-child","created_at":"2026-02-07T07:08:46.187724087-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-88m","title":"Actionable error handling for pipeline scripts","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T22:40:32.990170473-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T22:43:42.776994725-08:00","closed_at":"2026-02-08T22:43:42.776994725-08:00","close_reason":"Closed","comments":[{"id":130,"issue_id":"cap-88m","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: needs_changes (fixed)\nIssues: 3 found (3 auto-fixed, 0 to-file)\nSummary: Review found teardown.sh arg mismatch, wrong output dir search, and missing checkout step. All fixed in follow-up commit.","created_at":"2026-02-09T14:00:55Z"},{"id":131,"issue_id":"cap-88m","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Make pipeline script errors actionable with copy-pasteable fix commands\nBefore: ERROR messages said what went wrong but not how to fix it\nAfter: Every error includes a \"To fix:\" block; --clean flag handles the most common case\n\nProblems encountered:\n  - teardown.sh suggestion had wrong interface (bead-id arg not supported): fixed in review\n  - Phase output diagnostic searched wrong directory: fixed in review\n  - Merge fix hint missing checkout step: fixed in review\n\nIssues filed: 0\n\nCommits: d0c418b, 1484022\nPush: success (origin/capsule-9qv)","created_at":"2026-02-09T14:24:11Z"}]}
{"id":"cap-89u","title":"Data handling reference + worklog quality (B1, B2)","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T09:54:00.53696394-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T09:55:59.019983518-08:00","closed_at":"2026-02-08T09:55:59.019983518-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-89u","depends_on_id":"cap-vwt","type":"blocks","created_at":"2026-02-08T09:54:06.533340581-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-8ax","title":"Tracer Bullet: Scripts \u0026 Direct Claude CLI","description":"Prove the headless claude workflow end-to-end using shell scripts, template beads, and direct claude -p invocations. No Go code. Output: working scripts, captured commands, proven prompt pairs.","acceptance_criteria":"Full pipeline runs on template project without manual intervention; Tests are created, implementation passes all tests; Only implementation files merged to main; Worklog archived to .capsule/logs/; Pipeline is idempotent","status":"closed","priority":0,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:27:59.21201792-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T15:20:42.27119253-08:00","closed_at":"2026-02-07T15:20:42.27119253-08:00","close_reason":"All 6 features complete: template project, worktree/worklog prep, test-writer/review, execute/review, sign-off/merge, pipeline orchestration + docs","comments":[{"id":61,"issue_id":"cap-8ax","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all acceptable as-is)\nSummary: All 4 acceptance reports verified against bead titles and GWT criteria. 5 audit fixes confirmed correct. Titles match exactly. No dropped clauses. Polisher refined wording and test script ordering for consistency with exemplar. Reports have strong evidence linking (test:case numbers) and honest limitations.","created_at":"2026-02-07T20:00:59Z"},{"id":62,"issue_id":"cap-8ax","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Audit acceptance reports (cap-8ax.1-4) against actual bead acceptance criteria and fix dropped content\nBefore: Reports had 5 discrepancies — 3 titles missing words, 2 criteria missing clauses\nAfter: All 4 reports match bead titles exactly, all GWT criteria fully covered, polished for consistency with exemplar\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: fbd564d\nPush: success","created_at":"2026-02-07T20:02:06Z"},{"id":63,"issue_id":"cap-8ax","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 2 nits (acceptable as-is)\nSummary: All 5 evidence citation fixes verified correct against actual test code. 4 new acceptance reports follow established template consistently. CHANGELOG updated to epic-level user-facing summary. Range notation conventions are semantically justified (.. for contiguous, comma for cherry-picked).","created_at":"2026-02-07T21:34:16Z"},{"id":64,"issue_id":"cap-8ax","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Audit evidence quality in acceptance reports — verify every [N/M] citation references a test that actually tests the criterion's claim\nBefore: 5 evidence citations were wrong/weak/vague across cap-8ax.1-5 acceptance reports\nAfter: All citations verified correct against actual test code; 4 test coverage gap beads filed\n\nProblems encountered:\n  - bd create --parent=cap-8ax failed with UNIQUE constraint (ID generation collision) — worked around by creating without parent and adding dependency manually\n\nIssues filed: 4\n  - cap-dgw (P4): Add .beads/ directory assertion to test-setup-template.sh\n  - cap-fo4 (P3): Add acceptance criteria check to test-setup-template.sh [4/7]\n  - cap-5av (P3): Add acceptance criteria assertion to test-worklog-template.sh [2/5]\n  - cap-40u (P4): Add feedback field validation to test-parse-signal.sh\n\nCommits: 8c261a0, 815c660\nPush: success","created_at":"2026-02-07T21:40:46Z"},{"id":95,"issue_id":"cap-8ax","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: Clean 7-part plan execution. All references updated consistently across 33 files. Tests pass (98/98 across 6 test suites). Two cosmetic nits noted but no changes required.","created_at":"2026-02-08T20:11:01Z"},{"id":96,"issue_id":"cap-8ax","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Improve demo templates for consistency, cross-tool compatibility, and documentation\nBefore: Templates named demo-capsule/demo-simple with CLAUDE.md, inconsistent schemas, missing tests/docs\nAfter: Templates renamed to demo-brownfield/demo-greenfield with AGENTS.md, schema parity, full test coverage, documented manifest\n\nProblems encountered:\n  - test-setup-template.sh deterministic test flaky on first run: confirmed flaky (bd daemon timing), passes on rerun\n  - test-template-source-files.sh E4 pre-existing false positive: shebang matches /usr/ grep pattern\n\nIssues filed:\n  - cap-3ac: Fix test-template-source-files.sh E4 false positive on shebang [P3]\n\nCommits: 0d04e22, 49bab71\nPush: success (origin/main)","created_at":"2026-02-08T20:49:25Z"}]}
{"id":"cap-8ax.1","title":"Reusable template project with bead fixtures","description":"As a capsule developer, I want a template project with pre-built beads so that I can repeatedly test the pipeline against a known starting state.","acceptance_criteria":"Given a clean directory, When setup-template.sh runs, Then a git repo exists with source files, CLAUDE.md, and .beads/ initialized; Given the template repo, When bd ready runs, Then at least one task bead is available to work; Given the template beads, When bd show \u003ctask-id\u003e runs, Then the bead has title, description, acceptance criteria, and parent feature/epic; Given multiple test runs, When setup-template.sh runs each time, Then the starting state is identical (deterministic)","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:48.583827856-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T18:22:00.651915291-08:00","closed_at":"2026-02-06T18:22:00.651915291-08:00","close_reason":"All 3 children completed. BDD acceptance criteria validated: setup script creates git repo with template files and beads, bd ready/show work, deterministic state confirmed.","dependencies":[{"issue_id":"cap-8ax.1","depends_on_id":"cap-8ax","type":"parent-child","created_at":"2026-02-06T08:28:48.58559356-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-8ax.1.1","title":"Create template project source files and CLAUDE.md","description":"Create templates/demo-capsule/ with: src/ with a simple Go module (main.go, go.mod) that has a clear feature gap for the test bead to fill, CLAUDE.md documenting the project structure and conventions, README.md with project description. Tests: validate files exist, go build succeeds on template. Deliverable: templates/demo-capsule/ with buildable Go project","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:51.277874165-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T16:47:04.01557824-08:00","closed_at":"2026-02-06T16:47:04.01557824-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.1.1","depends_on_id":"cap-8ax.1","type":"parent-child","created_at":"2026-02-06T08:29:51.279600593-08:00","created_by":"Sam Biggins"}],"comments":[{"id":3,"issue_id":"cap-8ax.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T00:42:59Z"},{"id":4,"issue_id":"cap-8ax.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the reusable template project that serves as the test subject for pipeline E2E testing\nBefore: No template project existed; pipeline had nothing to operate on\nAfter: templates/demo-capsule/ contains a buildable Go project with Contact type, FEATURE_GAP markers for validation functions, CLAUDE.md, and README.md\n\nFiles: 5 changed (go.mod, main.go, CLAUDE.md, README.md, test script)\nFindings: none","created_at":"2026-02-07T00:47:12Z"},{"id":5,"issue_id":"cap-8ax.1.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 found (3 nits, no action needed)\nSummary: Clean implementation aligned with TDD spec. All 6 test cases + 4 edge cases covered. Feature gap design well-suited for sibling task.","created_at":"2026-02-07T00:48:53Z"},{"id":6,"issue_id":"cap-8ax.1.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create template project as reusable test subject for pipeline E2E testing\nBefore: No template project; pipeline had nothing to operate on\nAfter: templates/demo-capsule/ with buildable Go module, FEATURE_GAP markers, and full docs\n\nProblems encountered:\n  - Arithmetic under set -e in test script: fixed by using PASS=$((PASS + 1)) syntax\n  - go build left binary artifact: fixed by building to temp dir\n\nIssues filed: 0\nCommit: a71c192\nPush: skipped (no remote)","created_at":"2026-02-07T00:49:43Z"}]}
{"id":"cap-8ax.1.2","title":"Create template bead fixtures (JSONL)","description":"Create templates/demo-capsule/issues.jsonl with hierarchy: 1 epic: Demo Capsule Feature Set, 1 feature: Add input validation (under epic), 2 tasks: Validate email format, Validate phone format (under feature, with acceptance criteria in descriptions). Each bead has: id, title, description with acceptance criteria, type, priority, dependencies. Tests: JSONL parses correctly, bd import succeeds, hierarchy valid. Deliverable: issues.jsonl with 4 beads in epic→feature→task hierarchy","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:51.335308489-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T16:59:00.519602127-08:00","closed_at":"2026-02-06T16:59:00.519602127-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.1.2","depends_on_id":"cap-8ax.1","type":"parent-child","created_at":"2026-02-06T08:29:51.337510633-08:00","created_by":"Sam Biggins"}],"comments":[{"id":7,"issue_id":"cap-8ax.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T00:55:47Z"},{"id":8,"issue_id":"cap-8ax.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create template bead fixtures so the pipeline has a known starting state to test against\nBefore: Template project had source files but no beads to define work items\nAfter: issues.jsonl with 4 beads (epic→feature→2 tasks) ready for bd import, with acceptance criteria in task descriptions\n\nFiles: 2 changed (issues.jsonl, test-fixtures.sh)\nFindings: none","created_at":"2026-02-07T00:59:08Z"},{"id":9,"issue_id":"cap-8ax.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major, 3 minor (1 auto-fixed), 3 nits (deferred)\nSummary: Well-structured JSONL fixtures with correct hierarchy and thorough test coverage. Fixed git config for CI portability. Minor nits (test numbering, helper order) deferred as cosmetic.","created_at":"2026-02-07T01:01:06Z"},{"id":10,"issue_id":"cap-8ax.1.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create template bead fixtures so the pipeline has a known starting state to test against\nBefore: Template project had source files but no beads to define work items\nAfter: issues.jsonl with 4 beads (epic→feature→2 tasks) ready for bd import\n\nProblems encountered:\n  - Positional jq indexing: fixed to id-based lookups after taster review\n  - Subshell counter bug: fixed by avoiding subshell for verification block\n\nIssues filed: 0\nCommit: a477f1e\nPush: success","created_at":"2026-02-07T01:56:35Z"}]}
{"id":"cap-8ax.1.3","title":"Create setup-template.sh initialization script","description":"Script that creates a fresh test environment: 1. Create temp dir (or accept target dir arg), 2. git init, initial commit, 3. Copy template source files, 4. bd init --prefix=cap, 5. bd import -i issues.jsonl, 6. bd dep add (wire dependencies), 7. git add \u0026\u0026 git commit. Error handling: fail fast with clear messages on any step failure. Tests: run script, verify git log, verify bd ready output. Depends on: t-1.1.1, t-1.1.2. Deliverable: scripts/setup-template.sh that creates deterministic test environment","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:51.397919411-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T18:14:52.143225694-08:00","closed_at":"2026-02-06T18:14:52.143225694-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.1.3","depends_on_id":"cap-8ax.1","type":"parent-child","created_at":"2026-02-06T08:29:51.399566544-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.1.3","depends_on_id":"cap-8ax.1.1","type":"blocks","created_at":"2026-02-06T08:32:04.892770486-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.1.3","depends_on_id":"cap-8ax.1.2","type":"blocks","created_at":"2026-02-06T08:32:04.958234567-08:00","created_by":"Sam Biggins"}],"comments":[{"id":11,"issue_id":"cap-8ax.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create setup-template.sh that produces a deterministic test environment from the demo-capsule template\nBefore: Template files and bead fixtures existed but no automation to create a fresh project from them\nAfter: scripts/setup-template.sh creates a git repo with template files and imported beads; bd ready lists 2 task beads\n\nFiles: 2 changed (1 new script, 1 new test)\nFindings: Pre-existing E4 failure in test-template-source-files.sh (test-fixtures.sh references /tmp/) — not related to this task","created_at":"2026-02-07T02:15:00Z"},{"id":12,"issue_id":"cap-8ax.1.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 0 critical, 1 major (fixed), 2 minor (fixed), 2 nits (deferred)\nSummary: Well-structured scripts following codebase patterns. Fixed temp dir cleanup leak, PATH regex safety, and pre-existing git repo guard. All tests pass.","created_at":"2026-02-07T02:17:30Z"},{"id":13,"issue_id":"cap-8ax.1.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create setup-template.sh that produces a deterministic test environment from the demo-capsule template\nBefore: Template files and bead fixtures existed but no automation to assemble them into a working project\nAfter: scripts/setup-template.sh creates git repo with template files and imported beads; bd ready lists 2 task beads\n\nProblems encountered:\n  - bd init writes to stdout: fixed by redirecting to /dev/null\n  - Taster: fragile FAKE_PATH approach: replaced with PATH filtering\n  - Sous-chef: temp dir cleanup leak: fixed with array-based trap\n\nIssues filed:\n  - cap-lbj: Fix hardcoded /tmp/ reference in test-fixtures.sh [P4]\n\nCommit: bb79431\nPush: success","created_at":"2026-02-07T02:18:39Z"}]}
{"id":"cap-8ax.2","title":"Worktree creation and worklog instantiation from bead template","description":"As a pipeline orchestrator, I want a prep script that creates an isolated worktree and instantiates a worklog from the bead context so that each phase has full context and a shared log.","acceptance_criteria":"Given a template project with beads, When prep.sh \u003cbead-id\u003e runs, Then a git worktree exists at .capsule/worktrees/\u003cbead-id\u003e/; Given the worktree, When cat worklog.md runs, Then the worklog contains Mission Briefing with epic/feature/task context and acceptance criteria; Given the worktree, When git branch runs, Then the branch is named capsule-\u003cbead-id\u003e; Given the worklog template, When instantiated for different beads, Then each worklog has bead-specific content (not generic)","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:48.639383289-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T20:44:03.975328985-08:00","closed_at":"2026-02-06T20:44:03.975328985-08:00","close_reason":"All children complete (cap-8ax.2.1 + cap-8ax.2.2). Feature delivers prep.sh with worktree creation and worklog instantiation. 28 tests passing.","dependencies":[{"issue_id":"cap-8ax.2","depends_on_id":"cap-8ax","type":"parent-child","created_at":"2026-02-06T08:28:48.641030149-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-8ax.2.1","title":"Create worklog.md template with bead interpolation","description":"Create templates/worklog.md.template with placeholders: {{EPIC_ID}}, {{EPIC_TITLE}}, {{EPIC_GOAL}}, {{FEATURE_ID}}, {{FEATURE_TITLE}}, {{FEATURE_GOAL}}, {{TASK_ID}}, {{TASK_TITLE}}, {{TASK_DESCRIPTION}}, {{ACCEPTANCE_CRITERIA}} (bulleted list), {{TIMESTAMP}}. Structure follows legacy worklog: Mission Briefing → Phase entries. Tests: template renders with sample data, all placeholders replaced. Deliverable: templates/worklog.md.template","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:59.65163291-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T18:34:20.176315025-08:00","closed_at":"2026-02-06T18:34:20.176315025-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.2.1","depends_on_id":"cap-8ax.2","type":"parent-child","created_at":"2026-02-06T08:29:59.704284141-08:00","created_by":"Sam Biggins"}],"comments":[{"id":14,"issue_id":"cap-8ax.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T02:27:27Z"},{"id":15,"issue_id":"cap-8ax.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create worklog template with bead interpolation for pipeline context\nBefore: No worklog template existed; pipeline phases had no shared context document\nAfter: templates/worklog.md.template provides Mission Briefing + Phase Log structure with 11 placeholders; test script validates rendering including special chars and multi-line criteria\n\nFiles: 2 changed (1 new template, 1 new test script)\nFindings: envsubst is the correct rendering approach for this template (bash parameter expansion mangles \u0026 characters); prep.sh (cap-8ax.2.2) should use the same envsubst pattern","created_at":"2026-02-07T02:34:24Z"},{"id":16,"issue_id":"cap-8ax.2.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major/minor, 3 nits (deferred)\nSummary: Well-structured template and thorough test script. envsubst approach is correct and safe. Nits: Test 1 only checks 6/11 placeholders (others caught by Test 5), results footer format pre-existing inconsistency, FEATURE_GOAL not in spec but correctly in template per task description.","created_at":"2026-02-07T02:37:04Z"},{"id":17,"issue_id":"cap-8ax.2.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create worklog template with bead interpolation for pipeline context\nBefore: No worklog template existed; pipeline phases had no shared context document\nAfter: templates/worklog.md.template provides Mission Briefing + Phase Log with 11 placeholders; envsubst-based rendering handles special chars and multi-line values\n\nProblems encountered:\n  - Bash parameter expansion mangles \u0026 in replacements: switched to envsubst\n  - Test E1 caught this correctly in RED phase debugging\n\nIssues filed: 0\nCommit: 30411c8\nPush: success","created_at":"2026-02-07T03:28:38Z"}]}
{"id":"cap-8ax.2.2","title":"Create prep.sh script for worktree + worklog setup","description":"scripts/prep.sh \u003cbead-id\u003e [--project-dir=.]: 1. Validate bead exists (bd show \u003cbead-id\u003e), 2. Extract bead context (title, description, parent chain via bd show), 3. Create worktree: git worktree add -b capsule-\u003cbead-id\u003e .capsule/worktrees/\u003cbead-id\u003e main, 4. Instantiate worklog.md from template with bead context, 5. Place worklog.md in worktree root, 6. Create .capsule/logs/ directory if not exists. Error handling: check git status clean, bead exists, worktree doesn't already exist. Depends on: t-1.2.1. Deliverable: scripts/prep.sh creating worktree with instantiated worklog","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:59.786180405-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T20:36:59.157393627-08:00","closed_at":"2026-02-06T20:36:59.157393627-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.2.2","depends_on_id":"cap-8ax.2","type":"parent-child","created_at":"2026-02-06T08:29:59.787834665-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.2.2","depends_on_id":"cap-8ax.2.1","type":"blocks","created_at":"2026-02-06T08:32:05.040562665-08:00","created_by":"Sam Biggins"}],"comments":[{"id":18,"issue_id":"cap-8ax.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create prep.sh to set up isolated git worktrees with instantiated worklogs for bead-driven pipeline execution\nBefore: No way to create isolated working environments for capsule pipeline phases\nAfter: scripts/prep.sh creates git worktrees with bead-specific worklogs, enabling isolated phase execution\n\nFiles: 2 changed (scripts/prep.sh, tests/scripts/test-prep-script.sh)\nFindings: none","created_at":"2026-02-07T04:37:06Z"},{"id":19,"issue_id":"cap-8ax.2.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 0 critical, 1 major (fixed), 2 minor (1 fixed, 1 deferred), 2 nits (deferred)\nSummary: Well-structured scripts following codebase patterns. Fixed missing jq/envsubst prerequisite check and added grandparent type validation. All tests pass.","created_at":"2026-02-07T04:40:25Z"},{"id":20,"issue_id":"cap-8ax.2.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create prep.sh to set up isolated git worktrees with instantiated worklogs for bead-driven pipeline execution\nBefore: Template and worklog existed but no automation to create isolated working environments from beads\nAfter: scripts/prep.sh creates git worktrees on capsule-\u003cbead-id\u003e branches with bead-specific worklogs containing full epic/feature/task context\n\nProblems encountered:\n  - Taster: jq false dependency in test prereqs: removed\n  - Taster: E2 silently swallowed errors: fixed with output capture\n  - Sous-chef: missing jq/envsubst prereq check: added to loop\n  - Sous-chef: grandparent type not validated: added issue_type guard\n\nIssues filed:\n  - cap-am2: Add worktree cleanup on template instantiation failure [P4]\n\nCommit: fe7359b\nPush: success","created_at":"2026-02-07T04:41:44Z"}]}
{"id":"cap-8ax.3","title":"Test-writer and test-review headless claude prompt pair","description":"As a pipeline orchestrator, I want test-writer and test-review prompts that produce structured results so that I can write quality tests with a feedback loop.","acceptance_criteria":"Given a worktree with worklog, When claude -p runs with test-writer prompt, Then test files are created in the worktree; Given test-writer output, When the last JSON block is parsed, Then it contains {status, feedback, files_changed}; Given created tests, When claude -p runs with test-review prompt, Then it returns PASS or NEEDS_WORK with specific feedback; Given NEEDS_WORK from test-review, When test-writer re-runs with feedback, Then tests improve based on feedback","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:48.700283465-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T06:27:08.277115002-08:00","closed_at":"2026-02-07T06:27:08.277115002-08:00","close_reason":"All 5 child tasks complete: signal contract, test-writer prompt, test-review prompt, run-phase.sh script, and E2E integration test","dependencies":[{"issue_id":"cap-8ax.3","depends_on_id":"cap-8ax","type":"parent-child","created_at":"2026-02-06T08:28:48.702494341-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-8ax.3.1","title":"Define structured JSON signal contract","description":"Create docs/signal-contract.md defining the JSON output every phase must produce: {status: PASS|NEEDS_WORK|ERROR, feedback: human-readable explanation, files_changed: [path/to/file1.go, ...], summary: one-line description}. Create scripts/parse-signal.sh that extracts the last JSON block from claude output. Tests: parse valid JSON, parse from mixed output, handle missing JSON (return ERROR status). Deliverable: Signal contract doc + parse-signal.sh parser","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:17.650537457-08:00","created_by":"Sam Biggins","updated_at":"2026-02-06T21:53:14.081571532-08:00","closed_at":"2026-02-06T21:53:14.081571532-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.3.1","depends_on_id":"cap-8ax.3","type":"parent-child","created_at":"2026-02-06T08:30:17.652182363-08:00","created_by":"Sam Biggins"}],"comments":[{"id":21,"issue_id":"cap-8ax.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T05:49:03Z"},{"id":22,"issue_id":"cap-8ax.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Define the structured JSON signal contract that all pipeline phases must produce, and create the parser that extracts it from mixed output.\nBefore: No shared contract for phase communication; no way to parse structured results from claude output.\nAfter: Signal contract documented (docs/signal-contract.md), parser implemented (scripts/parse-signal.sh) with 11 passing tests covering valid parsing, mixed output, validation, and error cases.\n\nFiles: 3 changed\nFindings: none","created_at":"2026-02-07T05:53:22Z"},{"id":23,"issue_id":"cap-8ax.3.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 0 critical, 2 major (both fixed), 2 minor (deferred), 3 nits (deferred)\nSummary: Well-structured signal contract and parser. Fixed JSON injection in error_signal() by using jq --arg. Replaced fragile brace-counting extraction with bottom-up jq validation approach. All 30 tests pass.","created_at":"2026-02-07T05:57:48Z"},{"id":24,"issue_id":"cap-8ax.3.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Define the structured JSON signal contract that all pipeline phases must produce, and create the parser that extracts it from mixed output.\nBefore: No shared contract for phase communication; no way to parse structured results from claude output.\nAfter: Signal contract documented (docs/signal-contract.md), parser implemented (scripts/parse-signal.sh) with bottom-up jq validation. 11 passing tests.\n\nProblems encountered:\n  - Sous-chef: JSON injection in error_signal() via string interpolation: fixed with jq --arg\n  - Sous-chef: Brace-counting extraction fragile with braces in strings: replaced with bottom-up jq validation\n\nIssues filed: 0\nCommit: b32066c\nPush: success","created_at":"2026-02-07T05:58:42Z"}]}
{"id":"cap-8ax.3.2","title":"Create test-writer prompt template","description":"Create prompts/test-writer.md: Instructions to read worklog.md for task context, write failing tests for ALL acceptance criteria, tests must fail for the right reason (not syntax errors), update worklog.md with [TEST-WRITER] entry, output structured JSON signal as final output. Include CLAUDE.md reference, worklog reference, and the signal contract in the prompt. Depends on: t-1.3.1. Deliverable: prompts/test-writer.md","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:17.70629787-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T04:33:49.582375803-08:00","closed_at":"2026-02-07T04:33:49.582375803-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.3.2","depends_on_id":"cap-8ax.3","type":"parent-child","created_at":"2026-02-06T08:30:17.707938419-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.3.2","depends_on_id":"cap-8ax.3.1","type":"blocks","created_at":"2026-02-06T08:32:05.099021919-08:00","created_by":"Sam Biggins"}],"comments":[{"id":25,"issue_id":"cap-8ax.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the test-writer prompt template that instructs Claude to read worklog context, write failing tests for all acceptance criteria, and output structured JSON signals.\nBefore: No test-writer prompt existed; the pipeline had no way to invoke test creation.\nAfter: prompts/test-writer.md provides complete instructions for headless Claude to write RED-phase tests with signal output.\n\nFiles: 1 changed (prompts/test-writer.md created)\nFindings: none","created_at":"2026-02-07T12:34:05Z"},{"id":26,"issue_id":"cap-8ax.3.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after minor fixes)\nIssues: 2 minor, 2 nits (all addressed)\nSummary: Prompt template is well-structured, covers all TDD spec test cases and edge cases. Minor alignment fixes applied for signal contract wording and feedback injection documentation.","created_at":"2026-02-07T12:37:38Z"},{"id":27,"issue_id":"cap-8ax.3.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create test-writer prompt template for headless Claude pipeline\nBefore: No test-writer prompt; pipeline could not invoke test creation phase\nAfter: prompts/test-writer.md provides complete RED-phase test instructions\n\nProblems encountered:\n  - Database mismatch warning (pre-existing, non-blocking)\n\nIssues filed: 0\nCommit: c184dd7\nPush: success","created_at":"2026-02-07T13:22:20Z"}]}
{"id":"cap-8ax.3.3","title":"Create test-review prompt template","description":"Create prompts/test-review.md: Read worklog.md for context and test-writer entry, verify tests exist for each acceptance criterion, verify tests fail for the right reason, verify test isolation/clarity/naming, return PASS if quality sufficient NEEDS_WORK with specific feedback if not, update worklog.md with [TEST-REVIEW] entry, output structured JSON signal. Depends on: t-1.3.1. Deliverable: prompts/test-review.md","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:17.764530344-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T05:29:20.984030106-08:00","closed_at":"2026-02-07T05:29:20.984030106-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.3.3","depends_on_id":"cap-8ax.3","type":"parent-child","created_at":"2026-02-06T08:30:17.766082213-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.3.3","depends_on_id":"cap-8ax.3.1","type":"blocks","created_at":"2026-02-06T08:32:05.156918482-08:00","created_by":"Sam Biggins"}],"comments":[{"id":28,"issue_id":"cap-8ax.3.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T13:28:15Z"},{"id":29,"issue_id":"cap-8ax.3.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the test-review prompt template so the pipeline can validate test quality before moving to implementation\nBefore: Only test-writer prompt existed; no way to review/validate test quality in the pipeline\nAfter: test-review prompt pairs with test-writer, enabling the review feedback loop for the test phase\n\nFiles: 1 changed (prompts/test-review.md created)\nFindings: none","created_at":"2026-02-07T13:29:26Z"},{"id":30,"issue_id":"cap-8ax.3.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 3 nits (none blocking)\nSummary: Well-structured prompt template, consistent with test-writer.md and signal contract. Only nits found (missing feedback placeholder for re-review, no ERROR example, hardcoded Phase 2 numbering).","created_at":"2026-02-07T13:34:45Z"},{"id":31,"issue_id":"cap-8ax.3.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create test-review prompt to complete the test phase review loop\nBefore: Only test-writer prompt existed; no validation of test quality\nAfter: test-review prompt pairs with test-writer, enabling PASS/NEEDS_WORK feedback\n\nProblems encountered:\n  - none\n\nIssues filed:\n  - none\n\nCommit: bfe911e\nPush: success","created_at":"2026-02-07T13:37:23Z"}]}
{"id":"cap-8ax.3.4","title":"Create run-phase.sh script for headless claude invocation","description":"scripts/run-phase.sh \u003cphase-name\u003e \u003cworktree-path\u003e [--feedback=...]: 1. Load prompt from prompts/\u003cphase-name\u003e.md, 2. If --feedback provided append feedback section, 3. Invoke: claude -p with --dangerously-skip-permissions in worktree directory, 4. Capture stdout to .capsule/output/\u003cphase-name\u003e-\u003ctimestamp\u003e.log, 5. Parse signal via parse-signal.sh, 6. Print result, 7. Exit code: 0=PASS 1=NEEDS_WORK 2=ERROR. Error handling: timeout, claude not found, worktree not found. Depends on: t-1.3.1. Deliverable: scripts/run-phase.sh for any phase invocation","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:17.831090193-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T05:55:51.191890512-08:00","closed_at":"2026-02-07T05:55:51.191890512-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.3.4","depends_on_id":"cap-8ax.3","type":"parent-child","created_at":"2026-02-06T08:30:17.832672024-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.3.4","depends_on_id":"cap-8ax.3.1","type":"blocks","created_at":"2026-02-06T08:32:05.214473776-08:00","created_by":"Sam Biggins"}],"comments":[{"id":32,"issue_id":"cap-8ax.3.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the run-phase.sh script that loads prompt templates, invokes headless claude, captures output, parses the signal, and returns structured exit codes.\nBefore: No way to invoke a capsule pipeline phase from the command line; prompts existed but had no execution harness.\nAfter: scripts/run-phase.sh provides a generic phase runner: loads prompts/\u003cphase\u003e.md, invokes claude -p in worktree, captures stdout to .capsule/output/\u003cphase\u003e-\u003ctimestamp\u003e.log, parses signal via parse-signal.sh, and returns exit 0/1/2 for PASS/NEEDS_WORK/ERROR. Supports --feedback for retry context.\n\nFiles: 2 changed (scripts/run-phase.sh, tests/scripts/test-run-phase.sh)\nFindings: none","created_at":"2026-02-07T13:56:06Z"},{"id":33,"issue_id":"cap-8ax.3.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 0 critical, 3 minor (all fixed), 1 nit (deferred)\nSummary: Well-structured script following existing patterns. Fixed: echo→printf for robustness, added PID to timestamp for uniqueness, separated stderr from stdout in claude invocation, fixed test 7 log cleanup for isolation.","created_at":"2026-02-07T14:00:00Z"},{"id":34,"issue_id":"cap-8ax.3.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create the run-phase.sh script for invoking capsule pipeline phases via headless claude with structured signal parsing.\nBefore: Prompt templates existed but had no execution harness; no way to invoke a pipeline phase from the command line.\nAfter: scripts/run-phase.sh provides a generic phase runner: loads prompts, invokes claude -p in worktree, captures output to logs, parses signal, returns structured exit codes. Supports --feedback for retry context.\n\nProblems encountered:\n  - Taster: Test 7 log directory path ambiguity: resolved by placing logs at worktree/.capsule/output/\n  - Sous-chef: echo fragile with leading dashes: fixed with printf\n  - Sous-chef: Timestamp collision risk: fixed with PID suffix\n  - Sous-chef: stderr polluting signal parsing: separated stderr to .log.stderr file\n  - Test 7 stale log files from earlier tests: fixed with cleanup before assertion\n\nIssues filed: 0\nCommit: 8e2d7b8\nPush: success","created_at":"2026-02-07T14:01:46Z"}]}
{"id":"cap-8ax.3.5","title":"Validate test-writer/test-review pair end-to-end","description":"Integration test: 1. Run setup-template.sh to create test project, 2. Run prep.sh \u003ctask-id\u003e to create worktree, 3. Run run-phase.sh test-writer \u003cworktree\u003e, 4. Verify test files created worklog updated, 5. Run run-phase.sh test-review \u003cworktree\u003e, 6. Verify structured JSON result, 7. If NEEDS_WORK run test-writer again with feedback. Document exact claude commands used. Depends on: t-1.3.2, t-1.3.3, t-1.3.4, t-1.2.2. Deliverable: tests/test-phase-pair-test-writer.sh integration test","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:17.892312921-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T06:14:04.87778066-08:00","closed_at":"2026-02-07T06:14:04.87778066-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.3.5","depends_on_id":"cap-8ax.3","type":"parent-child","created_at":"2026-02-06T08:30:17.893893598-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.3.5","depends_on_id":"cap-8ax.3.2","type":"blocks","created_at":"2026-02-06T08:32:05.27319286-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.3.5","depends_on_id":"cap-8ax.3.3","type":"blocks","created_at":"2026-02-06T08:32:05.338216192-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.3.5","depends_on_id":"cap-8ax.3.4","type":"blocks","created_at":"2026-02-06T08:32:05.398804083-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.3.5","depends_on_id":"cap-8ax.2.2","type":"blocks","created_at":"2026-02-06T08:32:05.463733674-08:00","created_by":"Sam Biggins"}],"comments":[{"id":35,"issue_id":"cap-8ax.3.5","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Validate the full test-writer/test-review phase pair end-to-end with integration tests\nBefore: No integration test existed for the test-writer/test-review pair chain\nAfter: tests/scripts/test-phase-pair-test-writer.sh validates: full chain (setup→prep→test-writer→test-review), NEEDS_WORK retry with feedback injection, ERROR propagation, signal contract validation\n\nFiles: 1 changed (tests/scripts/test-phase-pair-test-writer.sh - new)\nFindings: none","created_at":"2026-02-07T14:14:18Z"},{"id":36,"issue_id":"cap-8ax.3.5","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 3 minor found (all fixed)\nSummary: Well-structured integration test following established patterns. Fixed: removed envsubst prereq (consistency with siblings), added comment for spec test cases 4/5 (not feasible with mock), removed dead mock code, fixed test title accuracy.","created_at":"2026-02-07T14:25:09Z"},{"id":37,"issue_id":"cap-8ax.3.5","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Validate the full test-writer/test-review phase pair with integration tests\nBefore: No E2E integration test for the test-writer/test-review chain\nAfter: 17-test integration test validates PASS, NEEDS_WORK retry, ERROR paths\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nFeature closed:\n  - cap-8ax.3: Test-writer and test-review headless claude prompt pair (all 5 children complete)\n\nCommit: 28b5982\nPush: success (origin/epic/cap-8ax)","created_at":"2026-02-07T14:28:46Z"}]}
{"id":"cap-8ax.4","title":"Execute and execute-review headless claude prompt pair","description":"As a pipeline orchestrator, I want execute and execute-review prompts so that the agent implements code that passes the tests created in the previous phase.","acceptance_criteria":"Given a worktree with failing tests, When claude -p runs with execute prompt, Then implementation code is created that passes the tests; Given execute output, When parsed, Then JSON signal contains PASS/NEEDS_WORK/ERROR with files_changed; Given implementation, When claude -p runs with execute-review prompt, Then it verifies tests pass and code quality is acceptable; Given NEEDS_WORK from review, When execute re-runs with feedback, Then implementation improves","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:48.760776967-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T08:16:08.111203753-08:00","closed_at":"2026-02-07T08:16:08.111203753-08:00","close_reason":"All children complete: execute prompt, execute-review prompt, and E2E validation test","dependencies":[{"issue_id":"cap-8ax.4","depends_on_id":"cap-8ax","type":"parent-child","created_at":"2026-02-06T08:28:48.762569625-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-8ax.4.1","title":"Create execute prompt template","description":"Create prompts/execute.md: Read worklog.md for task context AND test-writer/review entries, run existing tests to confirm RED state, implement minimal code to pass all tests (GREEN), refactor for clarity while tests pass (REFACTOR), update worklog.md with [EXECUTE] entry, output structured JSON signal. Depends on: t-1.3.1. Deliverable: prompts/execute.md","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:25.245550177-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T07:37:16.785556378-08:00","closed_at":"2026-02-07T07:37:16.785556378-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.4.1","depends_on_id":"cap-8ax.4","type":"parent-child","created_at":"2026-02-06T08:30:25.247504311-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.4.1","depends_on_id":"cap-8ax.3.1","type":"blocks","created_at":"2026-02-06T08:32:05.519735311-08:00","created_by":"Sam Biggins"}],"comments":[{"id":38,"issue_id":"cap-8ax.4.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create execute prompt template to instruct Claude to implement minimum code making tests pass (GREEN phase of TDD)\nBefore: Only test-writer and test-review prompts existed; no execute phase prompt to drive implementation\nAfter: prompts/execute.md exists with full TDD execute instructions (RED confirmation, GREEN implementation, refactor, worklog update, signal output)\n\nFiles: 2 changed (prompts/execute.md created, tests/scripts/test-prompt-templates.sh updated)\nFindings: Pre-existing test failure in test-template-source-files.sh (hardcoded path in demo template) - unrelated to this task","created_at":"2026-02-07T15:37:23Z"},{"id":39,"issue_id":"cap-8ax.4.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 2 nits (1 auto-fixed: header comment updated, 1 cosmetic: no action needed)\nSummary: Well-structured execute prompt template following established patterns. Signal contract alignment correct. Tests thorough with proper GWT structure.","created_at":"2026-02-07T15:40:51Z"},{"id":40,"issue_id":"cap-8ax.4.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create execute prompt template for TDD implementation phase\nBefore: Only test-writer and test-review prompts existed; no execute phase prompt\nAfter: prompts/execute.md provides full RED-GREEN-REFACTOR instructions with signal contract\n\nProblems encountered:\n  - bd daemon repo-id mismatch warning (non-blocking, pre-existing)\n\nIssues filed:\n  - (none)\n\nCommit: 093e4d3\nPush: success","created_at":"2026-02-07T15:42:53Z"}]}
{"id":"cap-8ax.4.2","title":"Create execute-review prompt template","description":"Create prompts/execute-review.md: Read worklog.md for full context, run tests verify all pass, review code quality (correctness, style, no hacks), verify only acceptance-criteria-scoped changes (no scope creep), update worklog.md with [EXECUTE-REVIEW] entry, return PASS or NEEDS_WORK with feedback. Depends on: t-1.3.1. Deliverable: prompts/execute-review.md","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:25.305732509-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T07:54:00.878118096-08:00","closed_at":"2026-02-07T07:54:00.878118096-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.4.2","depends_on_id":"cap-8ax.4","type":"parent-child","created_at":"2026-02-06T08:30:25.307553109-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.4.2","depends_on_id":"cap-8ax.3.1","type":"blocks","created_at":"2026-02-06T08:32:05.577559428-08:00","created_by":"Sam Biggins"}],"comments":[{"id":41,"issue_id":"cap-8ax.4.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the execute-review prompt template that reviews implementation code for correctness, scope compliance, and quality after the execute phase.\nBefore: Pipeline had execute prompt but no review counterpart; no automated quality gate between implementation and sign-off.\nAfter: prompts/execute-review.md created with full review checklist (test verification, correctness, scope, quality, no test modifications), worklog template, re-review handling with feedback injection, and signal contract compliance.\n\nFiles: 1 changed (prompts/execute-review.md created)\nFindings: none","created_at":"2026-02-07T15:54:10Z"},{"id":42,"issue_id":"cap-8ax.4.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all deferred - consistent with sibling prompts)\nSummary: Well-structured execute-review prompt template. Fully covers test verification, correctness review, scope check, quality check, worklog update, and signal output. Consistent with sibling prompts. No changes needed.","created_at":"2026-02-07T15:56:41Z"},{"id":43,"issue_id":"cap-8ax.4.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create the execute-review prompt that reviews implementation code for correctness, scope compliance, and quality after the execute phase.\nBefore: Pipeline had execute prompt (Phase 3) but no review counterpart; no automated quality gate between implementation and sign-off.\nAfter: prompts/execute-review.md created with 4-dimension review checklist (correctness, scope, quality, no test modifications), worklog template (Phase 4), re-review handling with feedback injection, and signal contract compliance.\n\nProblems encountered:\n  - None\n\nIssues filed: 0\nCommit: 2ece0c5\nPush: success","created_at":"2026-02-07T15:58:51Z"}]}
{"id":"cap-8ax.4.3","title":"Validate execute/execute-review pair end-to-end","description":"Integration test: 1. Start from state after successful test-writer/test-review, 2. Run run-phase.sh execute \u003cworktree\u003e, 3. Verify implementation files created tests now pass, 4. Run run-phase.sh execute-review \u003cworktree\u003e, 5. Verify PASS result. Document exact commands. Depends on: t-1.4.1, t-1.4.2, t-1.3.5. Deliverable: tests/test-phase-pair-execute.sh integration test","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:25.363874002-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T08:12:24.985024686-08:00","closed_at":"2026-02-07T08:12:24.985024686-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.4.3","depends_on_id":"cap-8ax.4","type":"parent-child","created_at":"2026-02-06T08:30:25.365500834-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.4.3","depends_on_id":"cap-8ax.4.1","type":"blocks","created_at":"2026-02-06T08:32:05.638842378-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.4.3","depends_on_id":"cap-8ax.4.2","type":"blocks","created_at":"2026-02-06T08:32:05.697832002-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.4.3","depends_on_id":"cap-8ax.3.5","type":"blocks","created_at":"2026-02-06T08:32:05.755999583-08:00","created_by":"Sam Biggins"}],"comments":[{"id":46,"issue_id":"cap-8ax.4.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Validate the execute/execute-review phase pair works end-to-end with proper signal handling, retry loops, and output logging.\nBefore: Execute and execute-review prompt templates existed but had no integration test proving they work together through run-phase.sh.\nAfter: 20-assertion integration test validates PASS/NEEDS_WORK/ERROR paths for both phases, retry with feedback injection, output logging, scope creep detection, and quality issue detection.\n\nFiles: 1 changed (tests/scripts/test-phase-pair-execute.sh created)\nFindings: None","created_at":"2026-02-07T16:12:33Z"},{"id":47,"issue_id":"cap-8ax.4.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all deferred - cosmetic only)\nSummary: Well-structured integration test faithfully adapting the sibling test pattern. Full spec coverage with documented gaps for mock-infeasible cases. Clean signal handling, careful log filtering, and thorough edge case coverage.","created_at":"2026-02-07T16:15:38Z"},{"id":48,"issue_id":"cap-8ax.4.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Validate the execute/execute-review phase pair works end-to-end with proper signal handling, retry loops, and output logging.\nBefore: Execute and execute-review prompt templates existed but had no integration test proving they work together through run-phase.sh.\nAfter: 20-assertion integration test validates all signal paths (PASS/NEEDS_WORK/ERROR), retry with feedback injection, output logging, scope creep detection, and quality issue detection.\n\nProblems encountered:\n  - None\n\nIssues filed:\n  - (none)\n\nFeature closed: cap-8ax.4 (Execute and execute-review headless claude prompt pair) - all 3 children complete\nCommit: 59e88ac\nPush: success","created_at":"2026-02-07T16:16:40Z"}]}
{"id":"cap-8ax.5","title":"Sign-off and merge-to-main headless claude prompt pair","description":"As a pipeline orchestrator, I want sign-off and merge prompts so that only relevant implementation files are merged to main and worklogs are archived to .capsule/logs/.","acceptance_criteria":"Given a worktree with passing tests, When claude -p runs with sign-off prompt, Then it validates quality and returns PASS or NEEDS_WORK; Given PASS from sign-off, When merge.sh runs, Then only implementation/test files are on main (no worklog.md); Given successful merge, When ls .capsule/logs/\u003cbead-id\u003e/ runs, Then worklog.md is archived there; Given successful merge, When git worktree list runs, Then the mission worktree is removed; Given successful merge, When bd show \u003cbead-id\u003e runs, Then the bead status is closed","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:48.819604628-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T09:23:19.704456034-08:00","closed_at":"2026-02-07T09:23:19.704456034-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.5","depends_on_id":"cap-8ax","type":"parent-child","created_at":"2026-02-06T08:28:48.82122899-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-8ax.5.1","title":"Create sign-off prompt template","description":"Create prompts/sign-off.md: Read worklog.md for full mission context, run tests verify all pass, verify commit-ready state (no temp files, no debug code), verify acceptance criteria met, update worklog.md with [SIGN-OFF] entry, return PASS or NEEDS_WORK. Depends on: t-1.3.1. Deliverable: prompts/sign-off.md","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:33.853923637-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T08:24:31.982627015-08:00","closed_at":"2026-02-07T08:24:31.982627015-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.5.1","depends_on_id":"cap-8ax.5","type":"parent-child","created_at":"2026-02-06T08:30:33.855715068-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.5.1","depends_on_id":"cap-8ax.3.1","type":"blocks","created_at":"2026-02-06T08:32:05.812790359-08:00","created_by":"Sam Biggins"}],"comments":[{"id":49,"issue_id":"cap-8ax.5.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the sign-off prompt template that performs final verification before a task can be considered complete.\nBefore: Pipeline had no sign-off phase; worktree changes could be committed without final verification of tests, commit-readiness, and acceptance criteria coverage.\nAfter: prompts/sign-off.md provides structured sign-off verification: reads full worklog context, runs tests, checks commit-ready state (no temp/debug/TODO artifacts), verifies all acceptance criteria met, updates worklog with Phase 5 entry, returns PASS/NEEDS_WORK signal.\n\nFiles: 2 changed (prompts/sign-off.md created, tests/scripts/test-prompt-templates.sh updated)\nFindings: none","created_at":"2026-02-07T16:24:40Z"},{"id":50,"issue_id":"cap-8ax.5.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all deferred - cosmetic only)\nSummary: Well-structured sign-off prompt template following established sibling patterns. Thorough commit-readiness checklist, proper signal contract compliance, and comprehensive test coverage (10 tests). Re-review section added by polisher for consistency.","created_at":"2026-02-07T16:27:18Z"},{"id":51,"issue_id":"cap-8ax.5.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create the sign-off prompt template for final pipeline verification before task completion.\nBefore: Pipeline had no sign-off phase; worktree changes could be committed without final verification of tests, commit-readiness, and acceptance criteria coverage.\nAfter: prompts/sign-off.md provides structured 8-section sign-off verification with commit-ready checklist, AC traceability, and re-review support.\n\nProblems encountered:\n  - None\n\nIssues filed:\n  - (none)\n\nCommit: ea7bb39\nPush: success","created_at":"2026-02-07T16:28:11Z"}]}
{"id":"cap-8ax.5.2","title":"Create merge prompt template and thin merge driver script","description":"Replace mechanical merge script with agent-reviewed merge. Two parts: (1) prompts/merge.md — Claude reviews worktree, identifies implementation+test files vs worklog/temp artifacts, stages appropriate files with explicit git add, commits with bead-id: task-title format. Returns JSON signal {status: PASS/ERROR, files_merged: [], files_excluded: [], commit_hash}. (2) scripts/merge.sh \u003cbead-id\u003e [--project-dir=.] — thin driver that: runs claude -p with merge prompt, verifies PASS, switches to main, merges --no-ff, archives worklog to .capsule/logs/\u003cbead-id\u003e/, archives phase outputs, removes worktree, deletes branch, closes bead. Error handling: merge conflicts, missing worktree, already merged. Deliverable: prompts/merge.md and scripts/merge.sh","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:33.914983023-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T08:37:02.46758603-08:00","closed_at":"2026-02-07T08:37:02.46758603-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.5.2","depends_on_id":"cap-8ax.5","type":"parent-child","created_at":"2026-02-06T08:30:33.916949044-08:00","created_by":"Sam Biggins"}],"comments":[{"id":52,"issue_id":"cap-8ax.5.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T16:31:54Z"},{"id":53,"issue_id":"cap-8ax.5.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Replace mechanical merge script with agent-reviewed merge. The agent reviews worktree files, classifies them as implementation/test vs pipeline artifacts, and stages only appropriate files.\nBefore: No merge capability existed. The pipeline had sign-off but no way to merge results to main.\nAfter: Two-part merge system: prompts/merge.md (agent reviews and commits in worktree) + scripts/merge.sh (thin driver that merges --no-ff to main, archives worklog, cleans up worktree/branch, closes bead).\n\nFiles: 3 changed (prompts/merge.md, scripts/merge.sh, tests/scripts/test-merge-script.sh)\nFindings: None","created_at":"2026-02-07T16:37:12Z"},{"id":54,"issue_id":"cap-8ax.5.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 3 minor (2 fixed, 1 deferred), 3 nits (deferred)\nSummary: Well-structured merge prompt and driver script following established patterns. Fixed archival ordering (archive after merge, not before) and renamed misleading variable. Missing error path test coverage noted for follow-up.","created_at":"2026-02-07T16:44:01Z"},{"id":55,"issue_id":"cap-8ax.5.2","author":"Sam Biggins","text":"PHASE: SERVE (pass 2)\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 4 nits (all deferred)\nSummary: All previous review issues resolved. Error path tests added (11/11 passing). Code polished for consistency. Ready for tidy.","created_at":"2026-02-07T16:52:00Z"},{"id":56,"issue_id":"cap-8ax.5.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Replace mechanical merge script with agent-reviewed merge so content is reviewed, not just mechanically selected.\nBefore: Pipeline had sign-off but no way to merge results to main. Original design called for a mechanical script.\nAfter: Two-part merge system: prompts/merge.md (agent reviews and commits in worktree) + scripts/merge.sh (thin driver for git plumbing, archival, cleanup).\n\nProblems encountered:\n  - set -e bug: git symbolic-ref fails with exit 128 on no-remote repos, killing subshell. Fixed with || true.\n  - Archival ordering: originally archived before merge, creating orphaned archives on failure. Moved to after merge.\n\nIssues filed: 0\n\nCommit: 9684d7a\nPush: success","created_at":"2026-02-07T16:56:57Z"}]}
{"id":"cap-8ax.5.3","title":"Validate sign-off/merge pair end-to-end","description":"Integration test: 1. Start from state after successful execute/execute-review, 2. Run run-phase.sh sign-off \u003cworktree\u003e, 3. Verify PASS result, 4. Run merge.sh \u003cbead-id\u003e, 5. Verify: files on main, worklog in .capsule/logs/, worktree gone, bead closed. Depends on: t-1.5.1, t-1.5.2, t-1.4.3. Deliverable: tests/test-phase-pair-merge.sh integration test","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:33.985517714-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T09:10:31.769355191-08:00","closed_at":"2026-02-07T09:10:31.769355191-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.5.3","depends_on_id":"cap-8ax.5","type":"parent-child","created_at":"2026-02-06T08:30:33.9872202-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.5.3","depends_on_id":"cap-8ax.5.1","type":"blocks","created_at":"2026-02-06T08:32:05.872513033-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.5.3","depends_on_id":"cap-8ax.5.2","type":"blocks","created_at":"2026-02-06T08:32:05.930716882-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.5.3","depends_on_id":"cap-8ax.4.3","type":"blocks","created_at":"2026-02-06T08:32:06.009127176-08:00","created_by":"Sam Biggins"}],"comments":[{"id":57,"issue_id":"cap-8ax.5.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Validate the sign-off/merge phase pair works end-to-end, from post-execute state through sign-off PASS, merge to main, worklog archival, worktree cleanup, and bead closure.\nBefore: No integration test existed for the sign-off → merge chain; the two phases were only tested individually.\nAfter: tests/test-phase-pair-merge.sh validates the full E2E chain with 14 assertions across 6 test cases matching spec t-1.5.3.\n\nFiles: 1 added (tests/scripts/test-phase-pair-merge.sh)\nFindings:\n- worklog.md remains on main after --no-ff merge because prior branch commits already contain it. The merge agent only stages uncommitted files. Future improvement: have merge.sh git-rm worklog.md post-merge or use squash merge.","created_at":"2026-02-07T17:10:41Z"},{"id":58,"issue_id":"cap-8ax.5.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all deferred - cosmetic only)\nSummary: Well-structured E2E integration test following established sibling patterns. Full spec coverage (6 test cases, 14 assertions). Honest about mock limitations with clear documentation. Mock routing architecture is clean and consistent.","created_at":"2026-02-07T17:16:06Z"}]}
{"id":"cap-8ax.6","title":"Full pipeline orchestration script and command documentation","description":"As a capsule developer, I want a single script that runs the full pipeline and documentation of every command used so that Epic 2 has a clear specification to implement.","acceptance_criteria":"Given a template project, When run-pipeline.sh \u003cbead-id\u003e runs, Then the full pipeline executes (prep → test-write → test-review → execute → execute-review → sign-off → merge); Given the pipeline, When a reviewer phase returns NEEDS_WORK, Then the worker phase retries with feedback (up to configured max); Given the pipeline completes, When reviewing .capsule/logs/\u003cbead-id\u003e/, Then the full worklog with all phase entries is archived; Given docs/commands.md, When reading it, Then every claude command, script invocation, and expected output is documented","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:48.877165132-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T15:20:32.17660177-08:00","closed_at":"2026-02-07T15:20:32.17660177-08:00","close_reason":"All 4 children complete: run-pipeline.sh, teardown.sh, commands documentation, E2E smoke test","dependencies":[{"issue_id":"cap-8ax.6","depends_on_id":"cap-8ax","type":"parent-child","created_at":"2026-02-06T08:28:48.878703688-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-8ax.6.1","title":"Create run-pipeline.sh orchestration script","description":"scripts/run-pipeline.sh \u003cbead-id\u003e [--project-dir=.] [--max-retries=2]: 1. Run prep.sh \u003cbead-id\u003e, 2. Phase pair loop: test-writer → test-review (max 3 retries), 3. Phase pair loop: execute → execute-review (max 2 retries), 4. Run sign-off (max 2 retries, retries execute on NEEDS_WORK), 5. Run merge.sh \u003cbead-id\u003e, 6. Print summary. Error handling: any ERROR aborts, preserves worktree. Depends on: t-1.3.4, t-1.5.2. Deliverable: scripts/run-pipeline.sh full orchestration","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:45.96429143-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T14:05:06.017875981-08:00","closed_at":"2026-02-07T14:05:06.017875981-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.6.1","depends_on_id":"cap-8ax.6","type":"parent-child","created_at":"2026-02-06T08:30:45.96627694-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.6.1","depends_on_id":"cap-8ax.3.4","type":"blocks","created_at":"2026-02-06T08:32:06.068811302-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.6.1","depends_on_id":"cap-8ax.5.2","type":"blocks","created_at":"2026-02-06T08:32:06.127712573-08:00","created_by":"Sam Biggins"}],"comments":[{"id":65,"issue_id":"cap-8ax.6.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T21:49:26Z"},{"id":66,"issue_id":"cap-8ax.6.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the run-pipeline.sh orchestration script that chains all pipeline phases (prep → test-writer/test-review → execute/execute-review → sign-off → merge) with retry logic and error handling.\nBefore: Individual pipeline scripts existed (prep.sh, run-phase.sh, merge.sh) but had to be invoked manually in sequence with no automated retry or orchestration.\nAfter: scripts/run-pipeline.sh provides full pipeline orchestration: prep creates worktree, phase pairs loop with configurable retries, sign-off retries re-run execute on NEEDS_WORK, merge completes the cycle. ERROR aborts immediately preserving worktree for debugging.\n\nFiles: 2 changed (scripts/run-pipeline.sh, tests/scripts/test-run-pipeline.sh)\nFindings: None","created_at":"2026-02-07T22:05:14Z"},{"id":67,"issue_id":"cap-8ax.6.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 0 critical, 1 major (fixed), 2 minor (1 fixed, 1 consistent-with-codebase), 3 nits (deferred)\nSummary: Well-structured orchestration script with clean separation of concerns. Fixed: execute non-zero exit handling during sign-off retry (was only checking exit 2, now checks any non-zero), added missing jq prerequisite check. Nits deferred: duration/timing output, SIGINT handling, merge exit code normalization.","created_at":"2026-02-07T22:07:36Z"},{"id":68,"issue_id":"cap-8ax.6.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create the run-pipeline.sh orchestration script that chains all pipeline phases with retry logic and error handling.\nBefore: Individual pipeline scripts existed (prep.sh, run-phase.sh, merge.sh) but had to be invoked manually with no automated orchestration or retry.\nAfter: scripts/run-pipeline.sh provides full pipeline orchestration: prep → test-writer/test-review → execute/execute-review → sign-off → merge. Configurable retries, feedback extraction, worktree preservation on failure.\n\nProblems encountered:\n  - Mock claude not phase-aware: first-line heading detection solved writer/review disambiguation\n  - Beads UNIQUE constraint: bd create --parent fails on ID collision, used standalone beads instead\n  - Worklog sign-off verdict: mock needed to update worklog.md for merge.sh precondition check\n\nIssues filed: 0\n\nCommit: 7f472d1\nPush: success","created_at":"2026-02-07T22:08:43Z"}]}
{"id":"cap-8ax.6.2","title":"Create teardown.sh cleanup script","description":"scripts/teardown.sh [--project-dir=.]: Remove all capsule worktrees, clean .capsule/output/ (but preserve .capsule/logs/), prune git worktree metadata, report what was cleaned. Error handling: graceful if nothing to clean. Deliverable: scripts/teardown.sh for environment cleanup","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:46.024348479-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T14:40:10.151862167-08:00","closed_at":"2026-02-07T14:40:10.151862167-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.6.2","depends_on_id":"cap-8ax.6","type":"parent-child","created_at":"2026-02-06T08:30:46.025957032-08:00","created_by":"Sam Biggins"}],"comments":[{"id":73,"issue_id":"cap-8ax.6.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T22:35:41Z"},{"id":74,"issue_id":"cap-8ax.6.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create a teardown.sh cleanup utility so capsule environments can be cleanly reset\nBefore: No way to clean up worktrees and output files after pipeline runs; cleanup was manual\nAfter: scripts/teardown.sh removes all capsule worktrees, cleans output, preserves logs, and reports what was cleaned\n\nFiles: 2 changed (scripts/teardown.sh, tests/scripts/test-teardown.sh)\nFindings: none","created_at":"2026-02-07T22:40:18Z"},{"id":75,"issue_id":"cap-8ax.6.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 1 minor (fixed: output dir preservation test), 4 nits (deferred: prerequisite checks, exit codes, jq prereq in test, hidden files in output)\nSummary: Well-structured cleanup script following established conventions. Robust worktree removal with fallback. Good test coverage (6 cases, 12 assertions). Fixed output directory preservation assertion per review.","created_at":"2026-02-07T22:43:51Z"},{"id":76,"issue_id":"cap-8ax.6.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create a teardown.sh cleanup utility so capsule environments can be cleanly reset after pipeline runs.\nBefore: No cleanup mechanism existed; worktrees and output had to be removed manually.\nAfter: scripts/teardown.sh removes all capsule worktrees, cleans output, preserves logs, and reports what was cleaned.\n\nProblems encountered:\n  - set -euo pipefail + short-circuit \u0026\u0026: last [ ] test returning false became script exit code. Resolved by using if/then instead of [ ] \u0026\u0026 echo.\n\nIssues filed: 0\n\nCommit: f947db4\nPush: success","created_at":"2026-02-07T22:45:21Z"}]}
{"id":"cap-8ax.6.3","title":"Document all commands and create specification for Epic 2","description":"Create docs/commands.md documenting: every script with usage args exit codes, every claude -p invocation with exact flags, the signal contract with examples, the retry logic rules, the worklog lifecycle, the worktree lifecycle, directory structure (.capsule/ prompts/ scripts/ templates/). This becomes the specification for Epic 2 Go implementation. Depends on: t-1.6.1. Deliverable: docs/commands.md — specification for Epic 2","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:46.083575855-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T14:59:07.894912936-08:00","closed_at":"2026-02-07T14:59:07.894912936-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.6.3","depends_on_id":"cap-8ax.6","type":"parent-child","created_at":"2026-02-06T08:30:46.085314785-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.6.3","depends_on_id":"cap-8ax.6.1","type":"blocks","created_at":"2026-02-06T08:32:06.185892119-08:00","created_by":"Sam Biggins"}],"comments":[{"id":77,"issue_id":"cap-8ax.6.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T22:55:39Z"},{"id":78,"issue_id":"cap-8ax.6.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create comprehensive specification document for Epic 2 Go rewrite\nBefore: No centralized documentation of scripts, prompts, signals, or lifecycles\nAfter: docs/commands.md serves as the complete specification covering all 7 scripts, 6 prompt phases, signal contract, retry logic, worklog/worktree lifecycles, directory structure, error handling, and Go interface boundaries\n\nFiles: 1 changed (docs/commands.md - 829 lines)\nFindings: none","created_at":"2026-02-07T22:59:15Z"},{"id":79,"issue_id":"cap-8ax.6.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 3 minor + 4 nits found, 3 minor auto-fixed\nSummary: Comprehensive specification document accurately describes all pipeline components. Minor fixes applied for output directory structure, template variable syntax note, and teardown prerequisite accuracy.","created_at":"2026-02-07T23:08:39Z"},{"id":80,"issue_id":"cap-8ax.6.3","author":"Sam Biggins","text":"PHASE: SERVE (re-review)\nStatus: completed\nVerdict: approved\nIssues: 0 found\nSummary: All 3 nit fixes verified correct against source code. No new issues.","created_at":"2026-02-07T23:19:48Z"},{"id":81,"issue_id":"cap-8ax.6.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create specification document for Epic 2 Go rewrite\nBefore: No centralized documentation of pipeline components\nAfter: Complete 834-line specification covering all scripts, prompts, signals, lifecycles\n\nProblems encountered:\n  - None\n\nIssues filed:\n  - None\n\nCommit: 2af1227 (task), 98868ca (epic merge to main)\nPush: success","created_at":"2026-02-07T23:22:13Z"}]}
{"id":"cap-8ax.6.4","title":"Full pipeline E2E smoke test","description":"tests/test-full-pipeline.sh: 1. Run setup-template.sh, 2. Run run-pipeline.sh \u003ctask-bead-id\u003e, 3. Assert: tests exist on main, 4. Assert: implementation passes tests, 5. Assert: worklog in .capsule/logs/\u003cbead-id\u003e/, 6. Assert: no worktree remains, 7. Assert: bead is closed, 8. Cleanup with teardown.sh. This is the Epic 1 E2E smoke test. Depends on: t-1.6.1. Deliverable: tests/test-full-pipeline.sh E2E smoke test","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:46.146759408-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T14:17:52.995245541-08:00","closed_at":"2026-02-07T14:17:52.995245541-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-8ax.6.4","depends_on_id":"cap-8ax.6","type":"parent-child","created_at":"2026-02-06T08:30:46.148477326-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-8ax.6.4","depends_on_id":"cap-8ax.6.1","type":"blocks","created_at":"2026-02-06T08:32:06.246706677-08:00","created_by":"Sam Biggins"}],"comments":[{"id":69,"issue_id":"cap-8ax.6.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-07T22:14:41Z"},{"id":70,"issue_id":"cap-8ax.6.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create the Epic 1 E2E smoke test that validates the full pipeline end-to-end\nBefore: Pipeline had unit tests for individual scripts but no E2E test proving the full flow\nAfter: tests/test-full-pipeline.sh exercises setup → pipeline → 7 assertions on main branch state\n\nFiles: 1 changed (tests/scripts/test-full-pipeline.sh - new)\nFindings: none","created_at":"2026-02-07T22:18:00Z"},{"id":71,"issue_id":"cap-8ax.6.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 1 minor fixed (execute grep over-match), 2 nits noted\nSummary: Well-structured E2E test following established patterns. Mock claude writes real Go code. All 7 assertions meaningful. One minor pattern-matching fragility fixed.","created_at":"2026-02-07T22:24:18Z"},{"id":72,"issue_id":"cap-8ax.6.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create Epic 1 E2E smoke test proving full pipeline works end-to-end\nBefore: Pipeline had unit tests per script but no E2E test\nAfter: tests/test-full-pipeline.sh exercises setup→pipeline→7 assertions on main\n\nProblems encountered:\n  - none\n\nIssues filed:\n  - none\n\nCommit: d43bbe9\nPush: success","created_at":"2026-02-07T22:28:32Z"}]}
{"id":"cap-8ca","title":"Add PhaseError status to dashboard pipeline","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T20:16:41.52389755-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T20:20:02.174340757-08:00","closed_at":"2026-02-15T20:20:02.174340757-08:00","close_reason":"Closed"}
{"id":"cap-8na","title":"Fix serve review findings: path traversal, TODOs, stub warning","description":"Address sous-chef review findings from cap-aqj serve phase:\n\n1. [P1] Path traversal in state.FileStore - id param flows from CLI without validation\n2. [P3] Add TODO annotations for unwired RetryStrategy, Condition, Provider, Timeout\n3. [P3] Log warning when discovery_filing enabled but Create unimplemented\n4. [P4] Add typed status constants to campaign package\n\nAcceptance: make lint \u0026\u0026 make test-full pass, path traversal test added","status":"closed","priority":1,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-11T16:52:39.76158979-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:56:53.144270289-08:00","closed_at":"2026-02-11T16:56:53.144270289-08:00","close_reason":"Closed","comments":[{"id":176,"issue_id":"cap-8na","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Fix security and code quality findings from sous-chef serve review\nBefore: state.FileStore accepted path traversal IDs; campaign used bare strings for status; scaffolded fields had no TODO markers; discovery filing failures were silent\nAfter: FileStore rejects traversal/empty/dot IDs with ErrInvalidID; typed CampaignStatus and TaskStatus constants; TODO(cap-6vp) annotations on Condition/Provider/Timeout/RetryStrategy; discovery filing logs warnings to stderr\n\nFiles: 7 changed (store.go, store_test.go, campaign.go, campaign_test.go, orchestrator.go, phases.go, state_test uses typed constants)\nFindings: none new","created_at":"2026-02-12T00:56:53Z"},{"id":177,"issue_id":"cap-8na","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major/minor, 2 nits (informational, non-blocking)\nSummary: All 4 review findings addressed cleanly. Path traversal validation is thorough and idiomatic. Typed status constants follow existing project patterns. TODOs properly annotated. Polisher refined 6 doc comments.","created_at":"2026-02-12T01:32:09Z"},{"id":178,"issue_id":"cap-8na","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix security and code quality findings from sous-chef serve review of pipeline + campaign implementation\nBefore: state.FileStore accepted path traversal IDs; campaign used bare strings for status; scaffolded fields had no TODO markers; discovery filing failures were silent\nAfter: FileStore rejects traversal/empty/dot IDs with ErrInvalidID; typed CampaignStatus and TaskStatus constants; TODO(cap-6vp) annotations; discovery filing logs warnings to stderr\n\nProblems encountered:\n  - cap-6vp epic blocked by cap-awd dependency (likely backwards) — cannot close without --force\n  - filepath.Base(\".\") and filepath.Base(\"..\") return themselves — needed explicit dot-segment checks\n\nIssues filed: 0\nIssues closed: 1 (cap-8na)\nEpics closed: 0 (cap-6vp blocked by cap-awd)\n\nCommit: 543ed40\nPush: success","created_at":"2026-02-12T01:36:15Z"}]}
{"id":"cap-9qv","title":"Go CLI Tool","description":"Transform Epic 1's validated scripts into a Go CLI using Kong. Provider interface wraps claude subprocess. Orchestrator sequences phase pairs. Plain text status output. All behavior matches Epic 1's proven workflow.","acceptance_criteria":"capsule run produces same outcome as run-pipeline.sh; Handles NEEDS_WORK retries; Exits cleanly on ERROR; capsule abort cleans up; capsule version prints info","status":"closed","priority":0,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:02.986099934-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T17:37:16.696778136-08:00","closed_at":"2026-02-10T17:37:16.696778136-08:00","close_reason":"All 5 features closed. E2E coverage approved (critic). Epic report: docs/features/cap-9qv-acceptance.md","dependencies":[{"issue_id":"cap-9qv","depends_on_id":"cap-8ax","type":"blocks","created_at":"2026-02-06T08:28:17.396886897-08:00","created_by":"Sam Biggins"}],"comments":[{"id":110,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after auto-fixes)\nIssues: 0 critical/major, 3 minor auto-fixed, 3 nits auto-fixed\nSummary: Clean infrastructure change. Fixed shebang consistency, added informational-only comment, fixed xargs space edge case, added cd to git toplevel in pre-commit, set -euo pipefail.","created_at":"2026-02-09T03:40:33Z"},{"id":111,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add automated Go quality enforcement via Claude Code hooks and git pre-commit\nBefore: Zero automated quality checks — formatting, imports, build errors, lint all relied on manual discipline\nAfter: Two-layer enforcement — PostToolUse hook (goimports + build + vet per edit), pre-commit gate (golangci-lint + tests per commit)\n\nProblems encountered:\n  - golangci-lint v2 config format differs from v1: researched, used version: 2 with formatters section\n  - Pre-existing errcheck violation in main_test.go: suppressed with nolint directive\n  - PostToolUse hooks require session restart to activate: documented, validated manually\n\nIssues filed: 0\nCommits: d102b2f, bd8d9f5\nPush: skipped (ephemeral branch)","created_at":"2026-02-09T03:43:58Z"},{"id":118,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major/minor, 2 nits (deferred: stale comment in pre-commit.sh, optional make hooks target)\nSummary: Clean infrastructure fix. Hook correctly placed at .git/hooks/pre-commit.old. Documentation updates accurate and minimal.","created_at":"2026-02-09T04:32:58Z"},{"id":119,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major/minor, 3 nits (all deferred: root-level sed no-op, -short currently no-op since no tests use testing.Short() yet, comment phrasing)\nSummary: Well-structured incremental build optimization. Shell logic is sound, documentation is clear and consistent across CLAUDE.md, go-conventions.md, and hook scripts. Smoke test correctly updated for test-full.","created_at":"2026-02-09T05:07:54Z"},{"id":120,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add incremental build hooks and -short test convention to reduce per-edit and per-commit overhead\nBefore: PostToolUse ran go build/vet on entire project; pre-commit ran full lint+test suite; no -short separation\nAfter: PostToolUse scoped to edited package; pre-commit incremental (staged packages, --new-from-rev, -short); test/test-full Makefile targets; quality tiers documented\n\nProblems encountered:\n  - Polisher refinements applied as separate commit (cosmetic comment/wording changes)\n\nIssues filed: 0\n\nCommits: e493c9b, 0b8416f\nPush: success","created_at":"2026-02-09T05:41:41Z"},{"id":166,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major/minor, 2 nits (duplicate Kong URL, threshold not stated in preamble — both acceptable as-is)\nSummary: Docs-only change. All 20 links correct, TOC anchors valid, inline/reference split consistent with stated rationale. No polishing needed.","created_at":"2026-02-11T01:10:25Z"},{"id":167,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Align go-conventions.md with Google/Microsoft/Write the Docs style best practices\nBefore: All 21 links used reference-style with section-grouped definitions; no TOC; preamble lacked scope statement\nAfter: 17 short URLs inline at point of use; 3 long URLs kept as reference-style; TOC added; preamble states scope and exclusions\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommit: 15430ac\nPush: success","created_at":"2026-02-11T01:12:13Z"},{"id":168,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add Claude Code slash commands and project README for capsule CLI workflows\nBefore: No slash commands, no README — users needed to remember multi-step sequences and gotchas\nAfter: 5 operational commands (/capsule-setup, -run, -inspect, -cleanup, -gate) and a README documenting installation, setup, CLI reference, and workflow\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: e52fc8c, 818957a\nPush: success","created_at":"2026-02-11T04:04:34Z"},{"id":169,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 3 minor, 4 nits (none blocking)\nSummary: All changes well-structured, follow project conventions. Polisher made 4 refinements (simplified loop, simplified mock, 2x fmt.Errorf→errors.New). Minor findings filed for tidy phase.","created_at":"2026-02-11T06:37:19Z"},{"id":170,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE (round 2)\nStatus: completed\nVerdict: approved\nIssues: 2 minor auto-fixed (added test coverage for resolve failure warning + branch restoration assertion)\nSummary: All 3 review issues correctly addressed. Added missing test coverage identified by sous-chef. All tests pass.","created_at":"2026-02-11T06:46:33Z"},{"id":171,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Address 3 minor issues from sous-chef code review of UX review implementation\nBefore: MergeToMain left repo on wrong branch after non-conflict failure; Resolve swallowed all errors; no compile-time interface checks\nAfter: Branch restored on any merge failure; errors propagated when bd available; interface satisfaction verified at compile time\n\nProblems encountered:\n  - TestResolve_NoBD failed because bd is on PATH in dev env: split into two tests with skip guards\n\nIssues filed: 0\nIssues closed: 0\n\nCommit: 7de9455\nPush: success (origin/capsule-9qv)","created_at":"2026-02-11T06:53:34Z"},{"id":172,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major/minor, 2 nits (deferred: template whitespace cosmetics, line ref drift)\nSummary: Post-closure fix addressing 4 manual test findings. text/template migration clean, ErrNotFound discrimination correct, dead --debug removed, docs updated. All tests pass.","created_at":"2026-02-11T14:19:53Z"},{"id":173,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 found (2 nits, non-actionable)\nSummary: Greenfield narrative E2E smoke test reviewed. Clean code, robust mock design, thorough post-pipeline verification.","created_at":"2026-02-11T15:24:30Z"},{"id":174,"issue_id":"cap-9qv","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add greenfield narrative E2E smoke test for capsule binary\nBefore: No binary-level E2E test exercising full pipeline lifecycle\nAfter: TestSmoke_GreenfieldNarrative covers happy path + retry with mock claude\n\nProblems encountered:\n  - Mock git commit failed on retry (idempotent files): fixed with git diff --cached --quiet guard\n  - Bead status check case-sensitive: fixed with strings.ToLower\n  - Global call counter fragile: replaced with per-phase counters\n\nIssues filed: 0\nCommit: 679e28a (test), 467c379 (polish)\nPush: success","created_at":"2026-02-11T15:29:44Z"}]}
{"id":"cap-9qv.1","title":"Go project skeleton with Kong CLI and test harness","description":"As a developer, I want a Go project with Kong CLI, Makefile, and test harness so that I have a solid foundation for the capsule CLI tool.","acceptance_criteria":"Given the project, When go build ./... runs, Then a capsule binary is produced; Given the binary, When capsule version runs, Then version/commit/date is printed; Given the binary, When capsule run without args runs, Then usage is printed and exit code is non-zero; Given the Makefile, When make test runs, Then all tests pass","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:11.234402687-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T19:51:20.437563394-08:00","closed_at":"2026-02-08T19:51:20.437563394-08:00","close_reason":"All 3 child tasks complete: Go module init, Kong CLI setup, Makefile + CLAUDE.md","dependencies":[{"issue_id":"cap-9qv.1","depends_on_id":"cap-9qv","type":"parent-child","created_at":"2026-02-06T08:29:11.236047089-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-9qv.1.1","title":"Initialize Go module and directory structure","description":"go.mod, directory tree: cmd/capsule/main.go, internal/{provider,orchestrator,config,worktree,worklog,tui,prompt}/. Placeholder test in each package. go mod tidy. Deliverable: go build ./... and go test ./... pass","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:57.197319265-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T16:20:22.297339138-08:00","closed_at":"2026-02-08T16:20:22.297339138-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.1.1","depends_on_id":"cap-9qv.1","type":"parent-child","created_at":"2026-02-06T08:30:57.199112277-08:00","created_by":"Sam Biggins"}],"comments":[{"id":97,"issue_id":"cap-9qv.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-09T00:19:19Z"},{"id":98,"issue_id":"cap-9qv.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Initialize Go module and directory structure for the capsule CLI tool\nBefore: No Go project existed - only shell scripts and templates\nAfter: Go module with cmd/capsule entry point and 7 internal packages (provider, orchestrator, config, worktree, worklog, tui, prompt) all building and testing\n\nFiles: 16 changed (go.mod, main.go, 7 package files, 7 test files, .gitignore)\nFindings: none","created_at":"2026-02-09T00:20:26Z"},{"id":99,"issue_id":"cap-9qv.1.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after 1 auto-fix)\nIssues: 1 major auto-fixed (.gitignore overly broad pattern), 2 nits noted\nSummary: Clean minimal scaffold. Gitignore anchored to root to prevent cmd/capsule/ from being ignored.","created_at":"2026-02-09T00:32:11Z"},{"id":102,"issue_id":"cap-9qv.1.1","author":"Sam Biggins","text":"PHASE: SERVE (refinements)\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major, 3 nits (go.mod version, test name consistency, tui doc comment vagueness)\nAuto-fixed: 7 files — TestPlaceholder → TestPackageCompiles for naming consistency\nSummary: Clean scaffold refinements. Conventions guide is well-structured and reusable. Package doc comments accurate. All nits are cosmetic and will resolve naturally as real code is added.","created_at":"2026-02-09T01:52:21Z"},{"id":103,"issue_id":"cap-9qv.1.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Polish Go project scaffold with conventions guide, package docs, and test consistency\nBefore: Bare scaffold with no doc comments, no conventions guide, TestPlaceholder naming\nAfter: docs/go-conventions.md (7 sections), package doc comments on all internal packages, consistent TestPackageCompiles naming, cmd test coverage\n\nProblems encountered:\n  - go.mod go 1.25 flagged as potentially unreleased: researched, confirmed current stable (1.25.7)\n  - TestPlaceholder vs TestMainRuns naming inconsistency: polisher auto-fixed, comment adjusted\n\nIssues filed: 0\nBeads comments added: cap-9qv.2 (provider interface design), cap-9qv.5 (orchestrator interface design)\n\nCommits: 7af19a8, d046838, 0f580a7, 73e4062\nPush: skipped (ephemeral branch)","created_at":"2026-02-09T01:56:25Z"}]}
{"id":"cap-9qv.1.2","title":"Set up Kong CLI with version and run commands","description":"Kong CLI struct with Version, Run, Abort, Clean commands. Version prints ldflags version info. Run takes bead-id arg + --provider, --timeout, --debug flags. Abort takes bead-id + --force. Depends on: t-2.1.1. Deliverable: Kong CLI with all command stubs","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:57.258427187-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T18:48:22.261008676-08:00","closed_at":"2026-02-08T18:48:22.261008676-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.1.2","depends_on_id":"cap-9qv.1","type":"parent-child","created_at":"2026-02-06T08:30:57.260009247-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.1.2","depends_on_id":"cap-9qv.1.1","type":"blocks","created_at":"2026-02-06T08:32:09.483759417-08:00","created_by":"Sam Biggins"}],"comments":[{"id":104,"issue_id":"cap-9qv.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 3 nits found (2 auto-fixed, 0 to-file)\nSummary: Kong CLI conventions section matches existing doc style. Fixed BindTo→Bind for concrete type accuracy, refined BeforeApply wording. Testing guidance (kong.New vs kong.Parse) is valuable.","created_at":"2026-02-09T02:43:07Z"},{"id":105,"issue_id":"cap-9qv.1.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Provide idiomatic Kong patterns so cap-9qv.1.2 implementation has a reference\nBefore: go-conventions.md had 7 sections, no CLI guidance\nAfter: Section 8 covers Run() methods, kong.New testing, Bind DI, version injection\n\nProblems encountered:\n  - BindTo used for concrete type: fixed to Bind per sous-chef review\n\nIssues filed: 0\nCommit: 44011ef\nPush: skipped (ephemeral branch)","created_at":"2026-02-09T02:44:18Z"},{"id":106,"issue_id":"cap-9qv.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-09T02:46:00Z"},{"id":107,"issue_id":"cap-9qv.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Set up Kong CLI with all command stubs and version support\nBefore: Placeholder main.go with no CLI parsing\nAfter: Kong CLI with run/abort/clean commands, version flag, ldflags injection, 9 passing tests\n\nFiles: 3 changed (main.go, main_test.go, go.mod/go.sum)\nFindings: go-conventions.md Section 8 needs update — default command with args not supported when siblings exist (Kong limitation)","created_at":"2026-02-09T02:48:27Z"},{"id":108,"issue_id":"cap-9qv.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 2 minor + 1 nit found (3 auto-fixed, 0 to-file)\nSummary: Clean Kong CLI with good test coverage. Fixed: go.mod indirect→direct, main() aligned with FatalIfErrorf convention, version test type assertion hardened.","created_at":"2026-02-09T02:50:49Z"},{"id":109,"issue_id":"cap-9qv.1.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Set up Kong CLI with all command stubs and version support\nBefore: Placeholder main.go printing 'capsule', no CLI parsing\nAfter: Kong CLI with run/abort/clean commands, version flag, ldflags, 9 tests\n\nProblems encountered:\n  - Kong default:1 incompatible with sibling commands having args: removed default\n  - go.mod marked kong as indirect: fixed with go mod tidy\n  - main() used manual error handling: aligned with FatalIfErrorf convention\n\nIssues filed: 0 (doc fix applied inline)\nCommit: 24a9384\nPush: skipped (ephemeral branch)","created_at":"2026-02-09T02:52:07Z"}]}
{"id":"cap-9qv.1.3","title":"Create Makefile and CLAUDE.md","description":"build/test/lint/clean targets. CLAUDE.md with project conventions. tdd: false. Depends on: t-2.1.1. Deliverable: Makefile + CLAUDE.md","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:30:57.317390045-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T19:48:17.438162385-08:00","closed_at":"2026-02-08T19:48:17.438162385-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.1.3","depends_on_id":"cap-9qv.1","type":"parent-child","created_at":"2026-02-06T08:30:57.319203882-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.1.3","depends_on_id":"cap-9qv.1.1","type":"blocks","created_at":"2026-02-06T08:32:09.541903268-08:00","created_by":"Sam Biggins"}],"comments":[{"id":112,"issue_id":"cap-9qv.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-09T03:46:47Z"},{"id":113,"issue_id":"cap-9qv.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create Makefile with build/test/lint/clean targets and CLAUDE.md with project conventions\nBefore: No build automation or agent-facing project documentation\nAfter: make build/test/lint/clean targets work; CLAUDE.md provides concise project conventions for AI agents\n\nFiles: 2 changed (Makefile, CLAUDE.md)\nFindings: none","created_at":"2026-02-09T03:48:24Z"},{"id":114,"issue_id":"cap-9qv.1.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fix)\nIssues: 0 critical, 0 major, 1 minor (fixed: Bubble Tea label inaccuracy in CLAUDE.md), 2 nits (deferred)\nSummary: Clean Makefile with proper version injection. CLAUDE.md accurately documents project conventions. Minor label fix applied.","created_at":"2026-02-09T03:50:52Z"},{"id":115,"issue_id":"cap-9qv.1.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create build automation and agent-facing project documentation\nBefore: No Makefile or CLAUDE.md - manual build commands needed\nAfter: make build/test/lint/clean targets work; CLAUDE.md documents conventions\n\nProblems encountered:\n  - None\n\nIssues filed:\n  - None\n\nFeature closed: cap-9qv.1 (all 3 children complete)\n\nCommit: 1e77e5f\nPush: origin/capsule-9qv","created_at":"2026-02-09T03:51:57Z"}]}
{"id":"cap-9qv.2","title":"Provider interface wrapping headless claude subprocess","description":"As an orchestrator, I want a Provider interface with Execute() so that I can call AI agents as subprocess calls with structured output parsing.","acceptance_criteria":"Given a Provider, When Execute(ctx, prompt, workDir) is called, Then it returns Result{Output, ExitCode, Duration, Signal}; Given ClaudeProvider, When Execute runs, Then it invokes claude -p with correct flags in workDir; Given a timeout context, When the subprocess exceeds it, Then the process is killed and a TimeoutError is returned; Given claude output with JSON signal, When Result is returned, Then Signal field contains parsed PhaseResult","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:11.291760858-08:00","created_by":"Sam Biggins","updated_at":"2026-02-09T17:30:53.792731028-08:00","closed_at":"2026-02-09T17:30:53.792731028-08:00","close_reason":"All 3 children complete: Provider interface (2.1), ClaudeProvider (2.2), Registry (2.3). Lint clean, all tests pass.","dependencies":[{"issue_id":"cap-9qv.2","depends_on_id":"cap-9qv","type":"parent-child","created_at":"2026-02-06T08:29:11.293416506-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.2","depends_on_id":"cap-9qv.1","type":"blocks","created_at":"2026-02-08T16:10:47.241009378-08:00","created_by":"Sam Biggins"}],"comments":[{"id":100,"issue_id":"cap-9qv.2","author":"Sam Biggins","text":"Interface design: export concrete types (structs) from provider package. Consumers (orchestrator, etc.) define their own interfaces matching only the methods they need. This follows 'accept interfaces, return structs' — see docs/go-conventions.md §2.","created_at":"2026-02-09T01:47:15Z"}]}
{"id":"cap-9qv.2.1","title":"Define Provider interface, Result, and Signal types","description":"internal/provider/provider.go: Provider interface with Name() and Execute(ctx, prompt, workDir). Result{Output, ExitCode, Duration, Signal}. Signal = parsed PhaseResult{Status, Feedback, FilesChanged, Summary}. MockProvider for testing. SignalParser extracts JSON from output. Error types: TimeoutError, ProviderError, SignalParseError. Tests: mock execute, signal parsing (valid, missing, malformed), error type matching with errors.Is. Deliverable: Provider interface with signal parsing and error types","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:07.612763565-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T22:01:24.793547996-08:00","closed_at":"2026-02-08T22:01:24.793547996-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.2.1","depends_on_id":"cap-9qv.2","type":"parent-child","created_at":"2026-02-06T08:31:07.614403576-08:00","created_by":"Sam Biggins"}],"comments":[{"id":121,"issue_id":"cap-9qv.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-09T05:57:50Z"},{"id":122,"issue_id":"cap-9qv.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Define the core Provider interface and supporting types for AI subprocess execution with structured signal parsing\nBefore: Empty stub provider package with only a package declaration\nAfter: Full Provider interface, Result/Signal types, SignalParser (extracts last JSON from phase output), three error types (SignalParseError, ProviderError, TimeoutError), and MockProvider for testing\n\nFiles: 2 changed (provider.go, provider_test.go)\nFindings: none","created_at":"2026-02-09T06:01:24Z"},{"id":123,"issue_id":"cap-9qv.2.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 2 minor (deferred), 3 nits (deferred)\nSummary: Clean, well-structured foundation. Minor items flagged for future: MockProvider nil guard, interface location convention. All nits are style-only.","created_at":"2026-02-09T06:04:05Z"},{"id":124,"issue_id":"cap-9qv.2.1","author":"Sam Biggins","text":"PHASE: SERVE (re-review)\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all deferred)\nSummary: Both prior issues properly resolved. Provider interface correctly placed in orchestrator. MockProvider nil guard clean with test. Compile-time satisfaction check excellent.","created_at":"2026-02-09T06:08:25Z"},{"id":125,"issue_id":"cap-9qv.2.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Define core provider abstractions for AI subprocess execution with structured signal parsing\nBefore: Empty stub provider and orchestrator packages with only package declarations\nAfter: Full Provider interface in orchestrator, Signal/Result/error types and ParseSignal in provider, MockProvider with nil guard, 19 passing tests\n\nProblems encountered:\n  - Prior review flagged interface location and nil guard: addressed in rework\n\nIssues filed: 0\nCommit: 88f1da0\nPush: success","created_at":"2026-02-09T06:09:38Z"}]}
{"id":"cap-9qv.2.2","title":"Implement ClaudeProvider with subprocess execution","description":"internal/provider/claude.go: Calls claude -p \u003cprompt\u003e --dangerously-skip-permissions in workDir. Uses exec.CommandContext for timeout. Captures stdout+stderr. Parses signal from output. Re-exec pattern for unit tests. Error handling: process kill on timeout, non-zero exit without signal → ProviderError with stderr content. Depends on: t-2.2.1. Deliverable: ClaudeProvider with re-exec tests","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:07.671600368-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T22:16:28.456905682-08:00","closed_at":"2026-02-08T22:16:28.456905682-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.2.2","depends_on_id":"cap-9qv.2","type":"parent-child","created_at":"2026-02-06T08:31:07.673182044-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.2.2","depends_on_id":"cap-9qv.2.1","type":"blocks","created_at":"2026-02-06T08:32:09.602020573-08:00","created_by":"Sam Biggins"}],"comments":[{"id":126,"issue_id":"cap-9qv.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-09T06:12:36Z"},{"id":127,"issue_id":"cap-9qv.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Implement ClaudeProvider that wraps claude CLI as a subprocess with timeout/error handling\nBefore: Only types and interfaces existed (Signal, Result, error types) - no concrete provider implementation\nAfter: ClaudeProvider executes claude -p \u003cprompt\u003e --dangerously-skip-permissions, captures stdout/stderr, handles timeouts via context, returns ProviderError on non-zero exit\n\nFiles: 2 changed (claude.go, claude_test.go)\nFindings: none","created_at":"2026-02-09T06:16:36Z"},{"id":128,"issue_id":"cap-9qv.2.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 2 minor (deferred), 3 nits (deferred)\nSummary: Clean implementation following project conventions. cmdBuilder injection for testability, re-exec pattern correctly implemented. Minor: pre-cancelled context returns TimeoutError (semantic mismatch, low impact), no WaitDelay on CommandContext (buffer may be incomplete on timeout path, low impact since TimeoutError doesn't use it).","created_at":"2026-02-09T06:20:00Z"},{"id":129,"issue_id":"cap-9qv.2.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Implement concrete ClaudeProvider wrapping claude CLI as subprocess with timeout/error handling\nBefore: Only types and interfaces existed (Signal, Result, error types) - no concrete provider\nAfter: ClaudeProvider executes claude -p with subprocess management, timeout detection, context cancellation, stderr capture\n\nProblems encountered:\n  - Re-exec helper needed context propagation for timeout tests: fixed by passing ctx to helperCommand\n  - gocritic flagged os.Exit after defer: restructured to explicit os.Exit per branch\n  - Serve found TimeoutError for cancelled context: fixed with DeadlineExceeded check\n  - Serve flagged missing WaitDelay: added cmd.WaitDelay for pipe draining\n\nIssues filed: 0\nCommit: 5407aa7\nPush: success","created_at":"2026-02-09T06:23:05Z"}]}
{"id":"cap-9qv.2.3","title":"Add provider registry with factory pattern","description":"internal/provider/registry.go: Register(name, factory), NewProvider(name), AvailableProviders(). Error handling: unknown provider returns clear error. Depends on: t-2.2.1. Deliverable: Provider registry","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:07.728236668-08:00","created_by":"Sam Biggins","updated_at":"2026-02-09T15:34:28.048838622-08:00","closed_at":"2026-02-09T15:34:28.048838622-08:00","close_reason":"Registry implemented with Executor interface, Factory type, UnknownProviderError. All 9 tests pass, lint clean.","dependencies":[{"issue_id":"cap-9qv.2.3","depends_on_id":"cap-9qv.2","type":"parent-child","created_at":"2026-02-06T08:31:07.729823288-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.2.3","depends_on_id":"cap-9qv.2.1","type":"blocks","created_at":"2026-02-06T08:32:09.662280311-08:00","created_by":"Sam Biggins"}],"comments":[{"id":132,"issue_id":"cap-9qv.2.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-09T23:28:16Z"},{"id":133,"issue_id":"cap-9qv.2.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 2 minor (deferred), 3 nits (deferred)\nSummary: Clean factory-pattern registry. Minor: Executor interface placement is pragmatic exception to convention (registry is consumer), Register() lacks nil/empty guards (startup-only, low risk). Nits: compile-time checks and TestExecutorInterface placement are organizational.","created_at":"2026-02-09T23:40:50Z"},{"id":134,"issue_id":"cap-9qv.2.3","author":"Sam Biggins","text":"PHASE: SERVE (re-review)\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 2 nits (deferred)\nSummary: All three findings cleanly addressed. Nil/empty guards use idiomatic panics for programmer errors. Compile-time checks co-located with types. TestExecutorInterface properly relocated. Nits: MockProvider check in prod code (defensible since type is in prod), panic tests could assert message.","created_at":"2026-02-10T01:29:50Z"},{"id":135,"issue_id":"cap-9qv.2.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add provider registry with factory pattern for name-based provider instantiation\nBefore: Provider package had ClaudeProvider and MockProvider but no way to look up providers by name\nAfter: Registry with Register/NewProvider/AvailableProviders, Executor interface, UnknownProviderError with hints, nil/empty guards, compile-time checks co-located with types\n\nProblems encountered:\n  - Serve flagged nil/empty guards, interface check placement, test organization: all addressed in rework\n\nIssues filed: 0\nFeature closed: cap-9qv.2 (Provider interface - all 3 children complete)\nCommit: eb8baba\nPush: success","created_at":"2026-02-10T01:31:29Z"}]}
{"id":"cap-9qv.3","title":"Configuration loading and external prompt management","description":"As a user, I want capsule to load config from YAML and prompts from external files so that I can customize behavior per-project.","acceptance_criteria":"Given a config.yaml, When capsule loads config, Then Runtime.Provider, Runtime.Timeout, and Worktree.BaseDir are set; Given no config file, When capsule loads config, Then sensible defaults are used; Given prompts/ directory, When prompt loader loads test-writer, Then prompts/test-writer.md content is returned; Given prompt context, When Compose is called, Then bead info and feedback are interpolated into the prompt","status":"closed","priority":1,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:11.350132002-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T05:07:43.554451941-08:00","closed_at":"2026-02-10T05:07:43.554451941-08:00","close_reason":"All acceptance criteria met: config loading (cap-9qv.3.1) and prompt loader/composer (cap-9qv.3.2) both implemented and tested","dependencies":[{"issue_id":"cap-9qv.3","depends_on_id":"cap-9qv","type":"parent-child","created_at":"2026-02-06T08:29:11.351750672-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.3","depends_on_id":"cap-9qv.2","type":"blocks","created_at":"2026-02-08T16:10:48.438083727-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-9qv.3.1","title":"Implement Config struct and layered loading","description":"internal/config/config.go: Config{Runtime{Provider, Timeout}, Worktree{BaseDir}}. Load(path), DefaultConfig(), env var overrides. Priority: defaults \u003c user (~/.config/capsule/) \u003c project (.capsule/) \u003c env. Error handling: missing file = use defaults, invalid YAML = error. Deliverable: Config loading with layered priority","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:12.62700604-08:00","created_by":"Sam Biggins","updated_at":"2026-02-09T18:06:16.224710211-08:00","closed_at":"2026-02-09T18:06:16.224710211-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.3.1","depends_on_id":"cap-9qv.3","type":"parent-child","created_at":"2026-02-06T08:31:12.628695812-08:00","created_by":"Sam Biggins"}],"comments":[{"id":136,"issue_id":"cap-9qv.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-10T02:02:53Z"},{"id":137,"issue_id":"cap-9qv.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Implement layered YAML config loading so capsule can be customized per-project and per-user\nBefore: Stub config package with only a package declaration\nAfter: Config struct with Runtime{Provider, Timeout} and Worktree{BaseDir}, Load() for single file, LoadLayered() for layered priority (defaults \u003c user \u003c project), ApplyEnv() for env var overrides (CAPSULE_PROVIDER, CAPSULE_TIMEOUT, CAPSULE_WORKTREE_BASE_DIR)\n\nFiles: 3 changed (config.go, config_test.go, go.mod/go.sum)\nFindings: none","created_at":"2026-02-10T02:06:24Z"},{"id":138,"issue_id":"cap-9qv.3.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after addressing findings)\nIssues: 0 critical, 1 major (fixed), 3 minor (2 fixed, 1 documented), 2 nits (deferred)\nSummary: Clean implementation with thorough docs. Fixed: yaml.v3 indirect marker (go mod tidy), comment-only YAML EOF handling, added all-missing LoadLayered test, clarified Load vs LoadLayered doc comment. Deferred nits: return type consistency and test name conventions (both acceptable as-is).","created_at":"2026-02-10T05:24:02Z"},{"id":139,"issue_id":"cap-9qv.3.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Implement layered YAML config loading so capsule can be customized per-project and per-user\nBefore: Stub config package with only a package declaration\nAfter: Full config loading with layered priority (defaults \u003c user \u003c project \u003c env), strict parsing, validation, and comprehensive documentation\n\nProblems encountered:\n  - yaml.v3 marked as indirect in go.mod: fixed with go mod tidy\n  - Comment-only YAML files produced EOF error: fixed with io.EOF check in Load and loadLayer\n  - Sous-chef flagged missing edge case tests: added TestLoad_CommentOnlyFile and TestLoadLayered_AllMissing\n\nIssues filed: 0\nCommit: 1e49b23\nPush: success","created_at":"2026-02-10T05:27:34Z"}]}
{"id":"cap-9qv.3.2","title":"Implement prompt Loader and Composer","description":"internal/prompt/loader.go: Loader{promptsDir}. Load(phaseName) reads prompts/\u003cname\u003e.md. Compose(phaseName, Context{BeadID, Title, Description, Feedback}) interpolates context into loaded template. Error handling: missing prompt file, empty prompt, template error. Deliverable: Prompt loader with compose","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:12.684712157-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T05:07:08.583535804-08:00","closed_at":"2026-02-10T05:07:08.583535804-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.3.2","depends_on_id":"cap-9qv.3","type":"parent-child","created_at":"2026-02-06T08:31:12.686368701-08:00","created_by":"Sam Biggins"}],"comments":[{"id":140,"issue_id":"cap-9qv.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-10T13:01:48Z"},{"id":141,"issue_id":"cap-9qv.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add prompt loading and template composition so the orchestrator can build phase-specific prompts with bead context\nBefore: Empty prompt package with only a package declaration stub\nAfter: Loader reads prompt markdown files from a directory; Compose interpolates BeadID, Title, Description, and Feedback into Go text/templates\n\nFiles: 2 changed (prompt.go, prompt_test.go)\nFindings: None","created_at":"2026-02-10T13:07:17Z"},{"id":142,"issue_id":"cap-9qv.3.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after addressing findings)\nIssues: 0 critical, 2 major (fixed), 2 minor (fixed), 1 nit (deferred)\nSummary: Clean implementation. Fixed: missingkey=error for template safety, ErrEmpty sentinel error, path traversal validation. Deferred: Load export (reasonable as public API). Template syntax mismatch with summary.md is expected boundary between shell and Go pipelines.","created_at":"2026-02-10T13:12:13Z"},{"id":143,"issue_id":"cap-9qv.3.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add prompt loading and template composition so the orchestrator can build phase-specific prompts with bead context\nBefore: Empty prompt package with only a package declaration stub\nAfter: Loader reads prompt markdown files; Compose interpolates BeadID, Title, Description, Feedback via text/template with safety guards (missingkey=error, path traversal validation, ErrEmpty sentinel)\n\nProblems encountered:\n  - Serve flagged missingkey silent drops: fixed with Option(missingkey=error)\n  - Serve flagged missing sentinel error: added ErrEmpty\n  - Serve flagged path traversal: added validation\n  - Option syntax was wrong (two args vs one): fixed to Option(missingkey=error)\n\nIssues filed: 0\nFeature closed: cap-9qv.3 (Configuration loading - all 2 children complete)\nCommit: a473893\nPush: success","created_at":"2026-02-10T13:13:24Z"}]}
{"id":"cap-9qv.4","title":"Worktree creation/cleanup and worklog lifecycle","description":"As an orchestrator, I want worktree and worklog management so that each mission runs in isolation with full context tracking.","acceptance_criteria":"Given a bead ID, When worktree.Create runs, Then .capsule/worktrees/\u003cid\u003e/ exists on branch capsule-\u003cid\u003e; Given a bead context, When worklog.Create runs, Then worklog.md in worktree has mission briefing; Given a completed mission, When worklog.Archive runs, Then worklog is in .capsule/logs/\u003cid\u003e/; Given a worktree, When worktree.Remove runs, Then worktree and branch are cleaned up","status":"closed","priority":1,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:11.41069531-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T07:51:32.788485912-08:00","closed_at":"2026-02-10T07:51:32.788485912-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.4","depends_on_id":"cap-9qv","type":"parent-child","created_at":"2026-02-06T08:29:11.412510644-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.4","depends_on_id":"cap-9qv.3","type":"blocks","created_at":"2026-02-08T16:10:49.103941378-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-9qv.4.1","title":"Implement worktree Manager (create/remove/list/exists)","description":"internal/worktree/manager.go — port from legacy, simplified. Create(id, baseBranch), Remove(id, deleteBranch), List(), Exists(id). Error handling: already exists, git errors, orphaned worktrees. Tests: real git init in t.TempDir. Deliverable: Worktree manager with git tests","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:18.836447838-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T06:01:49.870050369-08:00","closed_at":"2026-02-10T06:01:49.870050369-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.4.1","depends_on_id":"cap-9qv.4","type":"parent-child","created_at":"2026-02-06T08:31:18.838256182-08:00","created_by":"Sam Biggins"}],"comments":[{"id":146,"issue_id":"cap-9qv.4.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-10T13:57:04Z"},{"id":147,"issue_id":"cap-9qv.4.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Port legacy shell worktree management to Go with proper error handling\nBefore: No Go worktree management — shell scripts handled worktree lifecycle\nAfter: Manager struct with Create/Remove/List/Exists, sentinel errors, real git tests\n\nFiles: 2 changed (worktree.go, worktree_test.go)\nFindings: none","created_at":"2026-02-10T14:01:49Z"},{"id":148,"issue_id":"cap-9qv.4.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after auto-fixes)\nIssues: 0 critical, 1 major auto-fixed (ID validation), 0 minor, 1 nit auto-fixed\nSummary: Clean implementation. Added path traversal protection via validateID, removed redundant test sort. All quality gates pass.","created_at":"2026-02-10T14:20:19Z"},{"id":149,"issue_id":"cap-9qv.4.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Port legacy shell worktree management to Go with proper error handling and security\nBefore: Stub worktree package with only a package declaration\nAfter: Full Manager with Create/Remove/List/Exists/Prune, input validation (path traversal + flag injection), List cross-references git worktree registry, comprehensive documentation\n\nProblems encountered:\n  - Sous-chef flagged path traversal risk: added validateID with tests\n  - Research review flagged flag injection (- prefix): added guard + test\n  - Follow-up beads for Prune and List accuracy: addressed in same session\n\nIssues filed: 2 (cap-f1r, cap-1j1) — both addressed and closed\nIssues closed: 3 (cap-9qv.4.1, cap-f1r, cap-1j1)\n\nCommit: f274703\nPush: success","created_at":"2026-02-10T14:39:07Z"}]}
{"id":"cap-9qv.4.2","title":"Implement worklog Creator and Archiver","description":"internal/worklog/worklog.go: Create(worktreePath, BeadContext) — instantiate template. AppendPhaseEntry(worktreePath, PhaseEntry) — add phase result. Archive(worktreePath, archiveDir, beadID) — move to .capsule/logs/. Error handling: missing template, write errors, archive dir creation. Deliverable: Worklog create/append/archive","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:18.898411171-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T06:53:15.360321146-08:00","closed_at":"2026-02-10T06:53:15.360321146-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.4.2","depends_on_id":"cap-9qv.4","type":"parent-child","created_at":"2026-02-06T08:31:18.979727195-08:00","created_by":"Sam Biggins"}],"comments":[{"id":150,"issue_id":"cap-9qv.4.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Implement worklog template instantiation, phase entry append, and archival for the capsule pipeline\nBefore: Empty worklog package with only a package declaration and placeholder test\nAfter: Full worklog package with Create (template instantiation with placeholder substitution), AppendPhaseEntry (append phase results to worklog), and Archive (copy worklog to archive directory)\n\nFiles: 2 changed (worklog.go, worklog_test.go)\nFindings: none","created_at":"2026-02-10T14:53:22Z"},{"id":151,"issue_id":"cap-9qv.4.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: NEEDS_CHANGES (minor)\nIssues: 5 found (0 critical, 0 major-actual, 4 minor, 1 nit)\nSummary: Clean implementation with good test coverage. Reviewer flagged copy-vs-move as major but shell scripts confirm copy is correct. Minor improvements: add sentinel errors per project convention, validate beadID in Archive, use O_EXCL in Create for atomic check-and-create, wrap final WriteFile error in Archive.","created_at":"2026-02-10T14:58:37Z"},{"id":152,"issue_id":"cap-9qv.4.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after auto-fixes)\nIssues: 0 critical/major, 2 nits auto-fixed, 3 nits dismissed\nSummary: Clean implementation matching worktree patterns. Auto-fixed: ctx→bead rename in tests, Create WriteFile error wrapping for consistency.","created_at":"2026-02-10T15:32:46Z"},{"id":153,"issue_id":"cap-9qv.4.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add sentinel errors, beadID validation, and error wrapping to worklog package\nBefore: worklog functions returned string-based errors with no caller-checkable conditions\nAfter: ErrAlreadyExists, ErrNotFound, ErrInvalidID sentinels; beadID validation in Archive; consistent error wrapping\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none - all review nits auto-fixed or dismissed)\n\nCommits: 2d8c5c2, 602dae6\nPush: success","created_at":"2026-02-10T15:44:36Z"}]}
{"id":"cap-9qv.5","title":"Orchestrator sequencing phase pairs with retry logic","description":"As a user running capsule run \u003cbead-id\u003e, I want the orchestrator to execute all phase pairs with retries and status output so that I see deterministic progress through the pipeline.","acceptance_criteria":"Given a bead ID, When RunPipeline executes, Then phases run in order: test-writer→test-review→execute→execute-review→sign-off→merge; Given NEEDS_WORK from a reviewer, When retry logic runs, Then the worker phase re-runs with feedback (up to configured max); Given ERROR from any phase, When pipeline detects it, Then pipeline aborts with diagnostic error; Given each phase transition, When StatusCallback fires, Then it includes phase, status, attempt, maxRetry; Given successful pipeline, When complete, Then worktree merged and worklog archived","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:11.479853854-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T17:37:12.351256837-08:00","closed_at":"2026-02-10T17:37:12.351256837-08:00","close_reason":"All 3 tasks closed. BDD tests approved (maître). Smoke tests cover exit codes. Acceptance report: docs/features/cap-9qv.5-acceptance.md","dependencies":[{"issue_id":"cap-9qv.5","depends_on_id":"cap-9qv","type":"parent-child","created_at":"2026-02-06T08:29:11.481476084-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5","depends_on_id":"cap-9qv.4","type":"blocks","created_at":"2026-02-08T16:10:49.834637733-08:00","created_by":"Sam Biggins"}],"comments":[{"id":101,"issue_id":"cap-9qv.5","author":"Sam Biggins","text":"Interface design: orchestrator defines Provider, WorktreeManager, and PromptLoader interfaces locally (consumer-defined). Each interface includes only the methods orchestrator actually calls. Producer packages export concrete structs that implicitly satisfy these interfaces.","created_at":"2026-02-09T01:47:19Z"}]}
{"id":"cap-9qv.5.1","title":"Define phase registry and StatusUpdate types","description":"internal/orchestrator/phases.go: PhaseKind{Worker, Reviewer}, PhaseDefinition{Name, Kind, MaxRetries, RetryTarget}. StatusUpdate{BeadID, Phase, Status, Progress, Attempt, MaxRetry}. StatusCallback func. Register all 6 phases. Deliverable: Phase registry and status types","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:30.433049328-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T08:37:46.279161996-08:00","closed_at":"2026-02-10T08:37:46.279161996-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.5.1","depends_on_id":"cap-9qv.5","type":"parent-child","created_at":"2026-02-06T08:31:30.438066248-08:00","created_by":"Sam Biggins"}],"comments":[{"id":156,"issue_id":"cap-9qv.5.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-10T16:34:57Z"},{"id":157,"issue_id":"cap-9qv.5.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Define phase registry types and status callback for orchestrator pipeline sequencing\nBefore: Orchestrator package had only a Provider interface stub with no pipeline phase awareness\nAfter: Full phase registry (6 phases in order), PhaseKind (Worker/Reviewer), PhaseDefinition (name, kind, retries, retry target), StatusUpdate, StatusCallback, and PhaseStatus types\n\nFiles: 2 changed (phases.go, phases_test.go)\nFindings: none","created_at":"2026-02-10T16:37:50Z"},{"id":158,"issue_id":"cap-9qv.5.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical/major/minor, 2 nits (both deferred: MaxRetries semantics clarification for 5.2, PhaseStatus String() method unnecessary since it's string-typed)\nSummary: Clean type definitions accurately modeling the shell pipeline. Tests well-structured with good property decomposition. Polisher moved GWT comments from doc-level to inline per project convention.","created_at":"2026-02-10T16:55:19Z"},{"id":159,"issue_id":"cap-9qv.5.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Define phase registry types and status callback for orchestrator pipeline sequencing\nBefore: Orchestrator package had only a Provider interface stub with no pipeline phase awareness\nAfter: Full phase registry (6 phases in order), PhaseKind (Worker/Reviewer), PhaseDefinition (name, kind, retries, retry target), StatusUpdate, StatusCallback, and PhaseStatus types\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommit: e87c4fd\nPush: success","created_at":"2026-02-10T20:06:51Z"}]}
{"id":"cap-9qv.5.2","title":"Implement Orchestrator with runPhasePair loop","description":"internal/orchestrator/orchestrator.go: Orchestrator struct with provider, promptLoader, worktreeMgr, worklogMgr, config, statusCallback. Functional options. runPhasePair(ctx, worker, reviewer, feedback) — generic loop. RunPipeline(ctx, beadID) — sequences all phase pairs. Handles: worktree creation, worklog creation, phase execution, retry logic, merge, archive. Abort on ERROR. Error handling: structured PipelineError with phase context. Depends on: t-2.5.1, t-2.2.1, t-2.3.2, t-2.4.1, t-2.4.2. Deliverable: Orchestrator with full pipeline and tests","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:30.505770343-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T12:28:37.36030133-08:00","closed_at":"2026-02-10T12:28:37.36030133-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.5.2","depends_on_id":"cap-9qv.5","type":"parent-child","created_at":"2026-02-06T08:31:30.50738879-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.2","depends_on_id":"cap-9qv.5.1","type":"blocks","created_at":"2026-02-06T08:32:09.721935804-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.2","depends_on_id":"cap-9qv.2.1","type":"blocks","created_at":"2026-02-06T08:32:09.78699985-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.2","depends_on_id":"cap-9qv.3.2","type":"blocks","created_at":"2026-02-06T08:32:09.845570718-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.2","depends_on_id":"cap-9qv.4.1","type":"blocks","created_at":"2026-02-06T08:32:09.905856007-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.2","depends_on_id":"cap-9qv.4.2","type":"blocks","created_at":"2026-02-06T08:32:09.971248304-08:00","created_by":"Sam Biggins"}],"comments":[{"id":160,"issue_id":"cap-9qv.5.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-10T20:12:21Z"},{"id":161,"issue_id":"cap-9qv.5.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Implement the core orchestrator that sequences pipeline phases with retry logic\nBefore: Only type definitions and interfaces existed (phases.go, Provider interface); no pipeline execution\nAfter: Full Orchestrator with RunPipeline (6-phase sequential execution), runPhasePair (worker-reviewer retry loop), executePhase (prompt compose → provider execute → signal parse), PipelineError with phase context, and consumer-defined interfaces (PromptLoader, WorktreeManager, WorklogManager)\n\nFiles: 2 changed (orchestrator.go, orchestrator_test.go)\nFindings: none","created_at":"2026-02-10T20:28:37Z"},{"id":162,"issue_id":"cap-9qv.5.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 2 major fixed (nil promptLoader guard, worker PhasePassed notification), 1 major noted (worktree cleanup deferred to CLI wiring), 2 minor fixed (error format for setup/teardown, NEEDS_WORK comment), 1 nit fixed\nSummary: Well-structured orchestrator with clean interfaces, comprehensive tests. All major issues addressed. Worktree cleanup intentionally deferred to cap-9qv.5.3.","created_at":"2026-02-10T21:10:55Z"},{"id":163,"issue_id":"cap-9qv.5.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Implement the core orchestrator that sequences pipeline phases with retry logic\nBefore: Only type definitions and interfaces existed (phases.go, Provider interface); no pipeline execution capability\nAfter: Full Orchestrator with RunPipeline (6-phase sequential execution), runPhasePair (worker-reviewer retry loop with feedback propagation), PipelineError with phase context, and consumer-defined interfaces (PromptLoader, WorktreeManager, WorklogManager)\n\nProblems encountered:\n  - Taster found dead code in BaseBranch test: cleaned up immediately\n  - Sous-chef found nil promptLoader panic risk: added guard in RunPipeline\n  - Sous-chef found missing worker PhasePassed notification: added to runPhasePair\n\nIssues filed: 0\nCommit: 960f847\nPush: success","created_at":"2026-02-10T21:15:27Z"}]}
{"id":"cap-9qv.5.3","title":"Wire orchestrator into CLI run command with status output","description":"Wire RunCmd → config → provider → orchestrator → StatusCallback. Plain text StatusCallback prints timestamped phase lines. Exit codes: 0=success, 1=pipeline failure, 2=setup error. Add abort and clean commands. Error handling: config errors, provider errors, graceful Ctrl+C. Depends on: t-2.5.2, t-2.1.2, t-2.3.1. Deliverable: CLI fully wired to orchestrator with status output","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:30.564018691-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T16:26:11.712060546-08:00","closed_at":"2026-02-10T16:26:11.712060546-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-9qv.5.3","depends_on_id":"cap-9qv.5","type":"parent-child","created_at":"2026-02-06T08:31:30.56566248-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.3","depends_on_id":"cap-9qv.5.2","type":"blocks","created_at":"2026-02-06T08:32:10.030813334-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.3","depends_on_id":"cap-9qv.1.2","type":"blocks","created_at":"2026-02-06T08:32:10.095308416-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-9qv.5.3","depends_on_id":"cap-9qv.3.1","type":"blocks","created_at":"2026-02-06T08:32:10.156733351-08:00","created_by":"Sam Biggins"}],"comments":[{"id":164,"issue_id":"cap-9qv.5.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire the orchestrator into the CLI so capsule run actually executes the pipeline\nBefore: RunCmd/AbortCmd/CleanCmd stubs returned 'not implemented'\nAfter: RunCmd loads config, creates provider via registry, builds orchestrator, runs pipeline with Ctrl+C handling and timestamped status output. AbortCmd removes worktree. CleanCmd removes worktree+branch and prunes. Exit codes: 0=success, 1=pipeline failure, 2=setup error.\n\nFiles: 4 changed (main.go, worktree.go, worklog.go, main_test.go + worklog_test.go + worktree_test.go)\nFindings: None","created_at":"2026-02-11T00:26:21Z"},{"id":165,"issue_id":"cap-9qv.5.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 4 found (4 auto-fixed, 0 to-file)\nSummary: Review found 1 major (AbortCmd Force/deleteBranch mismatch) and 3 minor (os.Exit in Run, inconsistent config loading, double error printing). All fixed in place. Code is clean.","created_at":"2026-02-11T00:31:18Z"}]}
{"id":"cap-9uu","title":"Update data-handling.md section 1 examples to use printf","description":"Discovery Source: cap-b75 - Consistency: echo|jq pipes to printf|jq across pipeline scripts\nDiscovered During: serve phase (nit)\n\nImpact:\nDocumentation consistency. Section 1 (JSON Extraction) shows echo|jq\nas the \"Good\" pattern, contradicting section 5 which prescribes printf.\nNow that all pipeline scripts follow section 5, the section 1 examples\nare the only remaining instances suggesting echo|jq is acceptable.\n\nContext:\ndocs/data-handling.md lines 11 and 14 use echo \"$JSON\" | jq as examples.\nThese should be updated to printf '%s\\n' \"$JSON\" | jq for consistency.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T14:45:16.967334268-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T14:52:54.742108481-08:00","closed_at":"2026-02-15T14:52:54.742108481-08:00","close_reason":"Closed"}
{"id":"cap-am2","title":"Add worktree cleanup on template instantiation failure in prep.sh","description":"Discovery Source: cap-8ax.2.2 - Create prep.sh script for worktree + worklog setup\nDiscovered During: serve phase\n\nImpact:\nIf worktree creation succeeds but template instantiation fails (e.g., envsubst error, disk full), a partially-created worktree is left behind. Subsequent retry hits \"Worktree already exists\" error requiring manual cleanup.\n\nContext:\nscripts/prep.sh lines 131-162. Could add a trap on ERR after worktree creation to auto-remove on failure. Low priority since all prerequisites are validated upfront.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T20:40:45.597263215-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T14:31:26.79319951-08:00","closed_at":"2026-02-15T14:31:26.79319951-08:00","close_reason":"Closed","comments":[{"id":311,"issue_id":"cap-am2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-15T22:26:47Z"},{"id":312,"issue_id":"cap-am2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Prevent partially-created worktrees from being left behind when template instantiation fails in prep.sh\nBefore: If worktree creation succeeded but awk template rendering failed, the worktree directory and branch were left behind, causing 'Worktree already exists' errors on retry\nAfter: ERR trap after worktree creation auto-removes the worktree and branch on any subsequent failure, allowing clean retries\n\nFiles: 2 changed (scripts/prep.sh, tests/scripts/test-prep-script.sh)\nFindings: none","created_at":"2026-02-15T22:31:26Z"},{"id":313,"issue_id":"cap-am2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: Clean implementation. ERR trap correctly scoped between worktree creation and worklog write. Robust cleanup with git worktree remove + rm -rf fallback. Test well-isolated with subshell + EXIT trap. Polisher removed one redundant variable.","created_at":"2026-02-15T22:34:49Z"},{"id":314,"issue_id":"cap-am2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Prevent partially-created worktrees from being left behind on template failure\nBefore: awk failure after worktree creation left orphaned worktree + branch, causing retry errors\nAfter: ERR trap auto-removes worktree and branch on any post-creation failure\n\nProblems encountered:\n  - First cleanup attempt used rm -rf (didn't deregister git worktree, branch delete failed)\n    Resolution: Changed to git worktree remove --force with rm -rf fallback\n\nIssues filed: 0\n\nCommit: f4161d0\nPush: success (origin/main)","created_at":"2026-02-15T22:35:52Z"}]}
{"id":"cap-aqj","title":"Campaign Orchestration","description":"Headless multi-task sequencing, cross-run context, discovery capture, feature/epic validation. Campaign orchestrator calls RunPipeline() per task via interface.","status":"closed","priority":2,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:31.127909731-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:13:19.943935515-08:00","closed_at":"2026-02-11T16:13:19.943935515-08:00","close_reason":"Campaign orchestration implemented: runner with circuit breaker, state persistence, cross-run context, discovery filing, validation","comments":[{"id":175,"issue_id":"cap-aqj","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: needs_changes\nIssues: 0 critical, 4 major, 3 minor, 2 nits\nSummary: Well-structured implementation following project conventions. Path traversal risk in state store needs fix. Several scaffolded-but-unwired features (RetryStrategy, Condition/Provider/Timeout, Create stub) should be documented or deferred cleanly. Strong test coverage for campaign core paths.","created_at":"2026-02-12T00:47:15Z"}]}
{"id":"cap-aqj.1","title":"Campaign runner and state persistence","description":"Core campaign runner with sequential task execution, circuit breaker, failure modes, state persistence to .capsule/campaigns/","status":"closed","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:36.606810886-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:11:18.875854129-08:00","closed_at":"2026-02-11T16:11:18.875854129-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-aqj.1","depends_on_id":"cap-aqj","type":"parent-child","created_at":"2026-02-11T15:58:36.608988581-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-aqj.1","depends_on_id":"cap-6vp.1","type":"blocks","created_at":"2026-02-11T15:58:47.534460769-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-aqj.1","depends_on_id":"cap-6vp.2","type":"blocks","created_at":"2026-02-11T15:58:47.602641649-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-aqj.2","title":"Cross-run context in prompt loader","description":"When building pipeline input for task N, include sibling context from completed tasks. Rendered into worklog Prior Work section.","status":"closed","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:38.066114342-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:12:29.705575327-08:00","closed_at":"2026-02-11T16:12:29.705575327-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-aqj.2","depends_on_id":"cap-aqj","type":"parent-child","created_at":"2026-02-11T15:58:38.068357157-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-aqj.2","depends_on_id":"cap-aqj.1","type":"blocks","created_at":"2026-02-11T15:58:48.289397124-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-aqj.3","title":"Discovery capture and bead filing","description":"File findings from phase outputs as new beads under the parent. Campaign re-queries ReadyChildren() to pick up discoveries.","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:39.707723068-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:12:29.719348008-08:00","closed_at":"2026-02-11T16:12:29.719348008-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-aqj.3","depends_on_id":"cap-aqj","type":"parent-child","created_at":"2026-02-11T15:58:39.70939663-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-aqj.3","depends_on_id":"cap-aqj.1","type":"blocks","created_at":"2026-02-11T15:58:49.538083533-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-aqj.4","title":"Feature/epic validation","description":"After all tasks complete, run validation pipeline: acceptance-check, integration-test, feature-summary.","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:41.011812784-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:12:29.731493282-08:00","closed_at":"2026-02-11T16:12:29.731493282-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-aqj.4","depends_on_id":"cap-aqj","type":"parent-child","created_at":"2026-02-11T15:58:41.013913821-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-aqj.4","depends_on_id":"cap-aqj.1","type":"blocks","created_at":"2026-02-11T15:58:49.601442874-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-awd","title":"TUI (Bubble Tea)","description":"Add Bubble Tea TUI for live phase status display. Dual-mode: TUI when TTY detected, plain text when piped. Progressive enhancement from Epic 2's plain text output.","acceptance_criteria":"TTY shows spinner+phase progress; Piped output is plain text; --no-tui forces plain; Ctrl+C cleanly exits; Completion shows summary","status":"closed","priority":1,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:28:05.680274457-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T22:16:22.357789333-08:00","closed_at":"2026-02-11T22:16:22.357789333-08:00","close_reason":"All 3 features complete: Bubble Tea model (cap-awd.1), TTY detection/dual-mode (cap-awd.2), keyboard controls (cap-awd.3). TUI displays spinner+phase progress, detects TTY, supports --no-tui, handles Ctrl+C/q abort, and shows detail view via 'd' key.","dependencies":[{"issue_id":"cap-awd","depends_on_id":"cap-9qv","type":"blocks","created_at":"2026-02-06T08:28:17.457645403-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-awd.1","title":"Bubble Tea model for phase pipeline status display","description":"As a user watching a pipeline run, I want a live TUI showing which phase is active, retry counts, and elapsed time so that I can monitor progress at a glance.","acceptance_criteria":"Given a running pipeline, When the TUI renders, Then I see all phases listed with current status (pending/running/pass/fail); Given an active phase, When the TUI renders, Then a spinner animates next to the active phase name; Given a retry, When the TUI updates, Then the attempt counter shows (2/3); Given pipeline completion, When the TUI renders, Then a summary line shows total duration and result","status":"closed","priority":1,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:24.645539762-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T19:42:36.95018647-08:00","closed_at":"2026-02-11T19:42:36.95018647-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-awd.1","depends_on_id":"cap-awd","type":"parent-child","created_at":"2026-02-06T08:29:24.647292636-08:00","created_by":"Sam Biggins"}],"comments":[{"id":186,"issue_id":"cap-awd.1","author":"Sam Biggins","text":"PHASE: PLATE\nStatus: completed\n\nFEATURE ACCEPTANCE\n━━━━━━━━━━━━━━━━━\nFeature: cap-awd.1 - Bubble Tea model for phase pipeline status display\nEpic: cap-awd - TUI (Bubble Tea)\n\nAcceptance Criteria:\n  [✓] Phase status display with active/passed/failed/pending indicators\n  [✓] Retry count display (attempt N/M)\n  [✓] Duration display per phase\n  [✓] Summary footer on completion (pass count + total duration)\n  [✓] Lipgloss color styling (green=pass, red=fail, yellow=running, dim=pending)\n\nQuality Gates:\n  [✓] Lint: 0 issues\n  [✓] Tests: 26/26 passing (full suite)\n  [✓] Taster: APPROVED WITH NOTES\n  [✓] Sous-chef: APPROVED\n  [✓] Maitre: Coverage complete (structural suggestions noted)\n\nTasks completed:\n  ✓ cap-awd.1.1: Implement Bubble Tea Model with phase state tracking\n  ✓ cap-awd.1.2: Implement View rendering with lipgloss styling","created_at":"2026-02-12T03:42:45Z"}]}
{"id":"cap-awd.1.1","title":"Implement Bubble Tea Model with phase state tracking","description":"internal/tui/model.go: Model{phases []PhaseState, spinner, currentIdx, done, err, startTime}. PhaseState{Name, Status, Attempt, MaxRetry, Duration}. Init() starts spinner. Update() handles StatusUpdateMsg, spinner.TickMsg, tea.KeyMsg (q to quit). View() renders phase list with status indicators. Tests: teatest for Update/View as pure functions. Deliverable: Bubble Tea model with phase tracking","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:51.997375859-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T19:20:52.228687112-08:00","closed_at":"2026-02-11T19:20:52.228687112-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-awd.1.1","depends_on_id":"cap-awd.1","type":"parent-child","created_at":"2026-02-06T08:31:51.999028504-08:00","created_by":"Sam Biggins"}],"comments":[{"id":179,"issue_id":"cap-awd.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-12T03:14:19Z"},{"id":180,"issue_id":"cap-awd.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add Bubble Tea TUI model for displaying pipeline phase status with live updates\nBefore: internal/tui had only a package placeholder with no functionality\nAfter: Full Bubble Tea Model with phase state tracking, spinner, keyboard controls, and 27 passing tests\n\nFiles: 3 changed (model.go, model_test.go, go.mod/go.sum)\nFindings: None","created_at":"2026-02-12T03:20:59Z"},{"id":181,"issue_id":"cap-awd.1.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 3 minor, 4 nit (all addressed or documented)\nSummary: Clean Bubble Tea model with good test coverage. Minor fixes: go mod tidy, added bridging documentation comments, documented scaffolding fields.","created_at":"2026-02-12T03:25:23Z"},{"id":182,"issue_id":"cap-awd.1.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add Bubble Tea TUI model for live pipeline phase status display\nBefore: internal/tui had only a placeholder package with no functionality\nAfter: Full Bubble Tea Model with phase tracking, spinner, keyboard controls, 27 tests\n\nProblems encountered:\n  - Go source only on capsule-9qv, not main: rebased epic branch from capsule-9qv\n  - teatest moved to charmbracelet/x/exp/teatest: updated import path\n  - goimports formatting on inline comments: fixed before commit\n\nIssues filed: 0\nCommit: facaa6d\nPush: success (origin/epic/cap-awd)","created_at":"2026-02-12T03:26:55Z"}]}
{"id":"cap-awd.1.2","title":"Implement View rendering with lipgloss styling","description":"Render phases with symbols: checkmark (pass), x (fail), hourglass (running+spinner), dot (pending). Retry counter: (2/3). Duration per phase. Summary footer. Lipgloss styles: green=pass, red=fail, yellow=running, dim=pending. Error handling: terminal width detection, graceful fallback. Depends on: t-3.1.1. Deliverable: Styled phase display view","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:52.059249414-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T19:35:39.652651882-08:00","closed_at":"2026-02-11T19:35:39.652651882-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-awd.1.2","depends_on_id":"cap-awd.1","type":"parent-child","created_at":"2026-02-06T08:31:52.060947694-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-awd.1.2","depends_on_id":"cap-awd.1.1","type":"blocks","created_at":"2026-02-06T08:32:11.041286744-08:00","created_by":"Sam Biggins"}],"comments":[{"id":183,"issue_id":"cap-awd.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add lipgloss color styling and summary footer to the Bubble Tea phase display\nBefore: Plain-text View with uncolored indicators and no pipeline summary\nAfter: Styled View with green/red/yellow/dim indicators, colored phase names, and a summary footer showing pass count + total duration on completion\n\nFiles: 2 changed (model.go, model_test.go)\nFindings: none","created_at":"2026-02-12T03:35:39Z"},{"id":184,"issue_id":"cap-awd.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 4 nits found (1 auto-fixed: duration in error footer)\nSummary: Clean implementation with good separation of concerns and thorough tests. No critical/major/minor issues.","created_at":"2026-02-12T03:39:25Z"},{"id":185,"issue_id":"cap-awd.1.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add lipgloss color styling and summary footer to TUI phase display\nBefore: Plain-text View with uncolored indicators, no pipeline summary\nAfter: Styled View with green/red/yellow/dim indicators, summary footer with pass count + duration\n\nProblems encountered:\n  - none\n\nIssues filed: 0\nCommit: 9388b4c\nPush: success","created_at":"2026-02-12T03:40:25Z"}]}
{"id":"cap-awd.2","title":"Automatic TTY detection with TUI/plain text switching","description":"As a user, I want capsule to automatically use the TUI in a terminal and plain text when piped so that it works in both interactive and CI contexts.","acceptance_criteria":"Given stdout is a TTY, When capsule run executes, Then Bubble Tea TUI is shown; Given stdout is piped, When capsule run executes, Then plain text lines are printed; Given --no-tui flag, When capsule run in TTY executes, Then plain text is forced; Given StatusCallback, When Display interface receives updates, Then correct renderer handles them","status":"closed","priority":1,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:24.702196388-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T20:40:10.594772751-08:00","closed_at":"2026-02-11T20:40:10.594772751-08:00","close_reason":"All children complete. Acceptance criteria met: TTY→TUI, piped→plain, --no-tui→forced plain, StatusCallback→correct renderer. Maître review: approved with 1 P3 improvement (cap-ih8).","dependencies":[{"issue_id":"cap-awd.2","depends_on_id":"cap-awd","type":"parent-child","created_at":"2026-02-06T08:29:24.70391941-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-awd.2.1","title":"Implement Display interface and TTY detection","description":"internal/tui/display.go: Display interface with Run(ctx, statusChan) error. isTTY() detection. NewDisplay(opts) returns TUI or Plain. Bridge: StatusCallback → channel → Display. Error handling: TUI init failure falls back to plain. Deliverable: Display interface with TTY switching","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:52.117965495-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T19:57:26.379565641-08:00","closed_at":"2026-02-11T19:57:26.379565641-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-awd.2.1","depends_on_id":"cap-awd.2","type":"parent-child","created_at":"2026-02-06T08:31:52.119633864-08:00","created_by":"Sam Biggins"}],"comments":[{"id":187,"issue_id":"cap-awd.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-12T03:49:22Z"},{"id":188,"issue_id":"cap-awd.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Implement Display interface with TTY-based auto-switching between Bubble Tea TUI and plain text output\nBefore: Only a hardcoded plainTextCallback in main.go with no abstraction for display modes\nAfter: Display interface with PlainDisplay and TUIDisplay implementations, Bridge for channel-based event delivery, isTTY detection, NewDisplay factory with ForcePlain override\n\nFiles: 3 changed (display.go, model.go, display_test.go)\nFindings: none","created_at":"2026-02-12T03:57:37Z"},{"id":189,"issue_id":"cap-awd.2.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 1 major fixed (TUI fallback race), 3 minor fixed (unexported field, doc comment, go mod tidy)\nSummary: Clean Display interface with good TTY detection, Bridge pattern, and thorough tests. Major race condition in TUI fallback fixed with stop-signal pattern. Documentation additions are comprehensive.","created_at":"2026-02-12T04:13:11Z"},{"id":190,"issue_id":"cap-awd.2.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Implement Display interface with TTY-based auto-switching between TUI and plain text\nBefore: Only a hardcoded plainTextCallback in main.go with no display abstraction\nAfter: Display interface with PlainDisplay, TUIDisplay, Bridge, isTTY, NewDisplay factory; §12 Display Patterns in go-conventions.md\n\nProblems encountered:\n  - TUI fallback race condition: fixed with stop-signal goroutine pattern\n  - go-isatty listed as indirect dep: fixed with go mod tidy\n\nIssues filed: 0\nCommit: 15f9b87\nPush: success (origin/epic/cap-awd)","created_at":"2026-02-12T04:15:16Z"}]}
{"id":"cap-awd.2.2","title":"Wire Display into CLI replacing plain text callback","description":"Update RunCmd to use Display instead of direct StatusCallback. Add --no-tui flag to force plain mode. Orchestrator sends StatusUpdate to channel, Display consumes. Error handling: TUI crash recovery (switch to plain mid-run). Depends on: t-3.2.1, t-3.1.1. Deliverable: CLI with dual-mode display","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:52.175078038-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T20:33:35.742530648-08:00","closed_at":"2026-02-11T20:33:35.742530648-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-awd.2.2","depends_on_id":"cap-awd.2","type":"parent-child","created_at":"2026-02-06T08:31:52.177306265-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-awd.2.2","depends_on_id":"cap-awd.2.1","type":"blocks","created_at":"2026-02-06T08:32:11.098667792-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-awd.2.2","depends_on_id":"cap-awd.1.1","type":"blocks","created_at":"2026-02-06T08:32:11.222900627-08:00","created_by":"Sam Biggins"}],"comments":[{"id":191,"issue_id":"cap-awd.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire Display into CLI to replace direct plainTextCallback, enabling dual-mode TUI/plain output\nBefore: RunCmd used plainTextCallback writing directly to stdout; no TTY detection or TUI support\nAfter: RunCmd creates Bridge+Display, routes StatusUpdates through bridge to Display; --no-tui flag available; display lifecycle properly bracketed around pipeline\n\nFiles: 2 changed (cmd/capsule/main.go, cmd/capsule/main_test.go)\nFindings: CampaignCmd still uses plainTextCallback - could be wired to Display in a future task","created_at":"2026-02-12T04:33:35Z"},{"id":192,"issue_id":"cap-awd.2.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 2 nits (both acceptable, no action needed)\nSummary: Clean wiring with correct lifecycle sequencing, maintained type boundaries, and good scope discipline. No critical/major/minor issues.","created_at":"2026-02-12T04:36:28Z"},{"id":193,"issue_id":"cap-awd.2.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire Display into CLI to replace direct plainTextCallback, enabling dual-mode TUI/plain output\nBefore: RunCmd used plainTextCallback writing directly to stdout; no TTY detection or TUI support\nAfter: RunCmd creates Bridge+Display, routes StatusUpdates through bridge; --no-tui flag; display lifecycle bracketed around pipeline\n\nProblems encountered:\n  - none\n\nIssues filed: 0\nCommit: 31d666f\nPush: success (origin/epic/cap-awd)","created_at":"2026-02-12T04:38:05Z"}]}
{"id":"cap-awd.3","title":"TUI keyboard controls for abort and status","description":"As a user watching a pipeline, I want keyboard shortcuts to abort the pipeline or view detailed status so that I have control during execution.","acceptance_criteria":"Given a running pipeline in TUI, When I press q or Ctrl+C, Then the pipeline aborts gracefully with cleanup; Given a running pipeline in TUI, When I press d, Then I see detailed status (current phase output, worklog tail); Given an abort, When cleanup completes, Then TUI shows abort summary before exiting","status":"closed","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:29:24.762433344-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T22:15:58.356037242-08:00","closed_at":"2026-02-11T22:15:58.356037242-08:00","close_reason":"Both tasks complete. Abort (cap-awd.3.1) and detail view toggle (cap-awd.3.2) implemented. Maitre review passed with structural notes accepted (unit test convention consistency). Follow-up bead cap-ewy filed for teatest abort integration test.","dependencies":[{"issue_id":"cap-awd.3","depends_on_id":"cap-awd","type":"parent-child","created_at":"2026-02-06T08:29:24.764131421-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-awd.3.1","title":"Implement abort via keyboard with graceful cleanup","description":"Handle q and Ctrl+C in Update(). Send cancel to orchestrator context. Show Aborting... status, then summary on complete. Error handling: double-press forces immediate exit. Deliverable: Keyboard abort with cleanup","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:52.23255267-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T21:03:43.717965634-08:00","closed_at":"2026-02-11T21:03:43.717965634-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-awd.3.1","depends_on_id":"cap-awd.3","type":"parent-child","created_at":"2026-02-06T08:31:52.234165548-08:00","created_by":"Sam Biggins"}],"comments":[{"id":196,"issue_id":"cap-awd.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add keyboard abort with graceful cleanup to the TUI\nBefore: q/Ctrl+C immediately quit the TUI but left the pipeline running as an orphan\nAfter: First press triggers context cancellation (graceful abort with 'Aborting...' status), second press forces immediate exit. Without cancel func, backward-compatible immediate quit.\n\nFiles: 4 changed (model.go, model_test.go, display.go, display_test.go, main.go, main_test.go)\nFindings: None","created_at":"2026-02-12T05:03:43Z"},{"id":197,"issue_id":"cap-awd.3.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 1 major fixed (PipelineDoneMsg aborting clear), 1 minor fixed (missing test for abort+success), 1 minor accepted (comment style)\nSummary: Well-designed graceful abort pattern with strong backward compat. Major: PipelineDoneMsg didn't clear aborting flag (fixed). Added test for abort+success edge case.","created_at":"2026-02-12T05:17:49Z"},{"id":198,"issue_id":"cap-awd.3.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add keyboard abort with graceful cleanup to the TUI\nBefore: q/Ctrl+C immediately quit the TUI but left the pipeline running as an orphan\nAfter: First press triggers context cancellation (graceful abort with 'Aborting...' status), second press forces immediate exit. Without cancel func, backward-compatible immediate quit.\n\nProblems encountered:\n  - PipelineDoneMsg didn't clear aborting flag: fixed during serve review\n\nIssues filed: 0\nCommit: edfa2e6\nPush: success (origin/epic/cap-awd)","created_at":"2026-02-12T05:24:33Z"}]}
{"id":"cap-awd.3.2","title":"Implement detail view toggle","description":"d key toggles detail panel showing recent phase output (last N lines from provider stdout) and worklog tail. Uses bubbles/viewport for scrollable content. Depends on: t-3.3.1. Deliverable: Detail view toggle","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-06T08:31:52.293951232-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T22:09:06.700653352-08:00","closed_at":"2026-02-11T22:09:06.700653352-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-awd.3.2","depends_on_id":"cap-awd.3","type":"parent-child","created_at":"2026-02-06T08:31:52.295821799-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-awd.3.2","depends_on_id":"cap-awd.3.1","type":"blocks","created_at":"2026-02-06T08:32:11.308599292-08:00","created_by":"Sam Biggins"}],"comments":[{"id":199,"issue_id":"cap-awd.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add detail view toggle to TUI for viewing phase output during pipeline execution\nBefore: TUI only showed phase status list with no way to see detailed output\nAfter: Pressing 'd' toggles a scrollable detail panel showing phase output (via bubbles/viewport). OutputMsg feeds content, viewport auto-scrolls to bottom on new content, arrow keys scroll when detail is visible.\n\nFiles: 3 changed (model.go, model_test.go, display.go)\nFindings: None","created_at":"2026-02-12T06:09:06Z"},{"id":200,"issue_id":"cap-awd.3.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 2 minor (1 fixed: PlainDisplay no-op case, 1 deferred: Bridge.SendOutput method), 2 nits (accepted)\nSummary: Clean detail view toggle implementation with correct viewport integration, thorough tests, and consistent patterns. Polisher simplified viewport height clamping with max() builtin.","created_at":"2026-02-12T06:11:51Z"},{"id":201,"issue_id":"cap-awd.3.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add detail view toggle to TUI for viewing phase output during pipeline execution\nBefore: TUI only showed phase status list with no way to see detailed output\nAfter: Pressing 'd' toggles a scrollable detail panel showing phase output (via bubbles/viewport). OutputMsg feeds content, viewport auto-scrolls to bottom, arrow keys scroll when visible.\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\nCommit: a2c5107\nPush: success (origin/epic/cap-awd)","created_at":"2026-02-12T06:13:14Z"}]}
{"id":"cap-b0l","title":"Align template and test scripts with printf|jq convention","description":"Discovery Source: cap-b75 - Consistency: echo|jq pipes to printf|jq across pipeline scripts\nDiscovered During: serve phase (nit)\n\nImpact:\nConsistency improvement. Template files (templates/demo-brownfield/,\ntemplates/demo-greenfield/) and test scripts (tests/scripts/) still\nuse echo \"$var\" | jq. Lower risk since test data is controlled, but\ninconsistent with the pipeline scripts convention.\n\nContext:\nPipeline scripts are now fully converted. Templates and tests remain\nwith the old echo pattern. These are lower priority since the data\nflowing through them is controlled (not arbitrary user content).","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T14:45:21.235756515-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T14:52:54.753721604-08:00","closed_at":"2026-02-15T14:52:54.753721604-08:00","close_reason":"Closed"}
{"id":"cap-b75","title":"Consistency: echo|jq pipes to printf|jq across pipeline scripts","description":"Discovery Source: cap-vwt - Pipeline improvements from demo-simple test run\nDiscovered During: serve phase (round 3)\n\nImpact:\nConsistency improvement, not a bug. echo \"$json\" | jq is functionally safe\nsince JSON always starts with { or [, never -n/-e. But the project convention\n(docs/data-handling.md section 5) prescribes printf for arbitrary content.\n\nContext:\nPattern appears in: resolve-parent-chain.sh, merge.sh, run-summary.sh,\nrun-pipeline.sh, parse-signal.sh. All are echo \"$json_var\" | jq pipelines.\nThe printf convention is already used for non-JSON content throughout.\nThis is a separate cleanup pass, not urgent.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T10:50:55.003656436-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T14:42:51.441086837-08:00","closed_at":"2026-02-15T14:42:51.441086837-08:00","close_reason":"Closed","comments":[{"id":315,"issue_id":"cap-b75","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-15T22:38:36Z"},{"id":316,"issue_id":"cap-b75","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Match project printf convention (docs/data-handling.md §5) across all pipeline scripts\nBefore: echo \"$json_var\" | jq pattern used throughout pipeline scripts\nAfter: printf '%s\\n' \"$json_var\" | jq used consistently everywhere\n\nFiles: 7 changed\nFindings: none","created_at":"2026-02-15T22:42:51Z"},{"id":317,"issue_id":"cap-b75","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (2 nits noted for follow-up)\nSummary: Clean mechanical transformation, complete coverage within scope","created_at":"2026-02-15T22:44:44Z"},{"id":318,"issue_id":"cap-b75","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Match printf convention across all pipeline scripts\nBefore: echo \"$json\" | jq used inconsistently in 7 scripts\nAfter: printf '%s\\n' \"$json\" | jq used consistently everywhere\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - cap-9uu: Update data-handling.md section 1 examples to use printf [P4]\n  - cap-b0l: Align template and test scripts with printf|jq convention [P4]\n\nCommit: 367084f\nPush: success","created_at":"2026-02-15T22:45:50Z"}]}
{"id":"cap-ckf","title":"Gate package: shell command execution for pipeline phases","description":"New internal/gate/ package with Runner that executes shell commands and returns provider.Signal. GateRunner interface defined in orchestrator.","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:27.853381123-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:01:53.780540646-08:00","closed_at":"2026-02-11T16:01:53.780540646-08:00","close_reason":"Closed"}
{"id":"cap-dgw","title":"Add .beads/ directory assertion to test-setup-template.sh","description":"Source: cap-8ax.1 criterion 1 evidence audit. .beads/ creation is implicitly proven by bd ready working (case 3/7), but deserves an explicit assertion in setup template tests.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T13:26:13.5421146-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T13:20:32.509989686-08:00","closed_at":"2026-02-15T13:20:32.509989686-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-dgw","depends_on_id":"cap-8ax","type":"blocks","created_at":"2026-02-07T13:26:32.12259201-08:00","created_by":"Sam Biggins"}],"comments":[{"id":305,"issue_id":"cap-dgw","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found, 3 polish fixes (pre-existing stderr/comment conventions)\nSummary: Explicit .beads/ directory assertion added cleanly within existing Test 3.","created_at":"2026-02-15T21:31:25Z"},{"id":308,"issue_id":"cap-dgw","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add explicit .beads/ directory existence assertion to setup-template test\nBefore: .beads/ creation only proven implicitly via bd ready succeeding\nAfter: Test 3 now explicitly checks [ -d .beads ] before running bd ready\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: fed1e33, cc85ef0\nPush: success","created_at":"2026-02-15T21:39:39Z"}]}
{"id":"cap-dv9","title":"Add BDD smoke tests for capsule Go binary","description":"Discovery Source: cap-9qv.1.3 - Create Makefile and CLAUDE.md  \nDiscovered During: plate phase (maitre BDD review of cap-9qv.1)\n\nImpact:\nFeature cap-9qv.1 acceptance criteria validated manually but lack automated coverage.\nNo smoke test exercises the built binary end-to-end.\n\nContext:\nMaitre review identified gaps:\n1. No smoke test for binary build + version output + no-args behavior\n2. Test naming doesn't follow feature-level TestFeature_ convention\n3. No Given-When-Then comments in existing test functions\n4. Version test doesn't verify commit/date fields\n\nDeliverable:\n- Smoke test (shell script or TestSmoke with build tag) covering:\n  - go build produces binary\n  - ./capsule --version prints version info\n  - ./capsule with no args shows usage and exits non-zero\n  - make test passes\n- Restructure existing tests with feature-level naming and GWT comments","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T19:53:47.148506149-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T20:00:08.210236854-08:00","closed_at":"2026-02-08T20:00:08.210236854-08:00","close_reason":"All maitre BDD issues addressed","comments":[{"id":116,"issue_id":"cap-dv9","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after fixes)\nIssues: 0 critical, 1 major (fixed: silent skips → t.Fatal), 2 minor (fixed: make smoke target, CLAUDE.md update), 2 nits (deferred)\nSummary: Well-structured BDD tests with good feature coverage. Fixed silent skip anti-pattern and added make smoke target.","created_at":"2026-02-09T04:07:41Z"},{"id":117,"issue_id":"cap-dv9","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Address maitre BDD quality gaps for feature cap-9qv.1\nBefore: Flat test functions, no GWT comments, no smoke tests, version missing commit/date\nAfter: TestFeature_ naming with GWT, smoke test suite, version prints all 3 fields, make smoke target\n\nProblems encountered:\n  - t.Cleanup in subtest removed binary before sibling subtests: moved to parent level\n  - Silent t.Skip masked build failures: changed to t.Fatal per sous-chef review\n\nIssues filed: none\n\nCommit: c6a8d91\nPush: origin/capsule-9qv (force-with-lease)","created_at":"2026-02-09T04:13:06Z"}]}
{"id":"cap-e4g","title":"Pipeline robustness (C1-C3, D1)","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T09:54:00.657121481-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T09:58:10.57798075-08:00","closed_at":"2026-02-08T09:58:10.57798075-08:00","close_reason":"C1: timeout, C2: dep validation, C3: fence stripping, D1: phase timing","dependencies":[{"issue_id":"cap-e4g","depends_on_id":"cap-vwt","type":"blocks","created_at":"2026-02-08T09:54:06.67197457-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-ewy","title":"Add teatest integration test for abort flow","description":"Discovery Source: cap-awd.3.2 - Implement detail view toggle\nDiscovered During: plate/maitre review\n\nImpact:\nNo integration test exercises the abort flow through the full Bubble Tea program\nlifecycle. The existing TestModel_Teatest_FullPipeline covers happy path only.\n\nContext:\nA TestModel_Teatest_AbortFlow would: start model, send status running,\nsend q keypress, verify aborting state, send PipelineDoneMsg, verify\nabort summary shown. Pattern already established by TestModel_Teatest_FullPipeline.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T22:15:51.717385525-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T22:22:02.104830141-08:00","closed_at":"2026-02-11T22:22:02.104830141-08:00","close_reason":"Added TestModel_Teatest_AbortFlow integration test exercising abort lifecycle through full Bubble Tea program."}
{"id":"cap-f1r","title":"Add git worktree prune after bulk Remove operations","description":"Manager.Remove does not call 'git worktree prune' to clean orphaned metadata. The legacy teardown.sh calls prune after removal. Consider adding a Prune() method or calling prune after Remove. Reference: git-scm.com/docs/git-worktree (prune section).","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-10T06:30:53.943052544-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T06:36:13.009206424-08:00","closed_at":"2026-02-10T06:36:13.009206424-08:00","close_reason":"Closed"}
{"id":"cap-fj8","title":"Dashboard TUI Enhancements","description":"Smart dispatch, run inspection, and UX polish for the dashboard TUI. Three phases: (1) Campaign mode with type-aware routing, (2) History view and campaign task inspection, (3) UX polish with elapsed timers, debounced resolution, sticky cursor.\n\nPlanning context: docs/planning/context-dashboard-enhancements/\nMenu plan: docs/planning/menu-plan-dashboard-enhancements.yaml","status":"open","priority":2,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:03:49.079582834-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:10:40.192682658-08:00","comments":[{"id":335,"issue_id":"cap-fj8","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 2 minor, 1 nit found (0 critical, 0 major)\nPolish: 3 refinements applied (comment clarity, goroutine safety doc, variable rename)\nSummary: Clean campaign wiring with excellent test coverage (~650 lines). Adapter layering is well-decomposed. Minor notes: campaign error silently discarded in dispatchCampaign (acceptable if CampaignDoneMsg invariant holds), mutable callback fields documented.","created_at":"2026-02-16T17:21:31Z"}]}
{"id":"cap-fj8.1","title":"Campaign mode in dashboard TUI","description":"As a developer, I want the dashboard to automatically run child tasks when I select a feature or epic, so I don't have to run each task individually.\n\nAcceptance Criteria:\n- Selecting a task bead runs a single pipeline (unchanged behavior)\n- Selecting a feature bead discovers its ready child tasks and runs them sequentially\n- Selecting an epic bead discovers its ready child tasks and runs them sequentially\n- Campaign view shows task queue with inline phase nesting for the running task\n- Completed tasks show as single line with pass/fail indicator and duration\n- Right pane shows phase report for cursor-selected phase (same as pipeline mode)\n- User can abort campaign with q/ctrl+c\n- Campaign summary shows after all tasks complete\n- Bead type with empty/unknown value defaults to single pipeline (safe fallback)\n\nTracer Strategy:\n  Minimal flow: Select feature → discover children → run first child pipeline → show phases → task completes → run next → campaign summary\n  Layers: msg types → browse dispatch → campaign state → model routing → CLI adapter\n  Expansion: Campaign state persistence, validation phases, discovery filing (existing campaign features, wired through)","status":"closed","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:02.905160759-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T10:14:55.210428367-08:00","closed_at":"2026-02-16T10:14:55.210428367-08:00","close_reason":"All 13 children completed. Campaign mode fully implemented in dashboard TUI.","dependencies":[{"issue_id":"cap-fj8.1","depends_on_id":"cap-fj8","type":"parent-child","created_at":"2026-02-15T23:04:02.907062933-08:00","created_by":"Sam Biggins"}],"comments":[{"id":346,"issue_id":"cap-fj8.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found\nSummary: Clean one-line fix propagating campaign pipeline aborting flag for visual feedback consistency with pipeline mode. Pattern symmetry verified, reset paths safe, test coverage appropriate.","created_at":"2026-02-16T17:52:54Z"},{"id":349,"issue_id":"cap-fj8.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 2 nits found (0 auto-fixed, 0 to-file)\nPolish: 1 refinement applied (added 3 assertions to second PhaseResult in conversion test)\nSummary: Clean dead code removal and well-structured test. No-op callback correctly replaces unused accumulator. PhaseReport→PhaseResult conversion path properly tested.","created_at":"2026-02-16T18:05:46Z"},{"id":353,"issue_id":"cap-fj8.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nFEATURE CLOSED - All 13 children completed.\nCampaign mode fully implemented in dashboard TUI.\n\nCapabilities delivered:\n- Feature/epic beads discover and run child tasks sequentially\n- Campaign view with task queue and inline phase nesting\n- Visual abort feedback, error surfacing, skipped counting\n- SiblingContext propagation, proper status mapping\n- Campaign key bindings and help\n\nChildren (13 closed):\n  ✓ cap-fj8.1.1: Campaign types and CampaignRunner interface\n  ✓ cap-fj8.1.2: campaignState with inline phase nesting\n  ✓ cap-fj8.1.3: Campaign key bindings and help\n  ✓ cap-fj8.1.4: Campaign dispatch into dashboard model\n  ✓ cap-fj8.1.5: Dashboard campaign adapter and CLI wiring\n  ✓ cap-fj8.1.6: Skipped count in CampaignDoneMsg\n  ✓ cap-fj8.1.7: CampaignTaskStatus alignment with PhaseStatus\n  ✓ cap-fj8.1.8: Campaign error handling for missing CampaignDoneMsg\n  ✓ cap-fj8.1.9: Campaign abort visual feedback\n  ✓ cap-fj8.1.10: Dead lastUpdates field removal\n  ✓ cap-fj8.1.11: Status type mismatch fix\n  ✓ cap-fj8.1.12: SiblingContext propagation\n  ✓ cap-fj8.1.13: Campaign error surfacing to UI","created_at":"2026-02-16T18:15:10Z"}]}
{"id":"cap-fj8.1.1","title":"Add campaign types and CampaignRunner interface to dashboard","description":"Foundation — defines the type system all other tasks depend on.\n\nAdd to internal/dashboard/msg.go:\n- BeadType field on DispatchMsg\n- ModeCampaign and ModeCampaignSummary mode constants\n- CampaignTaskInfo, CampaignTaskStatus types\n- CampaignStartMsg, CampaignTaskStartMsg, CampaignTaskDoneMsg, CampaignDoneMsg message types\n- CampaignRunner interface with RunCampaign(ctx, parentID, statusFn, campaignFn) signature\n\nPass BeadType through browse dispatch (browse.go line 89).\n\nDeliverable: msg.go with campaign types + browse.go passing BeadType\nTDD: true","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:40.363252768-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:26:37.021555684-08:00","closed_at":"2026-02-15T23:26:37.021555684-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.1","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-15T23:04:40.365113381-08:00","created_by":"Sam Biggins"}],"comments":[{"id":319,"issue_id":"cap-fj8.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add the campaign type system that all other campaign tasks depend on\nBefore: Dashboard only had pipeline mode types; DispatchMsg had no BeadType field\nAfter: Campaign modes, task statuses, message types, and CampaignRunner interface defined; browse dispatch passes BeadType\n\nFiles: 3 changed (msg.go, browse.go, msg_test.go)\nFindings: none","created_at":"2026-02-16T07:26:37Z"},{"id":320,"issue_id":"cap-fj8.1.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 2 found (0 auto-fixed, 0 to-file) — 1 minor (CampaignDoneMsg missing Skipped count), 1 nit (PhaseStatus/CampaignTaskStatus asymmetry)\nSummary: Clean foundation task. Types follow existing patterns. Polisher refined parameter name and test stub.","created_at":"2026-02-16T07:30:30Z"},{"id":321,"issue_id":"cap-fj8.1.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add the campaign type system that all other campaign tasks depend on\nBefore: Dashboard only had pipeline mode types; DispatchMsg had no BeadType field\nAfter: Campaign modes, task statuses, message types, and CampaignRunner interface defined; browse dispatch passes BeadType\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - cap-fj8.1.6: Add Skipped count to CampaignDoneMsg [P3]\n  - cap-fj8.1.7: Consider aligning CampaignTaskStatus with PhaseStatus pattern [P4]\n\nCommit: d617fa9\nPush: skipped (ephemeral branch, no remote)","created_at":"2026-02-16T07:31:48Z"}]}
{"id":"cap-fj8.1.10","title":"Remove dead lastUpdates field in dashboardCampaignPipelineRunner","description":"Discovery Source: cap-fj8.1.5 - Build dashboard campaign adapter and wire into CLI\nDiscovered During: serve phase\n\nImpact:\nDead code — lastUpdates slice is populated by the statusFn closure in\ndashboardCampaignPipelineRunner.RunPipeline but never read afterward.\nMisleading for future maintainers who may assume it feeds phase results.\n\nContext:\ncmd/capsule/main.go — dashboardCampaignPipelineRunner.RunPipeline builds\nlastUpdates via the statusFn closure, but the output conversion uses\noutput.PhaseReports from the dashboard pipelineFn return value instead.","status":"closed","priority":3,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-16T09:06:34.321167162-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T10:01:47.757879433-08:00","closed_at":"2026-02-16T10:01:47.757879433-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.10","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-16T09:06:34.326197726-08:00","created_by":"Sam Biggins"}],"comments":[{"id":348,"issue_id":"cap-fj8.1.10","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Remove dead lastUpdates slice that was populated but never read in dashboardCampaignPipelineRunner.RunPipeline\nBefore: statusFn closure accumulated StatusUpdate structs into lastUpdates, but output conversion used output.PhaseReports instead — misleading dead code\nAfter: statusFn replaced with inline no-op; RunPipeline only uses PhaseReports (the live path), which is now tested\n\nFiles: 2 changed (cmd/capsule/main.go, cmd/capsule/main_test.go)\nFindings: none","created_at":"2026-02-16T18:01:53Z"},{"id":350,"issue_id":"cap-fj8.1.10","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Remove dead lastUpdates slice that was populated but never read in dashboardCampaignPipelineRunner.RunPipeline\nBefore: statusFn closure accumulated StatusUpdate structs into lastUpdates, but output conversion used output.PhaseReports instead — misleading dead code\nAfter: statusFn replaced with inline no-op; RunPipeline only uses PhaseReports (the live path), which is now tested\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: afd4ec8\nPush: skipped (ephemeral branch, no remote)","created_at":"2026-02-16T18:07:02Z"}]}
{"id":"cap-fj8.1.11","title":"Fix provider.Status vs dashboard.PhaseStatus type mismatch in campaign bridge","description":"Discovery Source: cap-fj8.1.5 - Build dashboard campaign adapter and wire into CLI\nDiscovered During: serve phase\n\nImpact:\nThe bridge converts dashboard.PhaseStatus back through provider.Status\nvia string cast. If the string representations diverge, the campaign\nrunner receives incorrect status values silently.\n\nContext:\ndashboardCampaignPipelineRunner.RunPipeline casts provider.Status(pr.Status)\nwhere pr.Status is a dashboard.PhaseStatus string. These types should be\nexplicitly mapped or unified to prevent silent mismatches.","status":"closed","priority":3,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-16T09:06:38.530670665-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T10:10:37.785759812-08:00","closed_at":"2026-02-16T10:10:37.785759812-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.11","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-16T09:06:38.533475529-08:00","created_by":"Sam Biggins"}],"comments":[{"id":351,"issue_id":"cap-fj8.1.11","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Fix silent type mismatch where dashboard.PhaseStatus values were incorrectly cast to provider.Status via string conversion\nBefore: Bridge did provider.Status(pr.Status) which turned 'passed' into provider.Status('passed') instead of 'PASS' - all 4 status values silently wrong\nAfter: Explicit dashboardStatusToProvider() mapping function correctly maps passed→PASS, failed→NEEDS_WORK, error→ERROR, skipped→SKIP\n\nFiles: 2 changed (main.go, main_test.go)\nFindings: none","created_at":"2026-02-16T18:10:37Z"},{"id":352,"issue_id":"cap-fj8.1.11","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix silent type mismatch where dashboard.PhaseStatus values were incorrectly cast to provider.Status via string conversion\nBefore: Bridge did provider.Status(pr.Status) which turned 'passed' into 'passed' instead of 'PASS' - all 4 status values silently wrong\nAfter: Explicit dashboardStatusToProvider() mapping function correctly maps passed→PASS, failed→NEEDS_WORK, error→ERROR, skipped→SKIP\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: 01b8e26\nPush: skipped (ephemeral branch, no remote)","created_at":"2026-02-16T18:15:04Z"}]}
{"id":"cap-fj8.1.12","title":"Propagate SiblingContext through dashboard campaign bridge","description":"Discovery Source: cap-fj8.1.5 - Build dashboard campaign adapter and wire into CLI\nDiscovered During: serve phase\n\nImpact:\nSiblingContext (cross-run context from previous task results) is not passed\nthrough the dashboard campaign bridge. Campaign tasks run without context\nfrom earlier siblings, reducing quality of later pipeline runs.\n\nContext:\ncampaign.PipelineRunner.RunPipeline receives orchestrator.PipelineInput which\nhas SiblingContext, but the dashboard bridge drops it when converting to\ndashboard.PipelineInput which only has BeadID.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-16T09:06:43.045497616-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T09:13:59.833544423-08:00","closed_at":"2026-02-16T09:13:59.833544423-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.12","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-16T09:06:43.047315755-08:00","created_by":"Sam Biggins"}],"comments":[{"id":334,"issue_id":"cap-fj8.1.12","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Propagate SiblingContext through dashboard campaign bridge so campaign tasks run with context from earlier siblings\nBefore: dashboard.PipelineInput only carried BeadID+Provider; SiblingContext was dropped when dashboardCampaignPipelineRunner converted orchestrator.PipelineInput to dashboard.PipelineInput, and dashboardPipelineAdapter did not pass it back to orchestrator\nAfter: dashboard.PipelineInput carries SiblingContext; both bridge directions propagate it correctly\n\nFiles: 3 changed (msg.go, main.go, main_test.go)\nFindings: none","created_at":"2026-02-16T17:13:59Z"},{"id":336,"issue_id":"cap-fj8.1.12","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Propagate SiblingContext through dashboard campaign bridge so campaign tasks run with context from earlier siblings\nBefore: SiblingContext dropped when converting between orchestrator and dashboard PipelineInput types\nAfter: SiblingContext flows through both bridge directions (campaign→dashboard and dashboard→orchestrator)\n\nProblems encountered:\n  - None — changes were clean from cook/serve, just needed commit\n\nIssues filed:\n  - (none — no new findings)\n\nCommit: 5b6d6b7\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-16T17:23:15Z"}]}
{"id":"cap-fj8.1.13","title":"Surface campaign errors to dashboard UI","description":"Discovery Source: cap-fj8.1.5 - Build dashboard campaign adapter and wire into CLI\nDiscovered During: serve phase (pre-existing from cap-fj8.1.4 dispatchCampaign)\n\nImpact:\nIf campaign.Runner.Run returns an error, dispatchCampaign in the dashboard\nmodel does not send any tea.Msg to surface the failure to the user. The\ndashboard silently stays in campaign mode with no feedback.\n\nContext:\nPre-existing issue from cap-fj8.1.4. dispatchCampaign calls RunCampaign in a\ngoroutine and logs errors but does not send an error message to the Bubble Tea\nprogram. User sees campaign start but no completion or failure indication.","status":"closed","priority":2,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-16T09:06:46.586046114-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T09:43:24.998021011-08:00","closed_at":"2026-02-16T09:43:24.998021011-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.13","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-16T09:06:46.587980363-08:00","created_by":"Sam Biggins"}],"comments":[{"id":341,"issue_id":"cap-fj8.1.13","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-16T17:38:31Z"},{"id":342,"issue_id":"cap-fj8.1.13","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Surface campaign runner errors to the dashboard UI so users see feedback on failure\nBefore: dispatchCampaign silently discarded RunCampaign errors; dashboard stayed in campaign mode with no feedback\nAfter: Campaign errors are sent as CampaignErrorMsg through the event channel, stored on the model, and displayed in the campaign summary view\n\nFiles: 3 changed (model.go, msg.go, summary.go, model_test.go)\nFindings: none","created_at":"2026-02-16T17:43:29Z"},{"id":343,"issue_id":"cap-fj8.1.13","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Surface campaign runner errors to the dashboard UI so users see feedback on failure\nBefore: dispatchCampaign silently discarded RunCampaign errors; dashboard stayed in campaign mode with no feedback\nAfter: Campaign errors are sent as CampaignErrorMsg through the event channel, stored on the model, and displayed in the campaign summary view\n\nProblems encountered:\n  - gocritic ifElseChain lint: refactored to switch statement\n\nIssues filed: none\n\nCommit: 108f123\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-16T17:47:47Z"}]}
{"id":"cap-fj8.1.2","title":"Implement campaignState with inline phase nesting","description":"View layer — proves the campaign UI renders correctly.\n\nNew file internal/dashboard/campaign.go:\n- campaignState struct: parentID, parentTitle, tasks []CampaignTaskInfo, currentIdx, embedded pipelineState, completed/failed counters\n- Update(msg) routing: CampaignStartMsg, CampaignTaskStartMsg, CampaignTaskDoneMsg, PhaseUpdateMsg, spinner.TickMsg\n- On CampaignTaskStartMsg: mark task running, reset embedded pipelineState\n- View(w, h): header line + task queue. Running task shows phases indented. Completed tasks collapse to one line.\n- ViewReport(w, h): delegates to pipelineState.ViewReport()\n- Reuse existing styles from pipeline.go\n\nDeliverable: campaign.go with campaignState + tests in campaign_test.go\nTDD: true\n\nDepends on: Add campaign types and CampaignRunner interface to dashboard","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:46.939851665-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:35:57.01156868-08:00","closed_at":"2026-02-15T23:35:57.01156868-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.2","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-15T23:04:46.941900987-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.1.2","depends_on_id":"cap-fj8.1.1","type":"blocks","created_at":"2026-02-15T23:05:05.886869374-08:00","created_by":"Sam Biggins"}],"comments":[{"id":322,"issue_id":"cap-fj8.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-16T07:32:30Z"},{"id":323,"issue_id":"cap-fj8.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add campaign view layer that renders task queue with inline phase nesting\nBefore: Dashboard had no campaign mode UI — only single-pipeline display existed\nAfter: campaignState renders header, task queue with status indicators, indented phases for running task, collapsed one-line for completed tasks, and delegates report view to embedded pipelineState\n\nFiles: 2 changed (campaign.go, campaign_test.go)\nFindings: none","created_at":"2026-02-16T07:36:02Z"},{"id":324,"issue_id":"cap-fj8.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 3 found (1 auto-fixed, 0 to-file) — 1 minor (unused idx param, auto-fixed by polisher), 1 minor (slice aliasing risk, acceptable per Bubble Tea idiom), 1 nit (CampaignStartMsg lacks ParentTitle — future integration concern)\nSummary: Clean implementation following pipelineState patterns. Excellent consistency, thorough bounds checking, clean composition. Polisher removed unused parameter.","created_at":"2026-02-16T07:40:28Z"}]}
{"id":"cap-fj8.1.3","title":"Add campaign key bindings and help","description":"Discoverability — proves help bar works for new modes.\n\nkeys.go: campaignKeys struct (same bindings as pipeline: up/down/tab/abort) + CampaignKeyMap()\nhelp.go: add ModeCampaign → CampaignKeyMap(), ModeCampaignSummary → SummaryKeyMap()\n\nDeliverable: Campaign key bindings with tests\nTDD: true\n\nDepends on: Add campaign types and CampaignRunner interface to dashboard","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:50.181041807-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:47:07.508447869-08:00","closed_at":"2026-02-15T23:47:07.508447869-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.3","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-15T23:04:50.183524352-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.1.3","depends_on_id":"cap-fj8.1.1","type":"blocks","created_at":"2026-02-15T23:05:05.949168021-08:00","created_by":"Sam Biggins"}],"comments":[{"id":325,"issue_id":"cap-fj8.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add campaign-mode key bindings and help bar routing so the dashboard TUI shows context-aware help when in campaign mode.\nBefore: HelpBindings() only handled ModeBrowse, ModePipeline, and ModeSummary; campaign modes fell through to browse keys.\nAfter: campaignKeys struct with CampaignKeyMap() mirrors pipeline bindings (up/down/tab/abort). HelpBindings() explicitly routes ModeCampaign → CampaignKeyMap() and ModeCampaignSummary → SummaryKeyMap().\n\nFiles: 4 changed (keys.go, help.go, keys_test.go, help_test.go)\nFindings: none","created_at":"2026-02-16T07:47:15Z"},{"id":326,"issue_id":"cap-fj8.1.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 1 found (0 auto-fixed, 0 to-file) — 1 nit (campaignKeys structurally identical to pipelineKeys, intentional extension point)\nSummary: Clean implementation following established patterns. Excellent test coverage with positive and negative assertions. Polisher combined duplicate switch cases and grouped test helpers.","created_at":"2026-02-16T07:50:33Z"},{"id":327,"issue_id":"cap-fj8.1.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add campaign-mode key bindings and help bar routing so the dashboard TUI shows context-aware help when in campaign mode.\nBefore: HelpBindings() only handled ModeBrowse, ModePipeline, and ModeSummary; campaign modes fell through to browse keys.\nAfter: campaignKeys struct with CampaignKeyMap() mirrors pipeline bindings (up/down/tab/abort). HelpBindings() explicitly routes ModeCampaign and ModeCampaignSummary.\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none — serve nit acknowledged as intentional extension point)\n\nCommit: a74fdc8\nPush: skipped (ephemeral branch, no remote)","created_at":"2026-02-16T07:52:08Z"}]}
{"id":"cap-fj8.1.4","title":"Wire campaign dispatch into dashboard model","description":"Integration — proves the full dashboard flow works end-to-end in tests.\n\nmodel.go changes:\n- New fields: campaign campaignState, campaignRunner CampaignRunner\n- WithCampaignRunner option\n- handleDispatch branches on BeadType: feature/epic → handleCampaignDispatch, else → handlePipelineDispatch\n- handleCampaignDispatch: set ModeCampaign, init campaignState, spawn dispatchCampaign goroutine\n- dispatchCampaign function (mirrors dispatchPipeline pattern)\n- Extend Update routing for campaign messages\n- Extend handleKey for ModeCampaign (abort) and ModeCampaignSummary (any key → browse)\n- Extend viewLeft/viewRight for campaign modes\n\nsummary.go: skip postPipeline for ModeCampaignSummary\n\nDeliverable: Model routing with campaign dispatch + tests\nTDD: true\n\nDepends on: Implement campaignState with inline phase nesting, Add campaign key bindings and help","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:57.368768901-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T00:02:58.719652318-08:00","closed_at":"2026-02-16T00:02:58.719652318-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.4","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-15T23:04:57.370657691-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.1.4","depends_on_id":"cap-fj8.1.2","type":"blocks","created_at":"2026-02-15T23:05:07.676683565-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.1.4","depends_on_id":"cap-fj8.1.3","type":"blocks","created_at":"2026-02-15T23:05:07.744498805-08:00","created_by":"Sam Biggins"}],"comments":[{"id":328,"issue_id":"cap-fj8.1.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire campaign dispatch into dashboard model so feature/epic beads run sequential child pipelines\nBefore: All beads dispatched as single pipelines regardless of type\nAfter: Feature/epic beads dispatch via CampaignRunner with campaign mode, task/empty beads fall back to pipeline mode\n\nFiles: 2 changed (model.go, summary.go), 1 test file updated (model_test.go)\nFindings: none","created_at":"2026-02-16T08:03:07Z"},{"id":329,"issue_id":"cap-fj8.1.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 2 minor found (0 auto-fixed, 2 to-file)\nPolish: 4 refinements applied (combined switch cases, table-driven dispatch test, blank identifiers in mock)\nSummary: Clean campaign dispatch wiring. Two minor issues identified: (1) campaign error without CampaignDoneMsg falls through to pipeline summary mode, (2) campaign abort doesn't set pipeline.aborting visual flag.","created_at":"2026-02-16T08:10:19Z"},{"id":330,"issue_id":"cap-fj8.1.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire campaign dispatch into dashboard model so feature/epic beads run sequential child pipelines\nBefore: All beads dispatched as single pipelines regardless of type\nAfter: Feature/epic beads dispatch via CampaignRunner with campaign mode, task/empty beads fall back to pipeline mode\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - cap-fj8.1.8: Handle campaign error when CampaignDoneMsg is missing [P2]\n  - cap-fj8.1.9: Set campaign abort visual feedback on cancel [P3]\n\nCommit: 756ddb0\nPush: skipped (ephemeral branch, no remote)","created_at":"2026-02-16T08:11:49Z"}]}
{"id":"cap-fj8.1.5","title":"Build dashboard campaign adapter and wire into CLI","description":"End-to-end — proves real campaign runs through dashboard.\n\ncmd/capsule/main.go:\n- dashboardCampaignAdapter implementing dashboard.CampaignRunner\n- dashboardCampaignPipelineRunner implementing campaign.PipelineRunner (bridges orchestrator.StatusUpdate → dashboard.PhaseUpdateMsg)\n- dashboardCampaignCallback implementing campaign.Callback (bridges lifecycle events → tea.Msg)\n- Wire into DashboardCmd.Run(): build stateStore, campaignCfg, adapter; add WithCampaignRunner to NewModel\n\nDeliverable: CLI wiring — capsule dashboard can run campaigns\nTDD: false\n\nDepends on: Wire campaign dispatch into dashboard model","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:01.339173046-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T09:06:52.50978099-08:00","closed_at":"2026-02-16T09:06:52.50978099-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.5","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-15T23:05:01.340968994-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.1.5","depends_on_id":"cap-fj8.1.4","type":"blocks","created_at":"2026-02-15T23:05:08.605792355-08:00","created_by":"Sam Biggins"}],"comments":[{"id":332,"issue_id":"cap-fj8.1.5","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: NEEDS_CHANGES\nIssues: 4 found (0 auto-fixed, 4 to address)\nSummary: Clean adapter layering but dead code in pipeline runner (lastUpdates never read), semantic type mismatch (provider.Status vs dashboard.PhaseStatus), SiblingContext lost in bridge, and campaign error not surfaced to dashboard (pre-existing from cap-fj8.1.4 dispatchCampaign). Major issue is pre-existing — consider filing follow-up rather than blocking this task.","created_at":"2026-02-16T17:05:42Z"},{"id":333,"issue_id":"cap-fj8.1.5","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire campaign runner adapter into dashboard CLI for end-to-end campaign execution\nBefore: Dashboard had campaign mode UI and dispatch logic but no real campaign adapter\nAfter: Full adapter chain (CampaignAdapter → PipelineRunner → Callback) wired in DashboardCmd.Run()\n\nProblems encountered:\n  - Serve found 4 issues: all filed as follow-up beads (not blocking)\n\nIssues filed:\n  - cap-fj8.1.10: Remove dead lastUpdates field [P3]\n  - cap-fj8.1.11: Fix provider.Status vs dashboard.PhaseStatus type mismatch [P3]\n  - cap-fj8.1.12: Propagate SiblingContext through bridge [P3]\n  - cap-fj8.1.13: Surface campaign errors to dashboard UI [P2]\n\nCommit: f672009\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-16T17:07:33Z"}]}
{"id":"cap-fj8.1.6","title":"Add Skipped count to CampaignDoneMsg","description":"Discovery Source: cap-fj8.1.1 - Add campaign types and CampaignRunner interface\nDiscovered During: serve phase\n\nImpact:\nCampaignDoneMsg tracks Passed and Failed counts but not Skipped.\nCampaign summary view will need to report skipped tasks (e.g. tasks\nskipped due to earlier failure) for accurate aggregate results.\n\nContext:\nCampaignDoneMsg in internal/dashboard/msg.go has TotalTasks, Passed,\nFailed fields but no Skipped field. Add Skipped int field.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:31:18.925448054-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T09:01:28.496173911-08:00","closed_at":"2026-02-16T09:01:28.496173911-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.6","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-15T23:31:18.927474859-08:00","created_by":"Sam Biggins"}],"comments":[{"id":331,"issue_id":"cap-fj8.1.6","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add Skipped count to CampaignDoneMsg for accurate aggregate campaign results\nBefore: CampaignDoneMsg only tracked Passed and Failed; skipped tasks were silently uncounted\nAfter: CampaignDoneMsg includes Skipped field; summary view displays skipped count when \u003e 0\n\nFiles: 4 changed (msg.go, msg_test.go, summary.go, main.go, model_test.go)\nFindings: none","created_at":"2026-02-16T17:01:28Z"}]}
{"id":"cap-fj8.1.7","title":"Consider aligning CampaignTaskStatus with PhaseStatus pattern","description":"Discovery Source: cap-fj8.1.1 - Add campaign types and CampaignRunner interface\nDiscovered During: serve phase (nit)\n\nImpact:\nPhaseStatus uses typed constants while CampaignTaskStatus uses raw strings.\nAsymmetry is minor but could cause confusion for maintainers.\n\nContext:\nCampaignTaskStatus in internal/dashboard/msg.go uses string constants\n(\"pending\", \"running\", etc.) while PhaseStatus in the same package may\nuse a different pattern. Low priority — cosmetic consistency.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:31:23.104695888-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T09:24:19.024505846-08:00","closed_at":"2026-02-16T09:24:19.024505846-08:00","close_reason":"No changes needed. Investigation confirmed both PhaseStatus and CampaignTaskStatus already use the identical typed string constant pattern. The only difference is CampaignTaskStatus omits PhaseError, which is intentional (campaign tasks are binary pass/fail).","dependencies":[{"issue_id":"cap-fj8.1.7","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-15T23:31:23.106599286-08:00","created_by":"Sam Biggins"}],"comments":[{"id":337,"issue_id":"cap-fj8.1.7","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed (no-op)\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Investigate whether CampaignTaskStatus and PhaseStatus use different patterns\nBefore: Both types already use identical typed string constant pattern\nAfter: No changes - confirmed alignment, closed as resolved\n\nFiles: 0 changed\nFindings: none","created_at":"2026-02-16T17:24:26Z"}]}
{"id":"cap-fj8.1.8","title":"Handle campaign error when CampaignDoneMsg is missing","description":"Discovery Source: cap-fj8.1.4 - Wire campaign dispatch into dashboard model\nDiscovered During: serve phase\n\nImpact:\nIf a campaign runner returns an error without sending CampaignDoneMsg,\nchannelClosedMsg falls through to ModeSummary (pipeline summary) instead\nof ModeCampaignSummary. This would show an empty/incorrect summary view.\n\nContext:\nIn model.go Update() channelClosedMsg handler, the campaign path only\nactivates when m.campaignDone != nil. If the campaign goroutine errors\nwithout sending CampaignDoneMsg, mode falls through to ModeSummary.\nShould synthesize a failed CampaignDoneMsg or handle the error case.","status":"closed","priority":2,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-16T00:11:16.310469098-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T09:34:09.983441699-08:00","closed_at":"2026-02-16T09:34:09.983441699-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.8","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-16T00:11:16.312598847-08:00","created_by":"Sam Biggins"}],"comments":[{"id":338,"issue_id":"cap-fj8.1.8","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-16T17:31:38Z"},{"id":339,"issue_id":"cap-fj8.1.8","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Fix campaign error handling when CampaignDoneMsg is missing\nBefore: If campaign runner returned error without sending CampaignDoneMsg, channelClosedMsg fell through to ModeSummary (pipeline summary) instead of ModeCampaignSummary\nAfter: When channelClosedMsg arrives in campaign mode without CampaignDoneMsg, a synthetic failed CampaignDoneMsg is created from campaign state, and mode transitions correctly to ModeCampaignSummary\n\nFiles: 2 changed (model.go, model_test.go)\nFindings: none","created_at":"2026-02-16T17:34:15Z"},{"id":340,"issue_id":"cap-fj8.1.8","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 2 found (0 auto-fixed, 0 to-file) — 1 minor (synthesized CampaignDoneMsg omits Skipped, acceptable default), 1 nit (test could verify more fields)\nPolish: 2 refinements applied (comment update, test error message)\nSummary: Clean minimal fix. Synthesized fallback correctly pulls from live campaign state. Test follows codebase patterns.","created_at":"2026-02-16T17:37:39Z"}]}
{"id":"cap-fj8.1.9","title":"Set campaign abort visual feedback on cancel","description":"Discovery Source: cap-fj8.1.4 - Wire campaign dispatch into dashboard model\nDiscovered During: serve phase\n\nImpact:\nWhen user presses q/ctrl-c during a campaign, m.aborting is set but the\ncampaign state's nested pipeline.aborting flag is not set. This means\nthe pipeline view won't show aborting visual indicator during campaign cancel.\nMinor UX gap - abort still works, but no visual feedback in the pipeline pane.\n\nContext:\nIn model.go handleKey, ModeCampaign cancel case sets m.aborting and calls\nm.cancelPipeline() but doesn't set m.campaign.pipeline.aborting = true\nlike the ModePipeline case does for m.pipeline.aborting.","status":"closed","priority":3,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-16T00:11:21.638359285-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T09:49:48.587214914-08:00","closed_at":"2026-02-16T09:49:48.587214914-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.1.9","depends_on_id":"cap-fj8.1","type":"parent-child","created_at":"2026-02-16T00:11:21.640564903-08:00","created_by":"Sam Biggins"}],"comments":[{"id":344,"issue_id":"cap-fj8.1.9","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-16T17:49:02Z"},{"id":345,"issue_id":"cap-fj8.1.9","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Set campaign pipeline aborting flag for visual feedback on cancel\nBefore: Pressing q/ctrl-c in campaign mode set m.aborting but not m.campaign.pipeline.aborting, so the nested pipeline view showed no aborting indicator\nAfter: Campaign cancel now sets m.campaign.pipeline.aborting = true, matching the ModePipeline cancel behavior and showing the aborting visual indicator\n\nFiles: 2 changed (model.go, model_test.go)\nFindings: none","created_at":"2026-02-16T17:49:48Z"},{"id":347,"issue_id":"cap-fj8.1.9","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Set campaign pipeline aborting flag for visual feedback on cancel\nBefore: Pressing q/ctrl-c in campaign mode set m.aborting but not m.campaign.pipeline.aborting, so the nested pipeline view showed no aborting indicator\nAfter: Campaign cancel now sets m.campaign.pipeline.aborting = true, matching the ModePipeline cancel behavior\n\nProblems encountered:\n  - (none)\n\nIssues filed: none\n\nCommit: 11f3d8a\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-16T17:56:16Z"}]}
{"id":"cap-fj8.2","title":"History view with archived pipeline results","description":"As a developer, I want to browse completed beads and see their pipeline results in the dashboard, so I can review past work without leaving the TUI.\n\nAcceptance Criteria:\n- Pressing h in browse mode toggles between ready beads and closed beads\n- Closed beads displayed with muted styling and [closed] tag\n- Selecting a closed bead shows its detail + archived summary + worklog excerpt in right pane\n- Most recent 50 closed beads shown (most recent first)\n- Pressing h again returns to ready beads view\n- Help bar updates to show 'h: history' or 'h: ready' based on current view\n\nTracer Strategy:\n  Minimal flow: Press h → fetch closed beads → display list → select one → show archived detail\n  Layers: bead client → dashboard lister → browse state → archive reader → detail rendering\n  Expansion: Full phase output log viewing, search/filter within history","status":"closed","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:08.388850511-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T11:33:32.280231626-08:00","closed_at":"2026-02-16T11:33:32.280231626-08:00","close_reason":"All 4 children completed. History view with archived pipeline results fully implemented: h-key toggle between ready/closed beads, archive reader, detail view with summary+worklog, muted styling. All serve review issues addressed.","dependencies":[{"issue_id":"cap-fj8.2","depends_on_id":"cap-fj8","type":"parent-child","created_at":"2026-02-15T23:04:08.390649409-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.2","depends_on_id":"cap-fj8.1","type":"blocks","created_at":"2026-02-15T23:04:26.490438117-08:00","created_by":"Sam Biggins"}],"comments":[{"id":365,"issue_id":"cap-fj8.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add history view so developers can browse closed beads and see their archived pipeline results in the dashboard TUI\nBefore: Dashboard only showed ready (open) beads; no way to review completed work\nAfter: Press 'h' to toggle history view; closed beads with muted styling; detail pane shows archived summary + worklog excerpt\n\nProblems encountered:\n  - State corruption on refresh in closed view: Fixed by resetting showClosed in refresh handler\n  - Enter dispatching closed beads for pipeline run: Fixed by adding closed-view guard\n  - Two serve review rounds needed for browse toggle task\n\nIssues filed:\n  - cap-fj8.5: Add null byte check to validateBeadID [P4]\n  - cap-fj8.6: Copy readyBeads slice in applyBeadList to avoid aliasing [P4]\n  - cap-fj8.7: Handle priority badge ANSI codes inside mutedText style [P4]\n\nCommit: 6675df3\nPush: skipped (ephemeral branch, local merge to main)","created_at":"2026-02-16T19:34:21Z"}]}
{"id":"cap-fj8.2.1","title":"Add Closed() method to bead client","description":"Data layer — proves we can fetch closed beads from bd CLI.\n\ninternal/bead/bead.go:\n- Add Closed(limit int) ([]Summary, error) method\n- Calls bd list --status=closed --json, parses into []Summary\n- Respects limit parameter for result count\n\nDeliverable: bead.Client.Closed() with tests\nTDD: true","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:14.52524632-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T10:22:48.562866046-08:00","closed_at":"2026-02-16T10:22:48.562866046-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.2.1","depends_on_id":"cap-fj8.2","type":"parent-child","created_at":"2026-02-15T23:05:14.527795396-08:00","created_by":"Sam Biggins"}],"comments":[{"id":354,"issue_id":"cap-fj8.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add data layer method to fetch closed beads from bd CLI\nBefore: Client had Ready() and Resolve() but no way to list closed beads\nAfter: Client.Closed(limit) fetches up to limit closed beads via bd list --status=closed\n\nFiles: 2 changed (bead.go, bead_test.go)\nFindings: none","created_at":"2026-02-16T18:22:55Z"},{"id":356,"issue_id":"cap-fj8.2.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add data layer method to fetch closed beads from bd CLI for history view\nBefore: Client had Ready() and Resolve() but no way to list closed beads\nAfter: Client.Closed(limit) fetches up to limit closed beads, toSummaries() shared helper extracted\n\nProblems encountered:\n  - Tidy was not run after cook in prior session; committed in this session\n\nIssues filed: none\nCommit: 78bb104\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-16T18:27:47Z"}]}
{"id":"cap-fj8.2.2","title":"Create archive reader for pipeline results","description":"Data layer — proves we can read archived worklog and summary files.\n\nNew file internal/dashboard/archive.go:\n- ArchiveReader interface: ReadWorklog(beadID) (string, error), ReadSummary(beadID) (string, error)\n- FileArchiveReader struct with baseDir (.capsule/logs)\n- Reads .capsule/logs/\u003cbeadID\u003e/worklog.md and summary.md\n- Returns content as string, os.ErrNotExist if not found\n\nDeliverable: archive.go with FileArchiveReader + tests\nTDD: true","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:18.04416729-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T10:36:04.708731659-08:00","closed_at":"2026-02-16T10:36:04.708731659-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.2.2","depends_on_id":"cap-fj8.2","type":"parent-child","created_at":"2026-02-15T23:05:18.046995673-08:00","created_by":"Sam Biggins"}],"comments":[{"id":357,"issue_id":"cap-fj8.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add data layer for reading archived pipeline worklog and summary files from .capsule/logs/\nBefore: No way to programmatically read archived pipeline results from the dashboard package\nAfter: ArchiveReader interface + FileArchiveReader provide typed access to archived worklog.md and summary.md per bead ID\n\nFiles: 2 changed (archive.go, archive_test.go)\nFindings: none","created_at":"2026-02-16T18:36:12Z"},{"id":358,"issue_id":"cap-fj8.2.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: NEEDS_CHANGES\nIssues: 3 found (0 auto-fixed, 0 to-file)\n  - [major] archive.go:37 - Missing beadID validation against path traversal (codebase pattern: worklog, worktree, state all validate)\n  - [minor] archive.go:25,31 - Doc comments say 'unwrapped' but os.ReadFile returns wrapped *fs.PathError\n  - [minor] archive.go:38-41 - Error not wrapped with package context per go-conventions.md\nSummary: Clean data layer with good interface design, but needs beadID validation consistent with established codebase pattern before commit.","created_at":"2026-02-16T18:38:26Z"}]}
{"id":"cap-fj8.2.3","title":"Implement browse history toggle","description":"View layer — proves history toggle works in the TUI.\n\nmsg.go: extend BeadLister with Closed(limit int) ([]BeadSummary, error)\nbrowse.go:\n- Add showClosed bool and closedBeads []BeadSummary to browseState\n- h key toggles: fetches closed beads via lister.Closed(50), switches display\n- Closed beads rendered with muted style\n- Help bar shows h: history / h: ready based on state\n\nkeys.go: add History binding to browseKeys\n\nDeliverable: History toggle in browse mode with tests\nTDD: true\n\nDepends on: Add Closed() method to bead client, Create archive reader for pipeline results","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:22.938413946-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T11:09:48.321915968-08:00","closed_at":"2026-02-16T11:09:48.321915968-08:00","close_reason":"Completed and approved by serve. Two cook cycles: initial implementation + rework fixes. All state transitions correctly reset history state, enter key guarded, tests comprehensive.","dependencies":[{"issue_id":"cap-fj8.2.3","depends_on_id":"cap-fj8.2","type":"parent-child","created_at":"2026-02-15T23:05:22.94008722-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.2.3","depends_on_id":"cap-fj8.2.1","type":"blocks","created_at":"2026-02-15T23:05:32.951408789-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.2.3","depends_on_id":"cap-fj8.2.2","type":"blocks","created_at":"2026-02-15T23:05:33.012826299-08:00","created_by":"Sam Biggins"}],"comments":[{"id":359,"issue_id":"cap-fj8.2.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add browse history toggle so users can view closed beads in the dashboard TUI\nBefore: Dashboard browse pane only showed ready (open) beads with no way to view completed work\nAfter: Users can press 'h' to toggle between ready and closed bead lists; closed beads render with muted style; help bar dynamically shows 'h: history' or 'h: ready' based on current state\n\nFiles: 6 changed (msg.go, browse.go, keys.go, help.go, styles.go, main.go) + 3 test files\nFindings: None","created_at":"2026-02-16T18:53:47Z"},{"id":360,"issue_id":"cap-fj8.2.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: NEEDS_CHANGES\nIssues: 5 found (0 auto-fixed, 0 to-file)\n  - [major] model.go:396-401 - Pressing 'r' (refresh) while in closed/history view loads ready beads but showClosed remains true, corrupting visual state (muted styling on ready beads)\n  - [minor] summary.go returnToBrowse methods - returnToBrowse/returnToBrowseAfterAbort/returnToBrowseFromCampaign do not reset showClosed or readyBeads\n  - [minor] browse.go:115-121 - Enter key dispatches closed beads for pipeline run with no guard\n  - [nit] styles.go:22-24 - MutedText doc comment says 'returns' but it's a var, not a function\n  - [nit] archive.go:45-55 - validateBeadID could optionally check for null bytes\nSummary: Good architecture following Bubble Tea patterns. Archive reader fixed per prior review. Main issue: showClosed state not reset in refresh and return-to-browse paths, causing muted rendering of ready beads.","created_at":"2026-02-16T18:56:48Z"},{"id":361,"issue_id":"cap-fj8.2.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Fix serve review issues — state corruption on refresh/return-to-browse, enter guard for closed beads, doc comment nit\nBefore: Pressing 'r' in closed view loaded ready beads but showClosed stayed true (muted rendering corruption); returnToBrowse methods didn't reset showClosed/readyBeads; enter dispatched closed beads for pipeline run; MutedText doc said 'returns'\nAfter: Refresh resets showClosed to false and clears readyBeads; all three returnToBrowse methods reset history state; enter is guarded against dispatch in closed view; MutedText doc correctly says 'is a style'\n\nFiles: 4 changed (model.go, browse.go, summary.go, styles.go) + 3 test files (browse_test.go, model_test.go, summary_test.go)\nFindings: None","created_at":"2026-02-16T19:04:22Z"},{"id":362,"issue_id":"cap-fj8.2.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 3 found (0 auto-fixed, 0 to-file) — 3 nits only (unreachable 'r' handler in browseState, null byte in validateBeadID, MutedText mutable global)\nPolish: 1 refinement applied (consolidated duplicate handleBeadList/handleClosedList into shared applyBeadList helper)\nSummary: Clean implementation following Bubble Tea patterns. All state transitions correctly reset history state. Path traversal protection solid. Good test coverage across toggle lifecycle, error cases, and all return-to-browse paths.","created_at":"2026-02-16T19:08:52Z"},{"id":363,"issue_id":"cap-fj8.2.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 3 found (0 auto-fixed, 0 to-file) — 3 nits only (null byte in validateBeadID, readyBeads saved by reference, priority badge ANSI inside MutedText)\nPolish: 3 refinements applied (inlined trivial delegate methods, unexported MutedText→mutedText, updated reference)\nSummary: Clean implementation following Bubble Tea patterns. All state transitions correctly reset history state. Path traversal protection solid. Good test coverage across toggle lifecycle, error cases, and all return-to-browse paths.","created_at":"2026-02-16T19:16:37Z"}]}
{"id":"cap-fj8.2.4","title":"Show archived results in closed bead detail view","description":"Integration — proves archived data renders in the detail pane.\n\nmodel.go:\n- Add archive ArchiveReader field + WithArchiveReader option\n- When viewing a closed bead: standard detail + separator + archived summary + worklog excerpt\n- Progressive disclosure: summary shown first, worklog below (user scrolls to see)\n\ncmd/capsule/main.go:\n- Extend beadListerAdapter with Closed() method\n- Create fileArchiveReader, wire with WithArchiveReader\n\nDeliverable: Closed bead detail with archived results + CLI wiring\nTDD: true\n\nDepends on: Implement browse history toggle","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:28.050768068-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T11:24:30.802408657-08:00","closed_at":"2026-02-16T11:24:30.802408657-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.2.4","depends_on_id":"cap-fj8.2","type":"parent-child","created_at":"2026-02-15T23:05:28.052504676-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.2.4","depends_on_id":"cap-fj8.2.3","type":"blocks","created_at":"2026-02-15T23:05:33.076505126-08:00","created_by":"Sam Biggins"}],"comments":[{"id":364,"issue_id":"cap-fj8.2.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Show archived pipeline results when viewing closed beads in dashboard detail pane\nBefore: Closed beads only showed standard detail (ID, title, description) - no pipeline results\nAfter: Closed bead detail now shows standard info + separator + archived summary + worklog excerpt\n\nFiles: 3 changed (model.go, model_test.go, main.go)\nFindings: none","created_at":"2026-02-16T19:24:30Z"}]}
{"id":"cap-fj8.3","title":"Campaign completed task inspection","description":"As a developer, I want to navigate to completed tasks within a campaign and see their phase reports, so I can review what happened during a campaign run.\n\nAcceptance Criteria:\n- In campaign mode, cursor can navigate to completed tasks\n- Selecting a completed task expands its phases (progressive disclosure)\n- Right pane shows phase reports for the selected completed task\n- Phase results stored from CampaignTaskDoneMsg for later inspection\n\nTracer Strategy:\n  Minimal flow: Campaign runs → task completes → user moves cursor to it → phases expand → right pane shows reports\n  Layers: campaign messages → campaign state → view rendering\n  Expansion: Navigate between tasks with j/k, auto-collapse on deselect","status":"open","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:14.161855485-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:04:14.161855485-08:00","dependencies":[{"issue_id":"cap-fj8.3","depends_on_id":"cap-fj8","type":"parent-child","created_at":"2026-02-15T23:04:14.163531411-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.3","depends_on_id":"cap-fj8.1","type":"blocks","created_at":"2026-02-15T23:04:28.270533402-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.3.1","title":"Carry phase reports in campaign task completion messages","description":"Data flow — proves phase results survive the callback bridge.\n\nmsg.go: extend CampaignTaskDoneMsg with PhaseReports []PhaseReport\ncampaign.go: store phase reports per task in campaignState\ncmd/capsule/main.go: dashboardCampaignCallback.OnTaskComplete maps campaign.TaskResult.PhaseResults → dashboard.PhaseReport\n\nDeliverable: Phase reports carried through campaign messages\nTDD: true","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:40.233294004-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T11:51:29.11332682-08:00","closed_at":"2026-02-16T11:51:29.11332682-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.3.1","depends_on_id":"cap-fj8.3","type":"parent-child","created_at":"2026-02-15T23:05:40.236062929-08:00","created_by":"Sam Biggins"}],"comments":[{"id":366,"issue_id":"cap-fj8.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-16T19:44:47Z"},{"id":367,"issue_id":"cap-fj8.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Carry phase reports through campaign task completion messages so the dashboard can display per-task phase results\nBefore: CampaignTaskDoneMsg only carried success/duration; phase details were lost at the callback bridge\nAfter: CampaignTaskDoneMsg includes PhaseReports; campaignState stores reports per task by bead ID; dashboardCampaignCallback maps orchestrator PhaseResults to dashboard PhaseReports\n\nFiles: 4 changed\nFindings: none","created_at":"2026-02-16T19:51:38Z"},{"id":369,"issue_id":"cap-fj8.3.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Carry phase reports through campaign task completion messages so the dashboard can display per-task phase results\nBefore: CampaignTaskDoneMsg only carried success/duration; phase details were lost at the callback bridge\nAfter: CampaignTaskDoneMsg includes PhaseReports; campaignState stores reports per task by bead ID; dashboardCampaignCallback maps orchestrator PhaseResults to dashboard PhaseReports\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: 27a94df\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-16T19:58:27Z"}]}
{"id":"cap-fj8.3.2","title":"Implement completed task expansion in campaign view","description":"View layer — proves progressive disclosure works for completed tasks.\n\ncampaign.go:\n- Track selectedIdx (cursor) separate from currentIdx (running task)\n- When cursor is on a completed task: expand its stored phases below\n- Right pane delegates to stored phase reports for completed task\n- Only one task expanded at a time (selected one)\n\nDeliverable: Completed task inspection with phase expansion\nTDD: true\n\nDepends on: Carry phase reports in campaign task completion messages","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:43.646052311-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T12:05:10.949562537-08:00","closed_at":"2026-02-16T12:05:10.949562537-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fj8.3.2","depends_on_id":"cap-fj8.3","type":"parent-child","created_at":"2026-02-15T23:05:43.648146659-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.3.2","depends_on_id":"cap-fj8.3.1","type":"blocks","created_at":"2026-02-15T23:05:47.667854251-08:00","created_by":"Sam Biggins"}],"comments":[{"id":370,"issue_id":"cap-fj8.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-16T19:58:57Z"},{"id":371,"issue_id":"cap-fj8.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add progressive disclosure for completed tasks in campaign view\nBefore: Completed tasks showed only checkmark + duration, no way to inspect phase results\nAfter: Users can navigate tasks with cursor (up/down/j/k), select a completed task to expand its stored phase reports inline, and view phase details in right pane\n\nFiles: 3 changed (campaign.go, campaign_test.go, model.go)\nFindings: none","created_at":"2026-02-16T20:05:16Z"}]}
{"id":"cap-fj8.4","title":"Pipeline context and responsiveness improvements","description":"As a developer, I want the dashboard to feel responsive and always show me what's running, so I don't lose context or get distracted by visual noise.\n\nAcceptance Criteria:\n- Pipeline and campaign modes show a bead header line (ID + title) at top of left pane\n- Running phases show elapsed time (updates every second)\n- Rapid cursor scrolling in browse mode doesn't cause right-pane thrash (debounced)\n- After returning from pipeline/campaign, cursor restores to the previously run bead\n- Post-pipeline result (merge/close success/failure) shown as status line for 5 seconds\n\nTracer Strategy:\n  Minimal flow: Run pipeline → see header + elapsed timer → return to browse → see status line → cursor on same bead\n  Layers: pipeline state → model state → view rendering → tea.Tick timers\n  Expansion: Grouped browse list with section headers, full ? help overlay","status":"open","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:04:20.818533884-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:04:20.818533884-08:00","dependencies":[{"issue_id":"cap-fj8.4","depends_on_id":"cap-fj8","type":"parent-child","created_at":"2026-02-15T23:04:20.820319705-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.4","depends_on_id":"cap-fj8.2","type":"blocks","created_at":"2026-02-15T23:04:30.071704423-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.4","depends_on_id":"cap-fj8.3","type":"blocks","created_at":"2026-02-15T23:04:30.287825514-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.4.1","title":"Add bead header to pipeline and campaign views","description":"Context preservation — proves user always knows what's running.\n\npipeline.go: accept optional beadID + title fields. Render as dim first line in View() before phase list.\ncampaign.go: already has header — verify it shows parentTitle.\nmodel.go: pass dispatchedBeadID title to pipeline state on dispatch.\n\nDeliverable: Bead header in pipeline mode\nTDD: true","status":"open","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:54.886171206-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:05:54.886171206-08:00","dependencies":[{"issue_id":"cap-fj8.4.1","depends_on_id":"cap-fj8.4","type":"parent-child","created_at":"2026-02-15T23:05:54.887951919-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.4.2","title":"Add elapsed time ticker to running phases","description":"Responsiveness — proves real-time feedback works.\n\npipeline.go:\n- Track phaseStartedAt time.Time, updated on PhaseRunning status\n- In View(), running phase shows elapsed: \"⋯ execute (42s)\"\n- Use 1-second tea.Tick when pipeline/campaign is running\nmodel.go: start/stop tick based on mode transitions\n\nDeliverable: Elapsed time on running phases\nTDD: true\n\nDepends on: Add bead header to pipeline and campaign views","status":"open","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:05:57.810451848-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:05:57.810451848-08:00","dependencies":[{"issue_id":"cap-fj8.4.2","depends_on_id":"cap-fj8.4","type":"parent-child","created_at":"2026-02-15T23:05:57.812259984-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.4.2","depends_on_id":"cap-fj8.4.1","type":"blocks","created_at":"2026-02-15T23:06:12.235868423-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.4.3","title":"Implement debounced bead resolution","description":"Responsiveness — prevents right-pane visual thrash.\n\nmodel.go:\n- In maybeResolve(): set pendingResolveID and start 150ms tea.Tick\n- On tick: if pendingResolveID unchanged, fire resolveBeadCmd\n- On cursor move: update pendingResolveID (cancels old)\n- Cache hits still show instantly (bypass debounce)\n- New msg type: resolveDebounceMsg\n\nDeliverable: Debounced resolution with instant cache hits\nTDD: true","status":"open","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:06:02.838346121-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:06:02.838346121-08:00","dependencies":[{"issue_id":"cap-fj8.4.3","depends_on_id":"cap-fj8.4","type":"parent-child","created_at":"2026-02-15T23:06:02.840213804-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.4.4","title":"Add sticky cursor and post-pipeline status line","description":"Context preservation — proves return-to-browse experience is smooth.\n\nmodel.go:\n- lastDispatchedID field. On returnToBrowse, after BeadListMsg, find and set cursor to lastDispatchedID.\n- statusMsg + statusExpiry fields. Set on PostPipelineDoneMsg with success/failure message.\n- Clear status after 5s via tea.Tick. Render between panes and help bar.\n- New msg type: statusClearMsg\n\nDeliverable: Sticky cursor + status line with timeout\nTDD: true\n\nDepends on: Implement debounced bead resolution","status":"open","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T23:06:07.490950382-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T23:06:07.490950382-08:00","dependencies":[{"issue_id":"cap-fj8.4.4","depends_on_id":"cap-fj8.4","type":"parent-child","created_at":"2026-02-15T23:06:07.492899899-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-fj8.4.4","depends_on_id":"cap-fj8.4.3","type":"blocks","created_at":"2026-02-15T23:06:12.304079575-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.5","title":"Add null byte check to validateBeadID","description":"Discovery Source: cap-fj8.2.3 - Implement browse history toggle\nDiscovered During: serve phase\n\nImpact:\nDefensive hardening only. Current path traversal validation catches all realistic attack vectors.\nNull bytes in bead IDs are theoretically possible but extremely unlikely in practice.\n\nContext:\narchive.go:45-55 - validateBeadID checks for \"..\" and path separators but not null bytes.\nNoted as nit in both serve rounds.\nRelated: internal/dashboard/archive.go","status":"open","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-16T11:33:19.578792557-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T11:33:19.578792557-08:00","dependencies":[{"issue_id":"cap-fj8.5","depends_on_id":"cap-fj8","type":"parent-child","created_at":"2026-02-16T11:33:19.580537094-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.6","title":"Copy readyBeads slice in applyBeadList to avoid aliasing","description":"Discovery Source: cap-fj8.2.3 - Implement browse history toggle\nDiscovered During: serve phase\n\nImpact:\nreadyBeads field stores the slice directly from the message, creating potential aliasing.\nLow risk since Bubble Tea messages are ephemeral, but copying would be more defensive.\n\nContext:\nbrowse.go applyBeadList helper stores slice by reference.\nNoted as nit in final serve round.\nRelated: internal/dashboard/browse.go","status":"open","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-16T11:33:22.66351184-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T11:33:22.66351184-08:00","dependencies":[{"issue_id":"cap-fj8.6","depends_on_id":"cap-fj8","type":"parent-child","created_at":"2026-02-16T11:33:22.796436612-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fj8.7","title":"Handle priority badge ANSI codes inside mutedText style","description":"Discovery Source: cap-fj8.2.3 - Implement browse history toggle\nDiscovered During: serve phase\n\nImpact:\nPriority badges contain ANSI color codes that may conflict with mutedText styling\nwhen rendering closed beads. Visual artifact only, not functional.\n\nContext:\nstyles.go mutedText wraps content that may already contain ANSI sequences from priority badges.\nNoted as nit in final serve round.\nRelated: internal/dashboard/styles.go, internal/dashboard/browse.go","status":"open","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-16T11:33:25.261774607-08:00","created_by":"Sam Biggins","updated_at":"2026-02-16T11:33:25.261774607-08:00","dependencies":[{"issue_id":"cap-fj8.7","depends_on_id":"cap-fj8","type":"parent-child","created_at":"2026-02-16T11:33:25.263627627-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-fo4","title":"Add acceptance criteria check to test-setup-template.sh [4/7]","description":"Source: cap-8ax.1 criterion 3 evidence audit. Report claims bd show returns acceptance criteria, but test only checks title, description, and parent reference. Should assert acceptance criteria content appears in bd show output.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T13:26:21.79130024-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T09:09:06.218945597-08:00","closed_at":"2026-02-15T09:09:06.218945597-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-fo4","depends_on_id":"cap-8ax","type":"blocks","created_at":"2026-02-07T13:26:32.857949571-08:00","created_by":"Sam Biggins"}],"comments":[{"id":292,"issue_id":"cap-fo4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Assert acceptance criteria content in bd show output within test-setup-template.sh\nBefore: Test 4 only checked title, description, and parent reference\nAfter: Test 4 also checks ACCEPTANCE CRITERIA header and actual criteria content\n\nFiles: 1 changed\nFindings: none","created_at":"2026-02-15T17:09:06Z"},{"id":293,"issue_id":"cap-fo4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: Clean, minimal change. Adds ACCEPTANCE CRITERIA header and content check to test 4. Follows existing patterns.","created_at":"2026-02-15T17:11:03Z"},{"id":294,"issue_id":"cap-fo4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Assert acceptance criteria content in bd show output within test-setup-template.sh\nBefore: Test 4 only checked title, description, and parent reference\nAfter: Test 4 also checks ACCEPTANCE CRITERIA header and content\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: b579576\nPush: success","created_at":"2026-02-15T17:11:45Z"}]}
{"id":"cap-i25","title":"Pipeline summary narrative agent","description":"Add a summary agent that runs after pipeline completion (success or failure) and produces a human-readable narrative covering: what was accomplished, challenges encountered, end state, and feature/epic progress context. Uses Claude to generate prose from structured worklog + bead hierarchy data. Outputs to stdout, archive file, and bead comment.","acceptance_criteria":"Summary runs on both success and failure paths; Narrative covers accomplishments, challenges, end state, and feature/epic context; Output saved to .capsule/logs/\u003cbead-id\u003e/summary.md; Summary posted as bead comment; Summary failure never affects pipeline exit code","status":"closed","priority":0,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-07T16:14:17.866399748-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T16:19:18.963301365-08:00","closed_at":"2026-02-07T16:19:18.963301365-08:00","close_reason":"Closed","comments":[{"id":82,"issue_id":"cap-i25","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after review fixes)\nIssues: 0 blocking, 1 major fixed (eval to printf-v), 2 minor fixed (jq gating, prep summary)\nSummary: Well-structured implementation following codebase patterns. eval injection risk addressed, jq prerequisite gating added, prep failure now triggers summary.","created_at":"2026-02-08T00:38:36Z"},{"id":355,"issue_id":"cap-i25","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 1 minor found (0 auto-fixed, 1 to-file)\nPolish: extracted toSummaries() helper from Closed()/Ready()\nSummary: Clean addition following established Ready() pattern. Minor: no limit\u003c=0 guard.","created_at":"2026-02-16T18:26:27Z"},{"id":368,"issue_id":"cap-i25","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 2 minor, 2 nits (none auto-fixed, 0 filed)\nSummary: Clean data plumbing for phase reports through campaign callbacks into dashboard state. Good symmetry with existing patterns, thorough edge case coverage. Minor observations: OnTaskFail doesn't propagate phase reports (pre-existing interface limitation), Findings field not mapped (out of scope). Nit: providerStatusToDashboard lacks dedicated unit test.","created_at":"2026-02-16T19:56:47Z"},{"id":372,"issue_id":"cap-i25","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 1 found (1 auto-fixed, 0 to-file)\nSummary: Clean cursor/selection implementation following established patterns. One minor fix applied: formatTaskReport now handles PhaseSkipped status correctly.","created_at":"2026-02-16T20:09:41Z"}]}
{"id":"cap-ih8","title":"Smoke test: --no-tui flag","description":"Binary-level smoke test for --no-tui flag. Unit tests cover parsing and display factory but no real binary test verifies acceptance. Discovered during cap-awd.2.2 plate phase (maitre review).","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T20:39:59.867972443-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T20:44:36.815636626-08:00","closed_at":"2026-02-11T20:44:36.815636626-08:00","close_reason":"Closed","comments":[{"id":194,"issue_id":"cap-ih8","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 1 nit (pattern-wide, no action needed)\nSummary: Well-designed smoke test following suite conventions. Polisher applied minor BDD comment style fixes for consistency.","created_at":"2026-02-12T04:51:32Z"},{"id":195,"issue_id":"cap-ih8","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add binary-level smoke test for --no-tui flag\nBefore: No smoke test verifying the real binary accepts --no-tui\nAfter: Smoke test validates flag acceptance via unknown-provider error path\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\nCommit: e6251ba\nPush: success (origin/epic/cap-awd)","created_at":"2026-02-12T04:52:48Z"}]}
{"id":"cap-kqm","title":"Wire shell tests into Makefile test-full gate","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T13:19:04.684501511-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T13:20:32.526336218-08:00","closed_at":"2026-02-15T13:20:32.526336218-08:00","close_reason":"Closed","comments":[{"id":306,"issue_id":"cap-kqm","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found\nSummary: Makefile test-scripts target well-designed with collect-all-failures pattern. CLAUDE.md docs accurate.","created_at":"2026-02-15T21:31:27Z"},{"id":309,"issue_id":"cap-kqm","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire shell tests into Makefile so they run as part of the feature close gate\nBefore: 17 shell test scripts in tests/scripts/ only runnable manually\nAfter: make test-scripts runs all test-*.sh scripts; make test-full includes them\n\nProblems encountered:\n  - test-full-pipeline.sh has pre-existing merge failure (git index.lock) — not related to this change\n\nIssues filed:\n  - (none)\n\nCommit: fed1e33, cc85ef0\nPush: success","created_at":"2026-02-15T21:39:42Z"}]}
{"id":"cap-kxw","title":"Task Dashboard TUI","description":"Rich two-pane interactive TUI for browsing ready beads, inspecting bead details, dispatching pipelines with phase report browsing, and viewing results in a continuous loop. New internal/dashboard/ package reimplements phase rendering for cursor-driven pane layout. Tab switches focus between left (list) and right (detail/report) panes. Zero changes to internal/tui/ — capsule run works identically.\n\nPlanning context: docs/planning/context-capsule-v2/","status":"closed","priority":3,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:16:53.318175558-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T14:38:47.464456552-08:00","closed_at":"2026-02-14T14:38:47.464456552-08:00","close_reason":"All 3 features plated, E2E validated by critic, lint/test-full/smoke all pass. Acceptance report: docs/features/cap-kxw-acceptance.md","comments":[{"id":202,"issue_id":"cap-kxw","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after auto-fixes)\nIssues: 5 found (5 auto-fixed, 0 to file)\nSummary: Planning artifacts are thorough and well-structured. Auto-fixed stale README counts, missing acceptance criterion for force-quit, and decisions log qualifier. No code changes — planning-only commit.","created_at":"2026-02-13T01:33:00Z"}]}
{"id":"cap-kxw.1","title":"Dashboard shell with two-pane layout and bead browsing","description":"As a user, I want to run capsule dashboard and see a two-pane layout with a navigable bead list on the left and bead detail on the right so that I can browse available work with full context.\n\nAcceptance Criteria:\n- Given a TTY, When capsule dashboard runs, Then a loading spinner appears followed by a two-pane layout with rounded borders\n- Given the two-pane layout, When beads load, Then the left pane shows ready beads with ID, title, priority badge (P0-P4), and type\n- Given a selected bead, When the cursor moves, Then the right pane updates with resolved bead detail (hierarchy, description, acceptance criteria)\n- Given the layout, When I press Tab, Then focus switches between panes (border color changes) and arrow keys control the focused pane\n- Given the bead list, When I press 'r', Then the list and detail cache refresh from bd ready\n- Given the bead list, When I press 'q', Then the dashboard exits cleanly\n- Given no TTY, When capsule dashboard runs, Then an error prints saying dashboard requires a terminal","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:17:04.193282029-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:13:07.00036975-08:00","closed_at":"2026-02-13T21:13:07.00036975-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.1","depends_on_id":"cap-kxw","type":"parent-child","created_at":"2026-02-12T17:17:04.195074321-08:00","created_by":"Sam Biggins"}],"comments":[{"id":254,"issue_id":"cap-kxw.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 2 nits (deferred)\nSummary: Clean plate commit. Bead type rendering and test are minimal and correct. Acceptance doc maps all 7 ACs to test evidence. Polisher unified one test assertion pattern.","created_at":"2026-02-14T05:18:41Z"},{"id":255,"issue_id":"cap-kxw.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Complete feature acceptance for dashboard shell with two-pane layout\nBefore: All 5 child tasks closed but feature not plated — bead type missing from list view (AC #2)\nAfter: Bead type rendered in browse list, acceptance doc created, CHANGELOG updated, feature closed\n\nProblems encountered:\n  - Maitre found AC #2 gap (bead type not rendered): fixed with 5-line code change + test\n\nIssues filed: 0\nCommit: 0dcff1d (plate), 8ab916f (polish), 3da115d (sync)\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T05:22:03Z"}]}
{"id":"cap-kxw.1.1","title":"Create internal/dashboard/ scaffold: styles, keys, help, messages, cache","description":"Create foundational files for the dashboard package:\n1. internal/dashboard/styles.go: Centralized lipgloss styles using AdaptiveColor for light/dark terminals. Rounded borders (lipgloss.RoundedBorder). Priority badges: P0=red, P1=orange, P2=yellow, P3=blue, P4=gray. Focused/unfocused border colors. Layout helpers for 1/3 left + 2/3 right split.\n2. internal/dashboard/keys.go: bubbles/key bindings per mode (browse, pipeline, summary). Global keys (q, Ctrl+C, Tab, r).\n3. internal/dashboard/help.go: bubbles/help integration for context-aware help bar. Returns different bindings per mode.\n4. internal/dashboard/msg.go: All tea.Msg types: BeadListMsg, BeadResolvedMsg, PhaseUpdateMsg, PipelineDoneMsg, etc. Consumer-side interfaces: BeadLister, BeadResolver, PipelineRunner. Data types: BeadSummary, BeadDetail, PhaseReport.\n5. internal/dashboard/cache.go: Simple map[string]*BeadDetail cache with Invalidate() method.\n\nTests: style rendering doesn't panic, key bindings per mode return correct sets, cache get/set/invalidate.\nDeliverable: internal/dashboard/ scaffold with styles, keys, help, messages, cache","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:18:14.308575612-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T07:38:18.865895563-08:00","closed_at":"2026-02-13T07:38:18.865895563-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.1.1","depends_on_id":"cap-kxw.1","type":"parent-child","created_at":"2026-02-12T17:18:14.310415838-08:00","created_by":"Sam Biggins"}],"comments":[{"id":235,"issue_id":"cap-kxw.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T15:31:57Z"},{"id":236,"issue_id":"cap-kxw.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create foundational scaffold files for the new internal/dashboard/ package\nBefore: No dashboard package existed; TUI only supported capsule run display\nAfter: internal/dashboard/ package with styles, keys, help, messages, and cache — ready for Model implementation in cap-kxw.1.2\n\nFiles: 9 changed (5 source + 4 test files)\nFindings: None — clean implementation matching spec","created_at":"2026-02-13T15:38:18Z"},{"id":237,"issue_id":"cap-kxw.1.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 3 minor (all fixed), 2 nits (fixed)\nSummary: Clean scaffold following project conventions. Minor fixes applied: strings.Contains for test helper, Cache concurrency doc, PaneWidths zero guard, help.KeyMap compile-time checks, any-key comment.","created_at":"2026-02-13T15:42:31Z"},{"id":238,"issue_id":"cap-kxw.1.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create foundational scaffold for the dashboard TUI package\nBefore: No dashboard package; TUI only handled capsule run display\nAfter: internal/dashboard/ with types, interfaces, styles, keys, help, cache — ready for Model (cap-kxw.1.2)\n\nProblems encountered:\n  - Pre-commit lint (De Morgan's law in test helper): applied fix\n\nIssues filed: 0\nCommit: 574338c\nPush: origin/epic/cap-kxw (new branch)","created_at":"2026-02-13T15:43:58Z"}]}
{"id":"cap-kxw.1.2","title":"Implement Model with two-pane layout, focus management, and mode routing","description":"internal/dashboard/model.go:\nModel struct with mode enum (browse/pipeline/summary), focus enum (PaneLeft/PaneRight), viewport for right pane, help model, terminal width/height from WindowSizeMsg.\nInit()/Update()/View() with mode-based routing.\nView(): lipgloss.JoinHorizontal for left+right panes, lipgloss.JoinVertical for panes+help bar.\nLayout: 1/3 left (min 28 chars), 2/3 right, calculated from WindowSizeMsg. Tab toggles focus — focused pane gets accent border, unfocused gets dim border.\nGlobal keys: q/Ctrl+C quit (browse), Tab switches focus.\n\nTests: mode routing, focus toggle, layout calculation at various widths, window resize handling.\nDeliverable: Root Model with two-pane layout and focus management","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:18:20.055333111-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T07:54:08.657348935-08:00","closed_at":"2026-02-13T07:54:08.657348935-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.1.2","depends_on_id":"cap-kxw.1","type":"parent-child","created_at":"2026-02-12T17:18:20.057161814-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.1.2","depends_on_id":"cap-kxw.1.1","type":"blocks","created_at":"2026-02-12T17:18:43.606528477-08:00","created_by":"Sam Biggins"}],"comments":[{"id":239,"issue_id":"cap-kxw.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T15:47:59Z"},{"id":240,"issue_id":"cap-kxw.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Create root Model for dashboard TUI with two-pane layout, mode routing, and focus management\nBefore: Dashboard package had scaffold (styles, keys, help, messages, cache) but no Model\nAfter: Root Model with Init/Update/View, two-pane layout via lipgloss.JoinHorizontal, mode-based routing (browse/pipeline/summary), Tab focus toggle with accent/dim borders, q/Ctrl+C quit in browse mode, WindowSizeMsg responsive layout, help bar reflecting current mode\n\nFiles: 2 changed (model.go, model_test.go)\nFindings: None","created_at":"2026-02-13T15:54:08Z"},{"id":241,"issue_id":"cap-kxw.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 2 minor (fixed), 2 nits (deferred)\nSummary: Clean, well-structured Bubble Tea model following established project patterns. Minor fixes applied: newSizedModel helper now uses WindowSizeMsg, viewport width clamped for narrow terminals.","created_at":"2026-02-13T15:56:48Z"},{"id":242,"issue_id":"cap-kxw.1.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Create root Bubble Tea Model for dashboard TUI with two-pane layout, mode routing, and focus management\nBefore: Dashboard package had scaffold only (styles, keys, help, messages, cache) but no Model\nAfter: Root Model with Init/Update/View, responsive two-pane layout, mode routing, Tab focus toggle, help bar\n\nProblems encountered:\n  - FocusBorderStyle test failure: lipgloss doesn't produce ANSI in non-TTY, removed test (focus toggle covered by state test)\n\nIssues filed: 0\nCommit: da2098f\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-13T15:58:22Z"}]}
{"id":"cap-kxw.1.3","title":"Implement browse mode with bead list, async loading, and cursor navigation","description":"internal/dashboard/browse.go:\nBrowse mode state: []BeadSummary, cursor int, loading bool, err error.\nInit fires tea.Cmd calling BeadLister.Ready() asynchronously.\nHand-rolled list rendering (not bubbles/list) for full control over cursor position, priority badges, and phase indicators.\nRender each bead: cursor marker, bead ID, priority badge, title.\nLeft-focused keys: up/down move cursor, Enter emits dispatch.\nLoading state shows spinner. Error state shows message + r to retry.\nEmpty list shows \"No ready beads\" message.\n\nTests: loading state view, beads loaded view, cursor movement and wrapping, enter dispatches selected bead, error display, empty list.\nDeliverable: Browse mode with bead list and cursor navigation","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:18:28.912611632-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T11:54:38.275234307-08:00","closed_at":"2026-02-13T11:54:38.275234307-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.1.3","depends_on_id":"cap-kxw.1","type":"parent-child","created_at":"2026-02-12T17:18:28.914354171-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.1.3","depends_on_id":"cap-kxw.1.2","type":"blocks","created_at":"2026-02-12T17:18:47.591992424-08:00","created_by":"Sam Biggins"}],"comments":[{"id":243,"issue_id":"cap-kxw.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T19:49:36Z"},{"id":244,"issue_id":"cap-kxw.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add browse mode with bead list display, async loading, cursor navigation, and keyboard controls\nBefore: Left pane showed static 'Beads' placeholder text with no interactivity\nAfter: Left pane renders a navigable bead list with priority badges, cursor wrapping, Enter to dispatch, loading/error/empty states, and r to refresh\n\nFiles: 3 changed (browse.go, browse_test.go, msg.go), 1 modified (model.go)\nFindings: none","created_at":"2026-02-13T19:54:38Z"},{"id":245,"issue_id":"cap-kxw.1.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 3 nits (2 auto-fixed, 1 deferred)\nSummary: Clean Bubble Tea implementation with thorough test coverage. Excellent immutable update pattern and functional options. Polisher simplified viewport width clamping and contentHeight to use max().","created_at":"2026-02-13T19:58:35Z"},{"id":246,"issue_id":"cap-kxw.1.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add browse mode with bead list, async loading, cursor navigation, and keyboard controls\nBefore: Left pane showed static 'Beads' placeholder text with no interactivity\nAfter: Left pane renders navigable bead list with priority badges, cursor wrapping, Enter dispatch, loading/error/empty states, refresh\n\nProblems encountered:\n  - Test captured wrong browseState (value type): fixed by capturing Update return value\n\nIssues filed: 0\nCommit: 1016e30\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-13T19:59:33Z"}]}
{"id":"cap-kxw.1.4","title":"Implement bead resolution with cache and detail viewport","description":"Wire async bead resolution into browse mode:\nCursor movement triggers resolveBeadCmd (tea.Cmd calling BeadResolver.Resolve()). Results cached in map[string]*BeadDetail. Cache hit skips CLI call. Cache invalidated on: manual refresh (r), return from summary mode.\nRight pane renders resolved detail in bubbles/viewport: Bead ID, title, epic/feature/task hierarchy, description, acceptance criteria. Loading state shows spinner in right pane. Failed resolve shows error + suggestion.\nRight-focused keys: up/down/PgUp/PgDn scroll viewport.\n\nTests: cache hit skips resolve, cache miss triggers resolve, invalidation clears cache, viewport scrolls when focused, loading/error states in right pane.\nDeliverable: Bead resolution with caching and scrollable detail viewport","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:18:34.052758517-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T17:49:25.735507051-08:00","closed_at":"2026-02-13T17:49:25.735507051-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.1.4","depends_on_id":"cap-kxw.1","type":"parent-child","created_at":"2026-02-12T17:18:34.054838241-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.1.4","depends_on_id":"cap-kxw.1.3","type":"blocks","created_at":"2026-02-12T17:18:50.875675429-08:00","created_by":"Sam Biggins"}],"comments":[{"id":247,"issue_id":"cap-kxw.1.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire async bead resolution into browse mode with caching and scrollable detail viewport\nBefore: Right pane showed static 'Detail' text, no bead resolution or caching\nAfter: Cursor movement triggers async bead resolution, results cached, right pane shows formatted detail with loading/error states, viewport scrollable when focused\n\nFiles: 3 changed (model.go, browse.go, model_test.go, browse_test.go)\nFindings: none","created_at":"2026-02-14T01:49:25Z"},{"id":248,"issue_id":"cap-kxw.1.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 1 minor (deferred), 3 nits (2 deferred, 1 n/a)\nSummary: Clean Bubble Tea implementation with thorough test coverage. Excellent cache-hit/miss separation in maybeResolve. Polisher applied if/else if chain for mode-specific keys and removed dead resolver assignment in test.","created_at":"2026-02-14T01:54:06Z"},{"id":249,"issue_id":"cap-kxw.1.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire async bead resolution into browse mode with caching and scrollable detail viewport\nBefore: Right pane showed static 'Detail' text, no bead resolution or caching\nAfter: Cursor movement triggers async resolve, results cached, right pane shows formatted detail with loading/error states, viewport scrollable when focused\n\nProblems encountered:\n  - Stale resolve on rapid cursor movement: fixed with resolvingID tracking\n  - Lint SA4006 unused value: fixed in test\n\nIssues filed: 0\nCommit: 9d2f110\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T02:23:23Z"}]}
{"id":"cap-kxw.1.5","title":"Wire DashboardCmd in main.go with Run()/run() split and adapters","description":"cmd/capsule/main.go:\nAdd DashboardCmd struct to CLI Kong grammar with Provider, Timeout flags. Run() builds real deps (bead.Client adapters for BeadLister and BeadResolver interfaces), run() accepts interfaces for testing.\nNon-TTY returns error. Creates dashboard.Model, runs tea.NewProgram.\nAdapter types: beadListerAdapter wraps bead.Client.Ready() to []dashboard.BeadSummary. beadResolverAdapter wraps bead.Client.Resolve() to dashboard.BeadDetail.\ncmd/capsule/main_test.go: CLI parsing tests (kong.New), run() with mock interfaces.\n\nTests: dashboard subcommand parsed, non-TTY error, run() creates program with mock deps.\nDeliverable: capsule dashboard command wired to dashboard.Model","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:18:39.293749189-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T18:34:48.120965663-08:00","closed_at":"2026-02-13T18:34:48.120965663-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.1.5","depends_on_id":"cap-kxw.1","type":"parent-child","created_at":"2026-02-12T17:18:39.295601942-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.1.5","depends_on_id":"cap-kxw.1.4","type":"blocks","created_at":"2026-02-12T17:18:53.958455302-08:00","created_by":"Sam Biggins"}],"comments":[{"id":250,"issue_id":"cap-kxw.1.5","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T02:28:49Z"},{"id":251,"issue_id":"cap-kxw.1.5","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire the dashboard TUI into the CLI so users can run 'capsule dashboard'\nBefore: dashboard package existed but had no CLI entry point\nAfter: 'capsule dashboard' command available with TTY check, bead client adapters, and tea program lifecycle\n\nFiles: 2 changed (cmd/capsule/main.go, cmd/capsule/main_test.go)\nFindings: none","created_at":"2026-02-14T02:34:48Z"},{"id":252,"issue_id":"cap-kxw.1.5","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 2 nits (1 addressed by polisher, 1 noted as intentional)\nSummary: Clean implementation following established Run()/run() split pattern. Adapter types correctly bridge bead.Client to dashboard interfaces. Thorough test coverage of all code paths.","created_at":"2026-02-14T04:43:31Z"},{"id":253,"issue_id":"cap-kxw.1.5","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire the dashboard TUI into the CLI so users can run 'capsule dashboard'\nBefore: dashboard package existed but had no CLI entry point\nAfter: 'capsule dashboard' command available with TTY check, bead client adapters, and tea program lifecycle\n\nProblems encountered:\n  - None\n\nIssues filed: 0\nCommit: b834a5b\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T05:08:28Z"}]}
{"id":"cap-kxw.2","title":"Pipeline mode with phase list and report browsing","description":"As a user, I want to dispatch a pipeline from the dashboard and see phase progress in the left pane with detailed phase reports in the right pane so that I have clear visibility into what each phase produced.\n\nAcceptance Criteria:\n- Given Enter pressed on a bead, When pipeline dispatches, Then left pane switches to phase list with status indicators (spinner, checkmark, cross)\n- Given a completed phase, When its report is available, Then selecting it in the left pane shows summary, files changed, and duration in the right pane\n- Given a running pipeline, When phases complete, Then the cursor auto-follows the running phase\n- Given the user presses up/down during pipeline, Then auto-follow disables and the user can browse completed phase reports\n- Given pipeline completion, When all phases finish, Then the right pane shows overall result summary\n- Given a running pipeline, When I press q/Ctrl+C, Then the pipeline aborts gracefully","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:17:13.109011589-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T22:42:49.053212297-08:00","closed_at":"2026-02-13T22:42:49.053212297-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.2","depends_on_id":"cap-kxw","type":"parent-child","created_at":"2026-02-12T17:17:13.110908152-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.2","depends_on_id":"cap-kxw.1","type":"blocks","created_at":"2026-02-12T17:17:26.941271749-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-kxw.2.1","title":"Implement pipeline mode phase list rendering with spinner and cursor","description":"internal/dashboard/pipeline.go:\nPipeline mode state: []PhaseState, cursor int, autoFollow bool, spinner model, running bool.\nPhaseState: Name, Status (pending/running/pass/fail), Attempt, MaxRetry, Duration. Status indicators reimplemented from tui.Model (~15 lines duplication to avoid coupling): checkmark=pass, cross=fail, spinner=running, dot=pending. Retry counter (2/3). Duration per phase.\nLeft-focused keys: up/down move cursor (disables autoFollow).\nAuto-follow: cursor tracks running phase by default.\n\nTests: phase list rendering at each state, cursor movement disables auto-follow, auto-follow tracks running phase.\nDeliverable: Phase list rendering with spinner, status indicators, and cursor","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:19:39.627577128-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:31:08.271323395-08:00","closed_at":"2026-02-13T21:31:08.271323395-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.2.1","depends_on_id":"cap-kxw.2","type":"parent-child","created_at":"2026-02-12T17:19:39.629402303-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.2.1","depends_on_id":"cap-kxw.1.2","type":"blocks","created_at":"2026-02-12T17:20:12.760064456-08:00","created_by":"Sam Biggins"}],"comments":[{"id":256,"issue_id":"cap-kxw.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T05:24:12Z"},{"id":257,"issue_id":"cap-kxw.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add pipeline mode phase list rendering to the dashboard TUI\nBefore: Pipeline mode showed a static placeholder string\nAfter: Pipeline mode renders a full phase list with status indicators (checkmark/cross/spinner/dot), cursor navigation, auto-follow, retry counters, and duration display\n\nFiles: 3 changed (pipeline.go, pipeline_test.go, model.go, model_test.go)\nFindings: none","created_at":"2026-02-14T05:31:08Z"},{"id":258,"issue_id":"cap-kxw.2.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all deferred)\nSummary: Clean implementation following browseState patterns. Intentional tui.Model duplication is appropriate. Thorough test coverage of all status indicators, cursor navigation, auto-follow, and Model integration.","created_at":"2026-02-14T05:34:58Z"},{"id":259,"issue_id":"cap-kxw.2.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add pipeline mode phase list rendering to the dashboard TUI\nBefore: Pipeline mode showed a static placeholder string\nAfter: Pipeline mode renders a full phase list with status indicators (checkmark/cross/spinner/dot), cursor navigation, auto-follow, retry counters, and duration display\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\nCommit: 2ad6359\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T05:35:56Z"}]}
{"id":"cap-kxw.2.2","title":"Implement PhaseReport storage and right-pane rendering","description":"Store phase reports in map[string]*PhaseReport as phases complete.\nPhaseReport: PhaseName, Status, Summary, Feedback, FilesChanged, Duration. Populated from StatusUpdateMsg when status is pass/fail.\nRight pane renders report for cursor-selected phase in viewport: Phase name + status header, summary, files changed list, duration, feedback (if failed). Pending phase shows \"Waiting...\". Running phase shows spinner text + elapsed time.\n\nTests: report stored on phase completion, right pane shows correct report for selected phase, pending/running state rendering.\nDeliverable: Phase report storage and right-pane rendering per selected phase","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:19:44.153390555-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:43:21.031807624-08:00","closed_at":"2026-02-13T21:43:21.031807624-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.2.2","depends_on_id":"cap-kxw.2","type":"parent-child","created_at":"2026-02-12T17:19:44.155503705-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.2.2","depends_on_id":"cap-kxw.2.1","type":"blocks","created_at":"2026-02-12T17:19:58.875928797-08:00","created_by":"Sam Biggins"}],"comments":[{"id":260,"issue_id":"cap-kxw.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T05:39:25Z"},{"id":261,"issue_id":"cap-kxw.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Store phase reports as phases complete and render them in the right pane\nBefore: Pipeline mode right pane showed hardcoded 'Phase report' placeholder text\nAfter: Right pane renders contextual content per selected phase: Waiting for pending, Running with spinner for active, full report (status/summary/files/duration/feedback) for completed phases\n\nFiles: 3 changed (pipeline.go, pipeline_test.go, model.go)\nFindings: none","created_at":"2026-02-14T05:43:21Z"},{"id":262,"issue_id":"cap-kxw.2.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 2 minor (1 addressed by polisher, 1 noted), 2 nits (all deferred)\nSummary: Clean implementation following established pipelineState patterns. Thorough test coverage of all status indicators and report rendering. Polisher added explicit PhaseSkipped case.","created_at":"2026-02-14T05:46:41Z"},{"id":263,"issue_id":"cap-kxw.2.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Store phase reports as phases complete and render them in the right pane\nBefore: Pipeline mode right pane showed hardcoded 'Phase report' placeholder text\nAfter: Right pane renders contextual content per selected phase: Waiting for pending, Running with spinner for active, Skipped for skipped, full report (status/summary/files/duration/feedback) for completed phases\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\nCommit: 32e9228\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T05:47:43Z"}]}
{"id":"cap-kxw.2.3","title":"Wire pipeline dispatch with channel, goroutine, and self-scheduling pump","description":"Wire Enter keypress to pipeline execution:\n1. Create context.WithCancel for pipeline abort\n2. Create buffered channel for phase events\n3. Launch PipelineRunner.RunPipeline() in goroutine\n4. Self-scheduling channel pump: func listenForEvents(ch) tea.Cmd returns func() tea.Msg that reads one event from channel, returns channelClosedMsg on close. Re-schedule after each event in Update().\n5. Convert orchestrator StatusUpdate to dashboard PhaseUpdateMsg\n6. Pipeline goroutine sends events to channel, sends done/error on completion\n7. q/Ctrl+C during pipeline cancels context (graceful abort)\nInterface: PipelineRunner with RunPipeline(ctx, PipelineInput) returning (PipelineOutput, error).\n\nTests: mock PipelineRunner, verify events flow through channel to model, verify abort cancels context, verify channel closed transitions to summary.\nDeliverable: Pipeline dispatch with channel-based event bridging","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:19:49.819807515-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T22:09:52.473874641-08:00","closed_at":"2026-02-13T22:09:52.473874641-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.2.3","depends_on_id":"cap-kxw.2","type":"parent-child","created_at":"2026-02-12T17:19:49.821714823-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.2.3","depends_on_id":"cap-kxw.2.2","type":"blocks","created_at":"2026-02-12T17:20:02.137677441-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.2.3","depends_on_id":"cap-kxw.1.5","type":"blocks","created_at":"2026-02-12T17:20:06.017253245-08:00","created_by":"Sam Biggins"}],"comments":[{"id":264,"issue_id":"cap-kxw.2.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T05:57:18Z"},{"id":265,"issue_id":"cap-kxw.2.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Wire Enter keypress to pipeline dispatch with channel-based event bridging between goroutine and Bubble Tea model\nBefore: DispatchMsg fired on Enter but was unhandled; no pipeline execution path existed\nAfter: Full pipeline dispatch wiring: PipelineRunner interface with ctx, channel pump, goroutine bridge, abort on q/ctrl+c, summary transition on completion\n\nFiles: 3 changed (msg.go, model.go, model_test.go)\nFindings: none","created_at":"2026-02-14T06:09:52Z"},{"id":266,"issue_id":"cap-kxw.2.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: Clean implementation of channel-based event bridging with proper concurrency patterns. All tests pass. Polish: 3 minor comment/style fixes applied.","created_at":"2026-02-14T06:13:21Z"},{"id":267,"issue_id":"cap-kxw.2.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire Enter keypress to pipeline dispatch with channel-based event bridging\nBefore: DispatchMsg fired on Enter but was unhandled; no pipeline execution path\nAfter: Full pipeline dispatch: goroutine bridge, channel pump, context abort, summary transition\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: efc3cee\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T06:14:43Z"}]}
{"id":"cap-kxw.2.4","title":"Implement summary mode with any-key return to browse and refresh","description":"Summary mode triggered on pipeline completion (channel closed).\nLeft pane: phase list with final checkmark/cross statuses frozen.\nRight pane: overall result summary:\n- Pass: green checkmark, \"N/N phases passed in Xs\"\n- Fail: red cross, error message, \"N/M phases passed\"\n- Post-pipeline status (merge/cleanup if applicable)\nFooter: \"Press any key to continue\"\nAny keypress: transition back to browse mode, invalidate bead cache, trigger BeadLister.Ready() refresh (closed bead disappears).\n\nTests: pass summary display, fail summary with error, any key transitions to browse, cache invalidated on return.\nDeliverable: Summary mode with result display and any-key return to browse","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:19:54.944743252-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T22:35:29.81742331-08:00","closed_at":"2026-02-13T22:35:29.81742331-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.2.4","depends_on_id":"cap-kxw.2","type":"parent-child","created_at":"2026-02-12T17:19:54.946637216-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.2.4","depends_on_id":"cap-kxw.2.3","type":"blocks","created_at":"2026-02-12T17:20:09.614883978-08:00","created_by":"Sam Biggins"}],"comments":[{"id":268,"issue_id":"cap-kxw.2.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T06:27:58Z"},{"id":269,"issue_id":"cap-kxw.2.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Implement summary mode for the dashboard TUI pipeline view\nBefore: Pipeline completion showed placeholder text ('Summary' / 'Result details')\nAfter: Pipeline completion shows frozen phase list (left) with pass/fail result summary (right), any keypress returns to browse mode with cache invalidation and bead list refresh\n\nFiles: 3 changed (summary.go, summary_test.go, model.go)\nFindings: none","created_at":"2026-02-14T06:35:29Z"},{"id":270,"issue_id":"cap-kxw.2.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 2 nits (both addressed by polisher)\nSummary: Clean implementation following established codebase patterns. Well-designed any-key interception, defensive nil checks, thorough test coverage.","created_at":"2026-02-14T06:38:20Z"},{"id":271,"issue_id":"cap-kxw.2.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Implement summary mode for the dashboard TUI pipeline view\nBefore: Pipeline completion showed placeholder text ('Summary' / 'Result details')\nAfter: Pipeline completion shows frozen phase list (left) with pass/fail result summary (right), any keypress returns to browse mode with cache invalidation and bead list refresh\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\nCommit: d362c69\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T06:39:29Z"}]}
{"id":"cap-kxw.3","title":"Polish, shared lifecycle, and edge case handling","description":"As a user, I want the dashboard to handle edge cases gracefully and share post-pipeline lifecycle with capsule run so that the dashboard is robust and reliable in real use.\n\nAcceptance Criteria:\n- Given a successful pipeline, When returning to browse, Then post-pipeline lifecycle (merge, cleanup, close bead) runs in the background\n- Given a terminal resize, When the window size changes, Then both panes re-layout proportionally\n- Given Ctrl+C during pipeline, When abort triggers, Then cleanup runs and dashboard returns to browse\n- Given bd is not installed, When dashboard launches, Then a clear error message is shown\n- Given an empty bead list, When dashboard renders, Then 'No ready beads' message with refresh hint is shown\n- Given a pipeline abort is in progress, When I press Ctrl+C again, Then the dashboard exits immediately","status":"closed","priority":3,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:17:20.886586258-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T10:34:21.811607689-08:00","closed_at":"2026-02-14T10:34:21.811607689-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.3","depends_on_id":"cap-kxw","type":"parent-child","created_at":"2026-02-12T17:17:20.890680912-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.3","depends_on_id":"cap-kxw.2","type":"blocks","created_at":"2026-02-12T17:17:27.001784599-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-kxw.3.1","title":"Extract shared postPipeline helper and wire background lifecycle","description":"cmd/capsule/main.go:\nExtract RunCmd.runPostPipeline() logic into standalone function: postPipeline(w io.Writer, beadID string, wt mergeOps, bd beadResolver)\nBoth RunCmd.run() and DashboardCmd.run() call this. RunCmd.runPostPipeline() becomes thin wrapper calling postPipeline().\nIn dashboard: on return from summary, fire tea.Batch with:\n1. tea.Cmd calling postPipeline() in background goroutine (merge, cleanup, close bead). Errors logged, not shown.\n2. tea.Cmd re-fetching BeadLister.Ready() to refresh list.\n\nTests: RunCmd still calls post-pipeline correctly (regression), postPipeline works with mock interfaces, both cmds fire on return from summary.\nDeliverable: Shared post-pipeline lifecycle callable from both commands","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:19:58.986180153-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T05:27:04.229119207-08:00","closed_at":"2026-02-14T05:27:04.229119207-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.3.1","depends_on_id":"cap-kxw.3","type":"parent-child","created_at":"2026-02-12T17:19:58.98795809-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.3.1","depends_on_id":"cap-kxw.2.4","type":"blocks","created_at":"2026-02-12T17:20:23.457838544-08:00","created_by":"Sam Biggins"}],"comments":[{"id":275,"issue_id":"cap-kxw.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T13:17:55Z"},{"id":276,"issue_id":"cap-kxw.3.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Extract shared postPipeline helper callable from both RunCmd and DashboardCmd\nBefore: runPostPipeline was a method on RunCmd, dashboard had no post-pipeline lifecycle\nAfter: Standalone postPipeline function shared by both commands, dashboard fires it in background on return from summary\n\nFiles: 4 changed\nFindings: none","created_at":"2026-02-14T13:27:04Z"},{"id":277,"issue_id":"cap-kxw.3.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (2 nits, both acceptable design points)\nSummary: Clean extraction with proper Bubble Tea lifecycle integration. Polisher inlined the one-line runPostPipeline wrapper.","created_at":"2026-02-14T13:31:47Z"},{"id":278,"issue_id":"cap-kxw.3.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Extract postPipeline as shared standalone function and wire into dashboard model\nBefore: postPipeline logic was embedded in RunCmd method, dashboard had no post-pipeline lifecycle\nAfter: Shared postPipeline() function usable by both CLI and dashboard; dashboard fires PostPipelineFunc in background on return-to-browse\n\nProblems encountered:\n  - diff-collector.py picked wrong bead (cap-i25) — collected diff manually\n  - No blocking issues\n\nIssues filed:\n  - (none — clean review)\n\nCommit: ebd0270\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T13:34:34Z"}]}
{"id":"cap-kxw.3.2","title":"Handle error states: loading spinners, failed loads, empty list","description":"Comprehensive error state handling:\n1. Loading spinner: shown in both panes during initial bead fetch and during bead resolution. Uses bubbles/spinner.\n2. Failed bead load: left pane shows error message + \"press r to retry\".\n3. Empty bead list: \"No ready beads — press r to refresh\" message.\n4. Failed resolve: right pane shows \"Could not load bead detail\" with error text. Bead list still navigable.\n5. bd not installed: early error in DashboardCmd.Run() before launching TUI.\n\nTests: each error state renders correctly, r retries from error, failed resolve doesn't crash navigation.\nDeliverable: Robust error state handling for all failure modes","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:20:04.369721074-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T05:48:52.852938656-08:00","closed_at":"2026-02-14T05:48:52.852938656-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.3.2","depends_on_id":"cap-kxw.3","type":"parent-child","created_at":"2026-02-12T17:20:04.371830587-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.3.2","depends_on_id":"cap-kxw.3.1","type":"blocks","created_at":"2026-02-12T17:20:16.656654413-08:00","created_by":"Sam Biggins"}],"comments":[{"id":279,"issue_id":"cap-kxw.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T13:36:27Z"},{"id":280,"issue_id":"cap-kxw.3.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add robust error state handling for all failure modes in the dashboard TUI\nBefore: Static loading text, no spinners, basic error messages, no bd-not-installed check\nAfter: Animated spinners during loading/resolving, clear error messages with action hints, early bd check\n\nFiles: 6 changed (browse.go, model.go, summary.go, main.go, browse_test.go, model_test.go, summary_test.go, helpers_test.go)\nFindings: containsText helper in helpers_test.go appears unused (minor)","created_at":"2026-02-14T13:48:52Z"},{"id":281,"issue_id":"cap-kxw.3.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (2 nits noted, no fixes required)\nSummary: Clean implementation of all 5 error states with proper spinner lifecycle, good test coverage, correct Bubble Tea patterns","created_at":"2026-02-14T13:53:51Z"},{"id":282,"issue_id":"cap-kxw.3.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add robust error state handling for all failure modes in the dashboard TUI\nBefore: Static loading text, basic error messages, no bd-not-installed check\nAfter: Animated spinners during loading/resolving, clear error messages with action hints, early bd check\n\nProblems encountered:\n  - tea.Batch returns changed cmd signatures in tests: resolved by adding execBatch helper and delivering BeadListMsg directly in test setup\n\nIssues filed: 0\n\nCommit: e27592e\nPush: success (epic/cap-kxw)","created_at":"2026-02-14T13:55:25Z"}]}
{"id":"cap-kxw.3.3","title":"Handle edge cases: terminal resize, abort during pipeline, force quit","description":"Edge case handling:\n1. Terminal resize: WindowSizeMsg recalculates pane widths (1/3 + 2/3, min 28 left), re-renders both panes. Viewport width/height updated.\n2. Abort during pipeline: Ctrl+C cancels pipeline context, shows \"Aborting...\" in phase status, waits for cleanup, transitions to browse mode (not summary).\n3. Double-press force quit: second q/Ctrl+C during abort forces tea.Quit immediately.\n4. Focus interaction: left focus up/down moves list cursor, right focus up/down/PgUp/PgDn scrolls viewport. Global keys (q, Ctrl+C, Tab, r) work regardless of focus.\n\nTests: resize recalculates layout, abort during pipeline cancels context, double-press force quits, focus-dependent key routing.\nDeliverable: Edge case handling for resize, abort, and focus interactions","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T17:20:12.153147609-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T10:01:28.772775065-08:00","closed_at":"2026-02-14T10:01:28.772775065-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.3.3","depends_on_id":"cap-kxw.3","type":"parent-child","created_at":"2026-02-12T17:20:12.155071226-08:00","created_by":"Sam Biggins"},{"issue_id":"cap-kxw.3.3","depends_on_id":"cap-kxw.3.2","type":"blocks","created_at":"2026-02-12T17:20:20.046165598-08:00","created_by":"Sam Biggins"}],"comments":[{"id":283,"issue_id":"cap-kxw.3.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add edge case handling for terminal resize, pipeline abort, force quit, and focus-dependent key routing\nBefore: Dashboard had no abort handling (q/ctrl+c during pipeline only cancelled context but still went to summary), no force quit, and 'r' for refresh only worked from left pane\nAfter: Abort transitions to browse mode (not summary), skips post-pipeline lifecycle. Double-press q/ctrl+c force-quits. 'r' refresh works from either pane. Aborting indicator (⚠) shown in phase list and report.\n\nFiles: 4 changed (model.go, pipeline.go, summary.go, model_test.go)\nFindings: none","created_at":"2026-02-14T18:01:28Z"},{"id":284,"issue_id":"cap-kxw.3.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 0 minor, 3 nits (1 fixed: dispatchedBeadID clearing; 2 acceptable design notes)\nSummary: Clean implementation following established Bubble Tea patterns. Well-designed abort state machine, thorough test coverage, correct channel/context interaction.","created_at":"2026-02-14T18:06:30Z"},{"id":285,"issue_id":"cap-kxw.3.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add edge case handling for terminal resize, pipeline abort, force quit, and focus-dependent key routing\nBefore: Dashboard had no abort handling (went to summary on cancel), no force quit, refresh only from left pane\nAfter: Abort transitions to browse mode with ⚠ indicator, double-press force quits, 'r' works globally\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommit: 44d8ce3\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T18:07:39Z"}]}
{"id":"cap-kxw.3.4","title":"Add Given-When-Then comments to dashboard tests","description":"Discovery Source: cap-kxw.2 - Pipeline mode plate review\nDiscovered During: plate phase (maître review)\n\nImpact:\nConvention debt - dashboard tests lack GWT section comments that exist in smoke tests.\nTests are functionally correct but missing structural annotations.\n\nContext:\nAll ~60+ tests in internal/dashboard/ need GWT comments added.\nPattern to follow: cmd/capsule/smoke_test.go (// Given: ..., // When: ..., // Then: ...)","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T22:42:03.544286523-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T23:00:46.265982095-08:00","closed_at":"2026-02-13T23:00:46.265982095-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.3.4","depends_on_id":"cap-kxw.3","type":"parent-child","created_at":"2026-02-13T22:42:03.546328959-08:00","created_by":"Sam Biggins"}],"comments":[{"id":272,"issue_id":"cap-kxw.3.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (2 nits, both out of scope)\nSummary: GWT comments accurately describe test behavior, consistent style, all tests annotated. No behavioral changes.","created_at":"2026-02-14T12:52:15Z"},{"id":274,"issue_id":"cap-kxw.3.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add BDD structural comments to dashboard tests for convention consistency\nBefore: Dashboard tests lacked GWT section comments that smoke tests had\nAfter: 103 tests annotated with Given-When-Then comments + dashboard smoke test added\n\nProblems encountered:\n  - Polisher hit rate limit: skipped (code already approved)\n  - Diff-collector picked wrong bead: collected diff manually\n\nIssues filed:\n  - cap-kxw.3.6: Add GWT comments to remaining dashboard test files [P4]\n\nCommit: 86f534c\nPush: success","created_at":"2026-02-14T12:54:31Z"}]}
{"id":"cap-kxw.3.5","title":"Add smoke test for dashboard pipeline mode","description":"Discovery Source: cap-kxw.2 - Pipeline mode plate review\nDiscovered During: plate phase (maître review)\n\nImpact:\nNo smoke test exists for the dashboard TUI. Interactive TUI testing is inherently\ncomplex but a minimal smoke test (instantiate Model, send messages, verify summary mode)\nwould provide end-to-end confidence.\n\nContext:\nSmoke tests exist for GoProjectSkeleton and OrchestratorWiring in cmd/capsule/smoke_test.go.\nDashboard is interactive (TTY required), so smoke test scope may be limited to\nprogrammatic Model instantiation rather than binary execution.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T22:42:03.611125136-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T23:00:46.277849053-08:00","closed_at":"2026-02-13T23:00:46.277849053-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.3.5","depends_on_id":"cap-kxw.3","type":"parent-child","created_at":"2026-02-13T22:42:03.613083257-08:00","created_by":"Sam Biggins"}],"comments":[{"id":273,"issue_id":"cap-kxw.3.5","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found\nSummary: Smoke test correctly exercises dashboard TTY detection, follows established binary-build-guard pattern.","created_at":"2026-02-14T12:52:17Z"}]}
{"id":"cap-kxw.3.6","title":"Add GWT comments to remaining dashboard test files","description":"Discovery Source: cap-kxw.3.4 - Add Given-When-Then comments to dashboard tests\nDiscovered During: serve phase (sous-chef nit)\n\nImpact:\nConvention consistency - 4 dashboard test files still lack GWT structural\ncomments: cache_test.go, styles_test.go, keys_test.go, help_test.go.\nNon-blocking, purely cosmetic.\n\nContext:\ncap-kxw.3.4 annotated browse_test.go, pipeline_test.go, model_test.go,\nsummary_test.go with GWT comments. These 4 files were not included in\nthe original task scope.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-14T04:53:55.562764881-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T10:27:53.696387669-08:00","closed_at":"2026-02-14T10:27:53.696387669-08:00","close_reason":"Closed","dependencies":[{"issue_id":"cap-kxw.3.6","depends_on_id":"cap-kxw.3","type":"parent-child","created_at":"2026-02-14T04:53:55.56563738-08:00","created_by":"Sam Biggins"}],"comments":[{"id":286,"issue_id":"cap-kxw.3.6","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add GWT structural comments to 4 remaining dashboard test files for convention consistency\nBefore: cache_test.go, styles_test.go, keys_test.go, help_test.go lacked Given-When-Then comments\nAfter: All dashboard test files now have consistent GWT structural comments\n\nFiles: 4 changed\nFindings: none","created_at":"2026-02-14T18:27:53Z"},{"id":287,"issue_id":"cap-kxw.3.6","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 3 nits found (1 auto-fixed by polisher, 2 acceptable as-is)\nSummary: Comment-only changes are well-structured, consistent with reference files, no behavioral changes.","created_at":"2026-02-14T18:30:41Z"},{"id":288,"issue_id":"cap-kxw.3.6","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Convention consistency - add GWT comments to 4 remaining dashboard test files\nBefore: cache_test.go, styles_test.go, keys_test.go, help_test.go lacked GWT structure\nAfter: All dashboard test files consistently annotated with Given/When/Then comments\n\nProblems encountered: none\n\nIssues filed: 0\nCommit: 9b97447\nPush: success (origin/epic/cap-kxw)","created_at":"2026-02-14T18:31:39Z"}]}
{"id":"cap-lbj","title":"Fix hardcoded /tmp/ reference in test-fixtures.sh","description":"Discovery Source: cap-8ax.1.3 - Create setup-template.sh initialization script\nDiscovered During: cook phase (running sibling tests)\n\nImpact:\nEdge case E4 in test-template-source-files.sh fails because test-fixtures.sh\ncontains a /tmp/ reference (mktemp -d usage). Low impact — cosmetic test failure\nin an edge case check, not a functional issue.\n\nContext:\ntemplates/demo-capsule/test-fixtures.sh line 105-106 uses mktemp which references /tmp/.\ntests/scripts/test-template-source-files.sh E4 check greps for absolute paths in template files.","status":"closed","priority":4,"issue_type":"bug","owner":"sambiggins@gmail.com","created_at":"2026-02-06T18:17:55.557495603-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T14:20:25.162838012-08:00","closed_at":"2026-02-15T14:20:25.162838012-08:00","close_reason":"Bug no longer reproducible. The demo-capsule template was split into demo-greenfield/demo-brownfield during a prior refactoring, and neither template contains /tmp/ literals. E4 check passes cleanly. All test-fixtures.sh tests pass (15/15 greenfield, 14/14 brownfield).","comments":[{"id":310,"issue_id":"cap-lbj","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix E4 edge case failure from /tmp/ reference in template test-fixtures.sh\nBefore: Bug filed during cap-8ax.1.3 noting /tmp/ reference in demo-capsule template\nAfter: Bug resolved — demo-capsule was refactored into demo-greenfield/demo-brownfield, neither contains /tmp/ literals. All tests pass.\n\nProblems encountered:\n  - none\n\nIssues filed:\n  - none\n\nCommit: (no code changes)\nPush: pending","created_at":"2026-02-15T22:20:49Z"}]}
{"id":"cap-n0r","title":"Harden pipeline context \u0026 signal determinism","description":"Fix broken bead context extraction in pipeline scripts: parent chain resolution via dependencies, broaden AC extraction fallback, add --all to progress queries, add context quality report after prep, surface prep output in pipeline, and document bd JSON schema contract.","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T19:01:43.567519133-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T19:04:02.631032213-08:00","closed_at":"2026-02-07T19:04:02.631032213-08:00","close_reason":"Implemented all 6 changes: parent extraction fallback, AC extraction broadening, --all flags, context quality report, surfaced prep output, bd-schema docs","comments":[{"id":85,"issue_id":"cap-n0r","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 2 minor (no fix needed), 3 nits (acceptable as-is)\nSummary: Well-structured changes addressing all 6 planned items. Parent chain fallback, broadened AC extraction, --all flags, context quality report, surfaced prep output, and schema docs all work correctly. Minor notes: dependency fallback path lacks dedicated test coverage, and parent chain logic is duplicated across prep.sh/run-summary.sh — both suitable for follow-up tasks.","created_at":"2026-02-08T03:15:11Z"},{"id":86,"issue_id":"cap-n0r","author":"Sam Biggins","text":"PHASE: SERVE (round 2, post-review-fixes)\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all acceptable as-is)\nSummary: Clean DRY refactoring of parent-chain resolution into shared lib with 7 dedicated tests covering full chain, partial chains, dependency fallback, field-missing case, and precedence. Polisher refinements applied. All 47 tests pass across 5 test suites.","created_at":"2026-02-08T03:46:07Z"},{"id":87,"issue_id":"cap-n0r","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix broken bead context extraction that caused empty Epic/Feature/AC in worklogs and summaries\nBefore: Parent chain used nonexistent .parent path (silent failure); AC extraction missed Requirements headings; bd list excluded closed children from progress counts; prep output suppressed in pipeline\nAfter: Robust parent resolution with dependency fallback; AC extraction cascades through 3 sources; progress counts include closed items; context quality report visible after prep; shared lib eliminates 97 lines of duplication; 7 dedicated fallback tests\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: ddbd8b9, eab2417, 8725c51, b4f7fac\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-08T03:51:14Z"}]}
{"id":"cap-prk","title":"Add prompt template content tests for t-1.3.2 and t-1.3.3 specs","description":"Discovery Source: cap-8ax.3.5 - Validate test-writer/test-review pair E2E\nDiscovered During: plate/maître review\n\nImpact:\nSpecs t-1.3.2 (test-writer prompt) and t-1.3.3 (test-review prompt) define 6 test\ncases each for validating prompt template content. Currently only validated indirectly\nvia run-phase.sh tests. Adding grep-based content checks would close the spec gap.\n\nContext:\nPrompt templates exist and contain correct content. Tests should verify each prompt\ncontains expected instructional content (worklog reading, signal output, etc).\nSuggested: tests/scripts/test-prompt-templates.sh with simple grep assertions.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T06:31:31.158671274-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T06:41:50.191703063-08:00","closed_at":"2026-02-07T06:41:50.191703063-08:00","close_reason":"Closed"}
{"id":"cap-rkw","title":"Add Given-When-Then comments to test scripts","description":"Discovery Source: cap-8ax.3.5 - Validate test-writer/test-review pair E2E\nDiscovered During: plate/maître review\n\nImpact:\nBDD structure is implicit in test scripts but not documented with Given/When/Then\ncomments. Adding these would improve readability and alignment with feature files.\n\nContext:\nFeature file f-1.3-test-writer-review.feature uses Given-When-Then structure.\nTest scripts test-parse-signal.sh, test-run-phase.sh, and test-phase-pair-test-writer.sh\nhave clear setup/action/assert blocks but lack explicit BDD comment markers.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T06:31:24.914247247-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T06:41:50.159148961-08:00","closed_at":"2026-02-07T06:41:50.159148961-08:00","close_reason":"Closed","comments":[{"id":44,"issue_id":"cap-rkw","author":"Sam Biggins","text":"PHASE: SERVE (nit fixes)\nStatus: completed\nVerdict: approved\nIssues: 0 blocking (3 nits - mixed voice convention, E3 title precision, 2 more siblings)\nSummary: GWT comments accurately describe all test blocks. Consistent placement and formatting.","created_at":"2026-02-07T15:07:43Z"},{"id":45,"issue_id":"cap-rkw","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Address serve review nits for complete GWT coverage\nBefore: 5 test blocks missing Then comments, misleading title, 2 sibling scripts without GWT\nAfter: All 4 modified scripts have complete GWT coverage, consistent voice\n\nProblems encountered:\n  - bd sync commit failed (JSONL unchanged after merge) - pushed directly\n\nIssues filed:\n  - cap-86m.1: Add GWT to remaining 2 scripts [P4]\n\nCommit: ac83a4b\nPush: success","created_at":"2026-02-07T15:10:13Z"}]}
{"id":"cap-tkf","title":"Signal evolution: Finding struct and StatusSkip","description":"Add Finding struct, StatusSkip constant to provider package. Foundation for configurable phases and campaign orchestration.","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-11T15:58:23.417394661-08:00","created_by":"Sam Biggins","updated_at":"2026-02-11T16:01:53.768621483-08:00","closed_at":"2026-02-11T16:01:53.768621483-08:00","close_reason":"Closed"}
{"id":"cap-uq5","title":"Data safety fixes (B3, B4)","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T09:54:00.595838194-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T09:56:46.126147783-08:00","closed_at":"2026-02-08T09:56:46.126147783-08:00","close_reason":"B3: awk-based substitution in run-summary.sh, B4: envsubst guard in prep.sh","dependencies":[{"issue_id":"cap-uq5","depends_on_id":"cap-vwt","type":"blocks","created_at":"2026-02-08T09:54:06.604010235-08:00","created_by":"Sam Biggins"}]}
{"id":"cap-vwt","title":"Pipeline improvements from demo-simple test run","status":"closed","priority":1,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-08T09:53:53.368650588-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T10:00:53.956540211-08:00","closed_at":"2026-02-08T10:00:53.956540211-08:00","close_reason":"All 15 pipeline improvements implemented and tested","comments":[{"id":91,"issue_id":"cap-vwt","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved (after review fixes)\nIssues: 0 critical, 1 major fixed (grep -v set-e abort), 1 minor fixed (signal-contract doc), 1 minor fixed (echo→printf), 4 nits (acceptable as-is)\nSummary: 15 improvements well-implemented. Fixed grep -v abort under set -e, updated signal-contract.md for stricter validation, consistent printf usage. Polisher simplified envsubst guard via indirect expansion.","created_at":"2026-02-08T18:10:32Z"},{"id":92,"issue_id":"cap-vwt","author":"Sam Biggins","text":"PHASE: SERVE (round 2)\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 1 minor fixed (echo→printf for LLM output), 1 nit fixed (stale line refs in data-handling.md), 2 minor deferred (echo→printf in error paths, --dry-run test coverage)\nSummary: All round 1 fixes verified correct. Polisher applied jq -e idiom and array-based writer invocation. Clean pass.","created_at":"2026-02-08T18:26:15Z"},{"id":93,"issue_id":"cap-vwt","author":"Sam Biggins","text":"PHASE: SERVE (round 3)\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all acceptable - echo|jq patterns safe for JSON)\nSummary: Third and final review round. All previous round fixes verified. echo→printf in error paths and --dry-run test coverage addressed. Polisher found nothing to change. Clean pass.","created_at":"2026-02-08T18:38:47Z"},{"id":94,"issue_id":"cap-vwt","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Implement 15 pipeline improvements discovered during demo-simple test run\nBefore: Pipeline scripts had data corruption risks (bash string replacement, envsubst self-ref), missing robustness (no timeouts, no dep validation), and UX gaps (no timing, no dry-run)\nAfter: All 15 improvements implemented with comprehensive test coverage across 8 test suites. Data handling reference guide established as project convention.\n\nProblems encountered:\n  - grep -v returns exit 1 under set -euo pipefail when no lines match: added || fallback\n  - Signal not written to combined log (C7+C8 interaction): fixed by writing to both files\n  - feedback variable scope in run_signoff: moved declaration before while loop\n\nIssues filed:\n  - cap-b75: Consistency: echo|jq pipes to printf|jq [P4]\n\nCommits: c6c0af2, 3062aaa\nPush: success (origin/main)","created_at":"2026-02-08T18:51:53Z"}]}
{"id":"cap-wdr","title":"Backfill Given-When-Then test comments","description":"Discovery Source: cap-9qv.1, cap-9qv.2, cap-9qv.3 retroactive plate\nDiscovered During: plate phase (maitre review)\n\nPackages needing Given-When-Then comments:\n- internal/provider/ (claude_test.go, provider_test.go, registry_test.go)\n- internal/config/ (config_test.go - TestApplyEnv, TestValidate table loops)\n- internal/prompt/ (prompt_test.go)\n\nPattern to follow: internal/worktree/worktree_test.go, internal/worklog/worklog_test.go","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-10T07:57:17.050461373-08:00","created_by":"Sam Biggins","updated_at":"2026-02-10T08:06:12.410695496-08:00","closed_at":"2026-02-10T08:06:12.410695496-08:00","close_reason":"Added Given-When-Then comments to 13 test functions across 4 files","dependencies":[{"issue_id":"cap-wdr","depends_on_id":"cap-9qv","type":"blocks","created_at":"2026-02-10T07:57:23.26947172-08:00","created_by":"Sam Biggins"}],"comments":[{"id":154,"issue_id":"cap-wdr","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 2 nits (1 auto-fixed: blank line spacing; 1 accepted: adjacent When/Then for trivial assertions)\nSummary: GWT comments are comprehensive, descriptive, and consistent with established no-colon pattern. Polisher normalized colons across all files including pre-existing config_test.go comments.","created_at":"2026-02-10T16:17:49Z"},{"id":155,"issue_id":"cap-wdr","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Backfill Given-When-Then comments to test files missing BDD structure\nBefore: 13 test functions across provider/ and config/ lacked GWT comments\nAfter: All test functions have consistent GWT comments matching established no-colon pattern\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: 5161436, 13ab911\nPush: success","created_at":"2026-02-10T16:28:07Z"}]}
{"id":"cap-yar","title":"Add test-quality prompt template for thorough preset","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-15T20:16:42.511739188-08:00","created_by":"Sam Biggins","updated_at":"2026-02-15T20:20:02.185713621-08:00","closed_at":"2026-02-15T20:20:02.185713621-08:00","close_reason":"Closed"}
{"id":"cap-ybq","title":"Add demo-simple template with proper dependency format","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-07T22:28:56.182591898-08:00","created_by":"Sam Biggins","updated_at":"2026-02-07T22:29:06.023777338-08:00","closed_at":"2026-02-07T22:29:06.023777338-08:00","close_reason":"Created templates/demo-simple/ with proper dependencies format, updated setup-template.sh with --template flag, updated docs/deep-dive.md","comments":[{"id":88,"issue_id":"cap-ybq","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 3 nits (all acceptable as-is)\nSummary: Well-structured template addition with proper dependencies format. Test fixtures comprehensive (15 tests including parent-chain resolution). Setup script extension clean with backward-compatible defaults. Nits: commands.md not updated with --template flag, labels field inconsistency between templates, inherited TMPDIR shadowing.","created_at":"2026-02-08T06:42:08Z"},{"id":89,"issue_id":"cap-ybq","author":"Sam Biggins","text":"PHASE: SERVE (round 2, post-nit-fixes)\nStatus: completed\nVerdict: approved\nIssues: 0 critical, 0 major, 0 minor, 0 nits\nSummary: Both nit fixes clean. commands.md accurately reflects --template flag and demo-simple template. Labels removed from issues.jsonl for schema consistency with demo-capsule. All 15 fixture tests still pass.","created_at":"2026-02-08T07:04:26Z"},{"id":90,"issue_id":"cap-ybq","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add demo-simple template with proper dependency format so parent chain resolves in capsule pipeline\nBefore: demo-simple only existed in line-cook with shorthand parent fields that bd import ignores; setup-template.sh only supported demo-capsule\nAfter: templates/demo-simple/ with proper dependencies array format; setup-template.sh accepts --template flag; docs updated; 15 fixture tests pass; parent chain resolves correctly\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\n\nCommits: 5a4a22c, d106d1b\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-08T07:18:26Z"}]}
